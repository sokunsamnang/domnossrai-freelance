;/*FB_PKG_DELIM*/

__d("LSCreateDataTrace",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d=[];return b.seq([function(d){return c[0]=b.i64.of_float(Date.now()),b.db.table(153).add({traceId:a[0],initTimestampMs:c[0],traceType:a[4],shouldFlush:!1,contextOne:a[1],contextTwo:a[2],contextThree:a[3]})},function(a){return b.resolve(d)}])}b=a;f["default"]=b}),66);
__d("LSProcessBackupIds",["LSAppendDataTraceAddon","LSIsMobileClient","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsProcessBackupIdsStoredProcedure] Beginning execution."),a[0]!==f?c.sp(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1487]),c.i64.cast([0,2]),f,f):c.resolve()},function(a){return c.sp(b("LSIsMobileClient")).then(function(a){return a=a,d[1]=a[0],a})},function(a){return d[1]?d[2]=!0:d[2]=!1,d[2]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[12]=c.createArray(),f!==f?d[13]=(d[12].push(f),d[12]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[12],c.i64.cast([0,3]))):c.resolve()},function(e){return c.db.table(172).fetch([[[c.i64.cast([0,1])]]]).next().then(function(e,h){var i=e.done;e=e.value;return i?c.seq([function(d){return a[0]!==f?c.sp(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1488]),c.i64.cast([0,2]),f,f):c.resolve()},function(a){return c.sp(b("LSIsMobileClient")).then(function(a){return a=a,d[12]=a[0],a})},function(a){return d[12]?d[13]=!0:d[13]=!1,d[13]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[14]=c.createArray(),f!==f?d[15]=(d[14].push(f),d[14]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[14],c.i64.cast([0,3]))):c.resolve()},function(a){return d[3]=c.i64.cast([0,0])}]):(h=e.item,c.seq([function(e){return d[14]=h.backupId,d[13]=h.authorityLevel,c.i64.eq(d[13],c.i64.cast([0,20]))?c.resolve(d[12]=c.i64.cast([0,1])):c.seq([function(e){return c.i64.eq(d[13],c.i64.cast([0,80]))?c.seq([function(e){return c.i64.eq(d[14],f)?c.seq([function(d){return a[0]!==f?c.sp(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1492]),c.i64.cast([0,2]),f,f):c.resolve()},function(a){return c.sp(b("LSIsMobileClient")).then(function(a){return a=a,d[17]=a[0],a})},function(a){return d[17]?d[18]=!0:d[18]=!1,d[18]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[19]=c.createArray(),f!==f?d[20]=(d[19].push(f),d[19]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[19],c.i64.cast([0,3]))):c.resolve()},function(a){return d[16]=c.i64.cast([0,2])}]):c.seq([function(e){return c.i64.eq(d[14],c.i64.cast([-1,4294967295]))?c.seq([function(d){return a[0]!==f?c.sp(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1489]),c.i64.cast([0,2]),f,f):c.resolve()},function(a){return c.sp(b("LSIsMobileClient")).then(function(a){return a=a,d[18]=a[0],a})},function(a){return d[18]?d[19]=!0:d[19]=!1,d[19]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[20]=c.createArray(),f!==f?d[21]=(d[20].push(f),d[20]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[20],c.i64.cast([0,3]))):c.resolve()},function(a){return d[17]=c.i64.cast([-1,4294967295])}]):c.seq([function(e){return c.ftr(c.db.table(168).fetch(),function(a){return c.i64.eq(a.backupId,d[14])&&c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}).next().then(function(e,h){h=e.done;e=e.value;return h?c.seq([function(d){return a[0]!==f?c.sp(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1490]),c.i64.cast([0,2]),f,f):c.resolve()},function(a){return c.sp(b("LSIsMobileClient")).then(function(a){return a=a,d[20]=a[0],a})},function(a){return d[20]?d[21]=!0:d[21]=!1,d[21]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[22]=c.createArray(),f!==f?d[23]=(d[22].push(f),d[22]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[22],c.i64.cast([0,3]))):c.resolve()},function(a){return d[18]=c.i64.cast([0,4])}]):(e.item,c.seq([function(d){return a[0]!==f?c.sp(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1491]),c.i64.cast([0,2]),f,f):c.resolve()},function(a){return c.sp(b("LSIsMobileClient")).then(function(a){return a=a,d[20]=a[0],a})},function(a){return d[20]?d[21]=!0:d[21]=!1,d[21]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[22]=c.createArray(),f!==f?d[23]=(d[22].push(f),d[22]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[22],c.i64.cast([0,3]))):c.resolve()},function(a){return d[18]=c.i64.cast([0,3])}]))})},function(a){return d[17]=d[18]}])},function(a){return d[16]=d[17]}])},function(a){return d[15]=d[16]}]):c.seq([function(d){return a[0]!==f?c.sp(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1489]),c.i64.cast([0,2]),f,f):c.resolve()},function(a){return c.sp(b("LSIsMobileClient")).then(function(a){return a=a,d[16]=a[0],a})},function(a){return d[16]?d[17]=!0:d[17]=!1,d[17]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[18]=c.createArray(),f!==f?d[19]=(d[18].push(f),d[18]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[18],c.i64.cast([0,3]))):c.resolve()},function(a){return d[15]=c.i64.cast([-1,4294967295])}])},function(a){return d[12]=d[15]}])},function(a){return d[3]=d[12]}]))})},function(a){return d[5]=c.i64.of_float(Date.now()),d[7]="Finishing execution. Execution time: ",d[8]=c.i64.to_string(c.i64.sub(d[5],d[0])),d[10]=" ms",d[6]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsProcessBackupIdsStoredProcedure] ",d[6],d[7],d[6],d[8],d[6],d[10]].join("")),d[9]=",",d[11]=c.createArray(),f!==f?d[12]=(d[11].push(f),d[11]):0,c.nop(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsProcessBackupIdsStoredProcedure",[d[7],d[9],d[8],d[9],d[10]].join(""),d[11],c.i64.cast([0,4]))},function(a){return e[0]=d[3]}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSProcessBackupIdsStoredProcedure",["LSProcessBackupIds"],(function(a,b,c,d,e,f,g){function a(a,b){b===void 0&&(b={});var d=[];d[0]=b.traceId;return c("LSProcessBackupIds").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSDataTraceTag",[],(function(a,b,c,d,e,f){"use strict";a=0;b=1;c=2;d=3;e=4;var g=5,h=6,i=7,j=20,k=21,l=22,m=23,n=24,o=25,p=26,q=27,r=28,s=29,t=30,u=31,v=32,w=33,x=34,y=35,z=36,A=37,B=38,C=39,D=40,E=41,F=42;f.none=a;f.sticker=b;f.image=c;f.animatedImage=d;f.video=e;f.audio=g;f.file=h;f.xma=i;f.messageTypeNone=j;f.messageTypeText=k;f.messageTypeFutureproof=l;f.messageTypeCiphertext=m;f.messageTypeUnavailable=n;f.messageTypeImage=o;f.messageTypeVideo=p;f.messageTypePtt=q;f.messageTypeAdmin=r;f.messageTypeRevoked=s;f.messageTypeGif=t;f.messageTypeSticker=u;f.messageTypeExpiredEphemeral=v;f.messageTypeEphemeralSettingAdmin=w;f.messageTypeEphemeralSyncResponse=x;f.messageTypeEphemeralScreenshotAction=y;f.messageTypeDeleteForMe=z;f.messageTypeEphemeralSettingChangeFromCurrentDevice=A;f.messageTypeAlertICDC=B;f.messageTypeGroupInvite=C;f.messageTypeXMA=D;f.messageTypeReaction=E;f.messageTypeSenderKeyDistribution=F}),66);
__d("MAWBridgeTrace",["WAJids"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e,f,g,h,i){var j=a.ack,k=a.externalId,l=a.ts;a=a.type;var m=d("WAJids").switchOnMsgrChatJidType(b,{group:function(a){return"Group"},user:function(a){return"User"}});return{ack:j,externalId:k,isFirstMsg:!!f,openMessageOtid:e,openMessageParticipantCount:g,participantCount:h,threadJid:b,threadKey:i,threadType:m,traceType:c,ts:l,type_:a}}function b(a,b,c){return{traceContext:c,traceId:b,traceType:a}}function c(a,b,c,d){return{errorMessage:d,event:b,externalIds:a,traceType:c}}function e(a,b,c,d,e,f){return{checkPointId:a,dataTraceId:b,errorMessage:c,shouldFlush:d,syncChannel:e,tags:f}}g.createBridgeStartTraceData=a;g.createBridgeStartTraceWithTraceIdData=b;g.createBridgeUpdateTraceData=c;g.createBridgeTraceRecordCheckpointData=e}),98);
__d("MAWTraceUtils",["LSDataTraceCheckPoint","LSDataTraceTag","LSIntEnum","LSRequestId","MAWBridge","MAWBridgeTrace","MAWMsgType"],(function(a,b,c,d,e,f,g){"use strict";var h,i="backup_upload",j="media_backup",k="vesta_registration",l="vesta_login";function m(){return c("LSRequestId").generate()}function a(a,b,c){c=(c=c)!=null?c:m();d("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"StartTraceWithTraceId",value:d("MAWBridgeTrace").createBridgeStartTraceWithTraceIdData(a,c,b)}]},!0);return c}function n(a,b,c,e,f){if(a!=null){c=c.length>0?c.map(function(a){return a.toString()}).join(","):void 0;d("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"TraceRecordCheckpoint",value:d("MAWBridgeTrace").createBridgeTraceRecordCheckpointData(b,a,f,e,-1,c)}]},!0)}}function b(a,b,e,f){n(a,b,e,!1),n(a,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").FLOW_END_FOR_FAILURE),e,!0,f)}function e(a,b,e){n(a,b,e,!1),n(a,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").FLOW_END_AND_FLUSH),e,!0)}function f(a,b,e){n(a,b,e,!1),n(a,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").FLOW_END_AND_FLUSH),e,!0)}function o(a){switch(a){case d("MAWMsgType").MSG_TYPE.TEXT:return d("LSDataTraceTag").messageTypeText;case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:return d("LSDataTraceTag").messageTypeFutureproof;case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:return d("LSDataTraceTag").messageTypeCiphertext;case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:return d("LSDataTraceTag").messageTypeUnavailable;case d("MAWMsgType").MSG_TYPE.IMAGE:return d("LSDataTraceTag").messageTypeImage;case d("MAWMsgType").MSG_TYPE.VIDEO:return d("LSDataTraceTag").messageTypeVideo;case d("MAWMsgType").MSG_TYPE.PTT:return d("LSDataTraceTag").messageTypePtt;case d("MAWMsgType").MSG_TYPE.ADMIN:return d("LSDataTraceTag").messageTypeAdmin;case d("MAWMsgType").MSG_TYPE.REVOKED:return d("LSDataTraceTag").messageTypeRevoked;case d("MAWMsgType").MSG_TYPE.GIF:return d("LSDataTraceTag").messageTypeGif;case d("MAWMsgType").MSG_TYPE.STICKER:return d("LSDataTraceTag").messageTypeSticker;case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:return d("LSDataTraceTag").messageTypeExpiredEphemeral;case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:return d("LSDataTraceTag").messageTypeEphemeralSettingAdmin;case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:return d("LSDataTraceTag").messageTypeEphemeralSyncResponse;case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:return d("LSDataTraceTag").messageTypeEphemeralScreenshotAction;case d("MAWMsgType").MSG_TYPE.DELETE_FOR_ME:return d("LSDataTraceTag").messageTypeDeleteForMe;case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:return d("LSDataTraceTag").messageTypeEphemeralSettingChangeFromCurrentDevice;case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:return d("LSDataTraceTag").messageTypeAlertICDC;case d("MAWMsgType").MSG_TYPE.GROUP_INVITE:return d("LSDataTraceTag").messageTypeGroupInvite;case d("MAWMsgType").MSG_TYPE.XMA:return d("LSDataTraceTag").messageTypeXMA;case d("MAWMsgType").MSG_TYPE.REACTION:return d("LSDataTraceTag").messageTypeReaction;case d("MAWMsgType").MSG_TYPE.SK_DISTRIBUTION:return d("LSDataTraceTag").messageTypeSenderKeyDistribution;default:return d("LSDataTraceTag").messageTypeNone}}g.CONTEXT_BACKUP_UPLOAD=i;g.CONTEXT_MEDIA_BACKUP=j;g.CONTEXT_VESTA_REGISTRATION=k;g.CONTEXT_VESTA_LOGIN=l;g.createTraceId=m;g.startNewTrace=a;g.recordCheckpointForTrace=n;g.recordFailureAndFlushForTraceId=b;g.recordSuccessAndFlushForTraceId=e;g.recordInvalidUploadRequestAndFlushTrace=f;g.getTagForMsgType=o}),98);
__d("MAWEBFrontendQPLLogger",["QPLUserFlow","Random","gkx","hashString","qpl"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=c("Random").uint32();c("QPLUserFlow").start(c("qpl")._(521478596,"1329"),{instanceKey:a});return a}function b(a){if(a==null)return;c("QPLUserFlow").addPoint(c("qpl")._(521478596,"1329"),"processing_threads_from_occamadillo",{instanceKey:a})}function d(a,b){if(a==null)return;b===!0?c("QPLUserFlow").addPoint(c("qpl")._(521478596,"1329"),"backup_restore_completed_success",{instanceKey:a}):c("QPLUserFlow").addPoint(c("qpl")._(521478596,"1329"),"backup_restore_completed_failed",{instanceKey:a})}function e(a,b,d){if(a==null)return;if(b===!0)c("QPLUserFlow").endSuccess(c("qpl")._(521478596,"1329"),{instanceKey:a});else{d=(b=d)!=null?b:"dyi_e2e_failed_unspecifed_reason";c("QPLUserFlow").endFailure(c("qpl")._(521478596,"1329"),d,{instanceKey:a})}}function f(a,b,d){if(c("gkx")("497")!==!0||a==null)return;a=c("hashString")(a);c("QPLUserFlow").addPoint(c("qpl")._(521485625,"1876"),b,{data:d,instanceKey:a})}function h(a,b,d){if(c("gkx")("497")!==!0||a==null)return;a=c("hashString")(a);c("QPLUserFlow").addPoint(c("qpl")._(521485625,"1876"),b,{data:d,instanceKey:a});c("QPLUserFlow").endCancel(c("qpl")._(521485625,"1876"),{annotations:d,instanceKey:a})}function i(a,b,d){if(c("gkx")("497")!==!0||a==null)return;a=c("hashString")(a);if(b){c("QPLUserFlow").endSuccess(c("qpl")._(521485625,"1876"),{instanceKey:a});return}c("QPLUserFlow").endFailure(c("qpl")._(521485625,"1876"),(b=d)!=null?b:"upload_message_backup_failed",{instanceKey:a})}g.startDyiQplE2EUserFlow=a;g.logDyiE2EProcessThreadsFromOccamadillo=b;g.logDyiE2EDyiBackupRestoreCompleted=d;g.endDyiE2ECompleted=e;g.addPointUploadMessageBackup=f;g.addPointAndEndFlowUploadMessageBackup=h;g.endFlowUploadMessageBackup=i}),98);
__d("MAWEncryptedBackupUtils",["I64","LSAuthorityLevel","LSDataTraceCheckPoint","LSIntEnum","MAWEBFrontendQPLLogger","MAWTraceUtils","Promise","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,b,c,e,f){d("MAWTraceUtils").recordCheckpointForTrace(a,b,c,e,f)}function a(a,e){d("MAWEBFrontendQPLLogger").addPointUploadMessageBackup(e,"get_backup_tenancy");k(e,(j||(j=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_WEB_GET_BACKUP_TENANCY),[],!1);return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("secure_encrypted_backups_client_state"))).then(function(a){if(a==null)return(h||(h=b("Promise"))).resolve();var e=a.backupTenancy;a=a.authorityLevel;if(e!=null&&(i||(i=d("I64"))).equal((j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE),a))return e})}g.getBackupTenancy=a}),98);
__d("MWEncryptedBackupsProcessBackupIds",["FBLogger","LSFactory","LSIntEnum","LSProcessBackupIdsStoredProcedure","Promise","ReQL","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){if(c("gkx")("7110"))return a.runInTransaction(function(a){return c("LSProcessBackupIdsStoredProcedure")(c("LSFactory")(a))},"readwrite").then(function(a){return(i||(i=d("LSIntEnum"))).unwrapIntEnum(a[0])});else return(h||(h=b("Promise"))).resolve(0)}function a(a,b){return a.table("encrypted_backups").subscribe(function(){c("promiseDone")(d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.table("encrypted_backups"))),function(d){if(d!=null){c("promiseDone")(j(a),b,function(a){c("FBLogger")("labyrinth_web").catching(a).info("Error in db transaction")});return}})})}g.processBackupIdsStoredProcedure=j;g.subscribeToEncryptedBackupsRow=a}),98);
__d("LSMaxInt32",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;a=(h||d("I64")).of_int32(2147483647);g["default"]=a}),98);
__d("LSBase64Encode.nop",["LSResult","Promise","base64-js"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,e,f){return(h||(h=b("Promise"))).resolve(c("LSResult")(f?d("base64-js").fromByteArray(new Uint8Array(f)):void 0))};g["default"]=a}),98);
__d("LSBinaryToHex.nop",["LSResult","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,d,e){a=Array.from(new Uint8Array(e));d=a.map(function(a){return a.toString(16).padStart(2,"0")});e=d.join("").toUpperCase();return(h||(h=b("Promise"))).resolve(c("LSResult")(e))};g["default"]=a}),98);
__d("LSCreateDataTraceID.bs",["LSRequestId","LSResult","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,d){return(h||(h=b("Promise"))).resolve(c("LSResult")(c("LSRequestId").generate()))}g.call=a}),98);
__d("LSCreateDataTraceID.nop",["LSCreateDataTraceID.bs"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b){return d("LSCreateDataTraceID.bs").call(a,b)};g["default"]=a}),98);
__d("CryptoLogger",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("FBLogger")("labyrinth_web","crypto."+a)}function b(a,b){return b instanceof Error?a.catching(b):a}g.CryptoLogger=a;g.captureError=b}),98);
__d("RetUtil",["LSResult"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("LSResult")(a)}g.getNullableRetResult=a}),98);
__d("LSCreateDerivedKeys.nop",["CryptoLogger","I64","LSMaxInt32","LSVec","Promise","RetUtil","globalCryptoSubtle"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=function(a,e,f,g,j,k){var l=d("CryptoLogger").CryptoLogger("create_derived_keys");a=c("LSVec").toArray(k);if(a.length<1||a.some(function(a){return(i||(i=d("I64"))).gt(a,c("LSMaxInt32"))})){l.mustfix("Invalid key lengths for derive keys");return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult(void 0))}var m=a.map((i||(i=d("I64"))).to_int32),n=a.map(i.to_int32).reduce(function(a,b){return a+b},0)<<3;return c("globalCryptoSubtle").importKey("raw",j,"HKDF",!1,["deriveBits"]).then(function(a){var b;return c("globalCryptoSubtle").deriveBits({hash:"SHA-256",info:f,name:"HKDF",salt:(b=g)!=null?b:new Uint8Array(10).buffer},a,n)}).then(function(a){a=new Uint8Array(a);var b=[],e=0;for(var f=0,g=m.length;f<g;++f){var h=e+m[f];b.push(a.slice(e,h).buffer);e=h}return d("RetUtil").getNullableRetResult(c("LSVec").ofArray(b))})["catch"](function(a){l.catching(a).mustfix("Failed to create derived keys");return d("RetUtil").getNullableRetResult()})};g["default"]=a}),98);
__d("LSGetBlobFromInt64BE.bs",["I64","LSResult","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,e,f){var g=new Uint8Array(8);g.reduceRight(function(a,b,c){b=(i||(i=d("I64"))).to_int32(i.mod_(a,i.of_string("256")));g[c]=b;return i.div(a,i.of_string("256"))},f);return(h||(h=b("Promise"))).resolve(c("LSResult")(g.buffer))}g.call=a}),98);
__d("LSGetBlobFromInt64BE.nop",["LSGetBlobFromInt64BE.bs"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,c){return d("LSGetBlobFromInt64BE.bs").call(a,b,c)};g["default"]=a}),98);
__d("LSTextEncoder",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return a.encode(b).buffer}f.encodeToArrayBuffer=a}),66);
__d("LSGetBlobFromString.bs",["CryptoLogger","LSResult","LSTextEncoder","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e,f){a=new TextEncoder();try{return(h||(h=b("Promise"))).resolve(c("LSResult")(d("LSTextEncoder").encodeToArrayBuffer(a,f)))}catch(f){e=d("CryptoLogger").CryptoLogger("get_blob_from_string");e.catching(f).mustfix(f.message?f.message:"Error in get blob from string.");return(h||(h=b("Promise"))).resolve(c("LSResult")(d("LSTextEncoder").encodeToArrayBuffer(a,"")))}}g.call=a}),98);
__d("LSGetBlobFromString.nop",["LSGetBlobFromString.bs"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,c){return d("LSGetBlobFromString.bs").call(a,b,c)};g["default"]=a}),98);
__d("LSGetThreadTransportIdFromThreadId.nop",["I64","LSResult","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=function(a,e,f){return(i||(i=b("Promise"))).resolve(c("LSResult")((h||(h=d("I64"))).of_string_opt(f)))};g["default"]=a}),98);
__d("LSHmac_v2.nop",["CryptoLogger","LSResult","Promise","globalCryptoSubtle"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,e,f,g){return c("globalCryptoSubtle").importKey("raw",f,{hash:"SHA-256",name:"HMAC"},!1,["sign"]).then(function(a){return c("globalCryptoSubtle").sign("HMAC",a,g)}).then(function(a){return(h||(h=b("Promise"))).resolve(c("LSResult")(a))})["catch"](function(a){d("CryptoLogger").captureError(d("CryptoLogger").CryptoLogger("hmac_v2"),a).mustfix("Crypto signing failed");throw a})};g["default"]=a}),98);
__d("LSOcmfClientMap.nop",["CryptoLogger","LSResult","Promise","globalCryptoSubtle","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("ristretto255").__setRef("LSOcmfClientMap.nop");a=function(a,e,f,g){return(h||(h=b("Promise"))).all([c("globalCryptoSubtle").digest("SHA-512",g),i.load()]).then(function(a){var b=a[0];a=a[1];b=a.fromHash(new Uint8Array(b));a=a.scalarMult(new Uint8Array(f),b);return c("LSResult")(a.buffer)})["catch"](function(a){d("CryptoLogger").captureError(d("CryptoLogger").CryptoLogger("ocmf_client_map"),a).mustfix("Failed OcmfClientMap.");throw a})};g["default"]=a}),98);
__d("LSCryptoUtils",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return new Uint8Array(a)}function h(a){var b=new TextEncoder();return b.encode(a)}function i(a){var b=new TextDecoder();return b.decode(a)}function b(a){return i(new Uint8Array(a))}function d(a){return h(a).buffer}function e(a,b){var d=a.byteLength,e=b.byteLength;if(d!==e)throw c("FBLogger")("mpf_web_foundations").mustfixThrow("Mismatched lengths for modAdd, %d != %d",d,e);var f=new Uint8Array(d);new Uint8Array(d).reduceRight(function(c,d,e){d=a[e];var g=b[e];d=d+g+c;g=d>255?[d-256,1]:[d,0];f[e]=g[0];return g[1]},0);return f}g.bufToUint8=a;g.strToUint8=h;g.uint8ToStr=i;g.bufToStr=b;g.strToBuf=d;g.modAddBytes=e}),98);
__d("UInt8Array",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.length;if(!(b>0&&b%2===0&&/^[\da-f]+$/gi.test(a)))return;var c=[];for(var d=0,b=b/2|0;d<b;++d){var e=parseInt(a.substring(d<<1,(d<<1)+2|0),16);c.push(e)}return new Uint8Array(c)}function b(a){return window.crypto.getRandomValues(new Uint8Array(a)).buffer}function c(a){a=a.filter(function(a){return a.byteLength!==0});var b=a.reduce(function(a,b){return a+b.byteLength|0},0),c=new Uint8Array(b);a.reduce(function(a,b){c.set(b,a);return a+b.byteLength|0},0);return c}f.fromHexString=a;f.getBufferWithRandomValuesFromLength=b;f.concatBytes=c}),66);
__d("OrderPreservingEncryption",["FBLogger","LSCryptoUtils","Promise","UInt8Array","globalCryptoSubtle"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return window.crypto.getRandomValues(new Uint8Array(32)).buffer}function i(a){var b=a.length;return b%2!==0?"0"+a:a}function j(a){a=BigInt(a);var b=i(a.toString(16));a=b.length;a=a/2;var c=[];for(var d=0;d<a;++d)c.push(d<<1);return new Uint8Array(c.map(function(a){var c=a+2;return b.slice(a,c)}).map(function(a){return parseInt(a,16)}))}function k(a){a=a.map(function(a){return a._0});return{_0:d("UInt8Array").concatBytes(a)}}function l(a){return"OPE key has length "+String(a)+", expected  "+String(32)}function m(a,b,e){return c("globalCryptoSubtle").importKey("raw",a.buffer,"HKDF",!1,["deriveKey","deriveBits"]).then(function(a){var d=new ArrayBuffer(0);return c("globalCryptoSubtle").deriveBits({hash:"SHA-256",info:b.buffer,name:"HKDF",salt:d},a,e<<3)}).then(function(a){return{_0:d("LSCryptoUtils").bufToUint8(a)}})}function n(a,b){return{_0:d("LSCryptoUtils").modAddBytes(a._0,b)}}function o(a,e,f,g){var i=f.byteLength;if(i!==32)throw c("FBLogger")("labyrinth_web").mustfixThrow(l(i));var j=g.byteLength,o=function(a,b){var c=new Uint8Array(1+j),d=new Uint8Array(j-b).fill(0);c.set([b]);c.set(a.subarray(0,b),1);c.set(d,b+1);return c};if(j>=255)throw c("FBLogger")("labyrinth_web").mustfixThrow("Input is too large");return(h||(h=b("Promise"))).all(Array.from(g).map(function(b,c){c=o(g,c);var e=new Uint8Array(a);e[a-1]=b;b=d("LSCryptoUtils").bufToUint8(f);return m(b,c,a).then(function(a){return n(a,e)})})).then(function(a){return d("UInt8Array").concatBytes([new Uint8Array([e]),k(a)._0])})}function e(a,b,c,d){d=j(d);return o(a,b,c,d)}g.keyGen=a;g.intStringToBEBytes=j;g.buildKeyLengthErrorMsg=l;g.encryptBigEndianBytes=o;g.encryptIntString=e}),98);
__d("LSOpeEncrypt.bs",["CryptoLogger","I64","LSResult","OrderPreservingEncryption","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,e,f,g,j){var k=d("CryptoLogger").CryptoLogger("ope_encrypt");return d("OrderPreservingEncryption").encryptBigEndianBytes((i||(i=d("I64"))).to_int32(j),1,f,new Uint8Array(g)).then(function(a){return(h||(h=b("Promise"))).resolve(c("LSResult")(a.buffer))})["catch"](function(a){d("CryptoLogger").captureError(k,a).mustfix("OpeEncrypt_impl failed");throw a})}g.call=a}),98);
__d("LSOpeEncrypt.nop",["LSOpeEncrypt.bs"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,c,e,f){return d("LSOpeEncrypt.bs").call(a,b,c,e,f)};g["default"]=a}),98);
__d("LSTruncateSortKey.nop",["CryptoLogger","LSResult","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("CryptoLogger").CryptoLogger("truncate_sort_key");a=function(a,d,e){if(e.byteLength!==8)throw i.mustfixThrow("Bad length on sort key for truncation");a=new Uint8Array(e);d=a.subarray(0,2);if(d.some(function(a){return a!==0}))throw i.mustfixThrow("Bad prefix on sort key for truncation");return(h||(h=b("Promise"))).resolve(c("LSResult")(e.slice(2)))};g["default"]=a}),98);
__d("MWPReplyLogging",["I64","QPLUserFlow","deepEquals","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Map();function j(a){var b=Date.now()|0;i.set((h||(h=d("I64"))).to_string(a),b);return b}function k(a){var b=i.get((h||(h=d("I64"))).to_string(a));if(b==null)return j(a);else return b}function a(a,b,e){if(e){a?c("QPLUserFlow").endCancel(c("qpl")._(25298086,"3996"),{instanceKey:k(b)}):c("QPLUserFlow").endSuccess(c("qpl")._(25298086,"3996"),{instanceKey:k(b)});i["delete"]((h||(h=d("I64"))).to_string(b));return}}function b(a,b,d){if(a!=null){if(c("deepEquals")(a,b)){c("QPLUserFlow").addPoint(c("qpl")._(25298086,"3996"),"same_message",{instanceKey:k(d)});return}if(!c("deepEquals")(a,b)){a=k(d);c("QPLUserFlow").addPoint(c("qpl")._(25298086,"3996"),"switch_message",{instanceKey:a});c("QPLUserFlow").endCancel(c("qpl")._(25298086,"3996"),{instanceKey:a});c("QPLUserFlow").start(c("qpl")._(25298086,"3996"),{cancelOnUnload:!0,instanceKey:j(d),timeoutInMs:6e4});return}}c("QPLUserFlow").start(c("qpl")._(25298086,"3996"),{cancelOnUnload:!0,instanceKey:j(d),timeoutInMs:6e4})}g.logClearReply=a;g.logSetReply=b}),98);
/**
 * License: https://www.facebook.com/legal/license/ZMc_bSwzLKC/
 */
__d("ristretto255-0.1.1",["tweetnacl-1.0.3"],(function(a,b,c,d,e,f,g){var h=c("tweetnacl-1.0.3")();Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:function(a,b){return new Uint8Array(Array.prototype.slice.call(this,a,b))}});c={};var i=h.lowlevel,j=i.gf([1]);function k(){return[i.gf(),i.gf(),i.gf(),i.gf()]}var l=new Uint8Array([226,242,174,10,106,188,78,113,168,132,169,97,197,0,81,95,88,227,11,106,165,130,221,141,182,166,89,69,224,141,45,118]),m=new Float64Array([235,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function n(a,b,c){var d=new Float64Array(64);for(var e=0;e<32;e++)for(var f=0;f<32;f++)d[e+f]+=b[e]*c[f];i.modL(a,d)}function o(a,b){n(a,b,b)}function p(a,b){for(var c=0;c<32;c++)a[c]=b[c];for(c=251;c>=0;c--)o(a,a),(m[c>>3]>>(c&7)&1)!==0&&n(a,a,b)}var q=i.gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]),r=i.gf([11803,18811,63136,32407,21693,7032,36364,44957,53757,12789,64713,3900,18604,11139,12735,14185]),s=i.gf([16618,32861,64938,39368,29374,23105,5655,40239,55360,65025,31633,5826,64674,53167,35077,30828]),t=i.gf([49526,37983,2497,57980,13583,52574,41272,11393,57316,48752,43997,39316,57559,45747,29352,656]),u=i.gf([19744,17645,23210,12717,6553,45086,18988,53918,20203,21147,54063,19676,8769,63084,45946,22888]);function v(a){var b=new Uint8Array(32);i.pack25519(b,a);a=1;for(var c=0;c<32;c++)a&=b[c]===0;return a}function w(a,b,c){var d;c=-c;for(var e=0;e<16;e++)d=a[e]^b[e],d&=c,a[e]^=d}function x(a){var b=new Uint8Array(32);i.pack25519(b,a);return b[0]&1}function y(a,b){i.Z(a,i.gf(),b)}function z(a,b,c){var d=i.gf();y(d,b);i.set25519(a,b);w(a,d,c)}function A(a,b){z(a,b,x(b))}function B(a,b,c){var d=i.gf(),e=i.gf(),f=i.gf(),g=i.gf(),h=i.gf(),j=i.gf();i.S(d,c);i.M(d,d,c);i.S(a,d);i.M(a,a,c);i.M(a,a,b);i.pow2523(a,a);i.M(a,a,d);i.M(a,a,b);i.S(e,a);i.M(e,e,c);i.Z(f,e,b);i.A(g,e,b);i.M(h,b,q);i.A(h,e,h);d=v(f);c=v(g);b=v(h);i.M(j,a,q);w(a,j,c|b);A(a,a);return d|c}function C(a){var b=i.gf(),c=i.gf(),d=i.gf(),e=i.gf(),f=i.gf(),g=i.gf(),h=i.gf(),k=i.gf(),l=i.gf(),m=i.gf(),n=i.gf(),o=i.gf(),p=i.gf(),r=i.gf(),t=i.gf(),u=i.gf(),v=i.gf(),y=0,C=new Uint8Array(32);i.A(m,a[2],a[1]);i.Z(v,a[2],a[1]);i.M(m,m,v);i.M(n,a[0],a[1]);i.S(o,n);i.M(o,m,o);B(f,j,o);i.M(b,f,m);i.M(c,f,n);i.M(u,b,c);i.M(u,u,a[3]);i.M(g,a[0],q);i.M(h,a[1],q);i.M(e,b,s);i.M(l,a[3],u);y=x(l);p=i.gf(a[0]);r=i.gf(a[1]);d=i.gf(c);w(p,h,y);w(r,g,y);w(d,e,y);i.M(t,p,u);z(r,r,x(t));i.Z(k,a[2],r);i.M(k,d,k);A(k,k);i.pack25519(C,k);return C}function D(a){var b=a[31]&127^127;for(var c=30;c>0;c--)b|=a[c]^255;b=(b|0>>>0)-1>>8;c=237-1-(a[0]|0>>>0)>>8;return 1-((b&c|a[0])&1|(a[31]&255)>>7)}function E(a,b){var c=i.gf(),d=i.gf(),e=i.gf(),f=i.gf(),g=i.gf(),h=i.gf(),k=i.gf(),l=i.gf(),m=i.gf(),n=i.gf();if(D(b)===0)return-1;i.unpack25519(e,b);i.S(f,e);i.set25519(g,j);i.Z(g,g,f);i.S(k,g);i.set25519(h,j);i.A(h,h,f);i.S(l,h);i.M(m,i.D,k);y(m,m);i.Z(m,m,l);i.M(n,m,l);i.set25519(d,j);b=B(c,d,n);i.M(a[0],c,h);i.M(a[1],c,a[0]);i.M(a[1],a[1],m);i.M(a[0],a[0],e);i.A(a[0],a[0],a[0]);A(a[0],a[0]);i.M(a[1],g,a[1]);i.set25519(a[2],j);i.M(a[3],a[0],a[1]);return-(1-b|x(a[3])|v(a[1]))}function F(a,b){var c=i.gf(),d=i.gf(),e=i.gf(),f=i.gf(),g=i.gf(),h=i.gf(),k=i.gf(),l=i.gf(),m=i.gf(),n=i.gf(),o=i.gf(),p=i.gf(),s=i.gf(),v=i.gf();i.set25519(e,j);i.S(f,b);i.M(f,q,f);i.A(m,f,e);i.M(m,m,t);i.set25519(c,j);y(c,c);i.A(g,f,i.D);i.M(n,f,i.D);i.Z(n,c,n);i.M(n,n,g);g=1-B(h,m,n);i.M(k,h,b);A(k,k);y(k,k);w(h,k,g);w(c,f,g);i.Z(d,f,e);i.M(d,d,c);i.M(d,d,u);i.Z(d,d,n);i.A(o,h,h);i.M(o,o,n);i.M(p,d,r);i.S(l,h);i.Z(s,e,l);i.A(v,e,l);i.M(a[0],o,v);i.M(a[1],s,p);i.M(a[2],p,v);i.M(a[3],o,s)}function G(a){var b=i.gf(),c=i.gf(),d=k(),e=k();i.unpack25519(b,a.slice(0,32));i.unpack25519(c,a.slice(32,64));F(d,b);F(e,c);i.add(d,e);return d}function a(a){var b=k();i.scalarbase(b,a);return C(b)}function b(a,b){var c=k(),d=k();if(E(c,b)!==0)throw new Error("Invalid argument");i.scalarmult(d,c,a);return C(d)}function d(a){var b=k();return E(b,a)===-1?!1:!0}function H(a,b){var c=k(),d=k();if(E(c,a)===-1)throw new Error("Invalid argument");if(E(d,b)===-1)throw new Error("Invalid argument");return[c,d]}function e(a,b){a=H(a,b);b=a[0];a=a[1];i.add(b,a);return C(b)}function I(a,b){var c=i.gf();y(c,b[3]);var d=i.gf();y(d,b[0]);d=[d,b[1],b[2],c];i.add(a,d)}function g(a,b){a=H(a,b);b=a[0];a=a[1];I(b,a);return C(b)}function J(){var a=h.randomBytes(64);return G(a)}function K(a){return C(G(a))}function L(){return C(J())}function M(){var a;new Uint8Array(32);var b=0;do{a=h.randomBytes(32);a[31]&=31;var c=32,d=1;do c--,b|=a[c]-i.L[c]>>8&d,d&=(a[c]^i.L[c])-1>>8;while(c!==0)}while(b===0);return a}function N(a){var b=new Uint8Array(32);p(b,a);return b}function O(a){var b=new Float64Array(64);for(var c=0;c<32;c++)b[c]=-a[c];c=new Uint8Array(32);i.modL(c,b);return c}function P(a,b){var c=new Float64Array(64);for(var d=0;d<32;d++)c[d]=a[d]+b[d];d=new Uint8Array(32);i.modL(d,c);return d}function Q(a,b){return P(a,O(b))}function R(a,b){var c=new Uint8Array(32);n(c,a,b);return c}c.scalarMultBase=a;c.scalarMult=b;c.isValid=d;c.add=e;c.sub=g;c.fromHash=K;c.getRandom=L;c.basePoint=l;c.scalar={};c.scalar.getRandom=M;c.scalar.invert=N;c.scalar.negate=O;c.scalar.add=P;c.scalar.sub=Q;c.scalar.mul=R;c.unsafe={};c.unsafe.point={};c.unsafe.point.toBytes=C;c.unsafe.point.fromBytes=E;c.unsafe.point.fromHash=G;c.unsafe.point.sub=I;c.unsafe.point.add=i.add;c.unsafe.point.scalarMultBase=i.scalarbase;c.unsafe.point.scalarMult=i.scalarmult;c.unsafe.point.getRandom=J;c.unsafe.point.alloc=k;c.unsafe.constants={};c.unsafe.constants.LSub2=m;c.unsafe.constants.sqrtm1=q;c.unsafe.constants.sqrtadm1=r;c.unsafe.constants.invsqrtamd=s;c.unsafe.constants.onemsqd=t;c.unsafe.constants.sqdmone=u;f.exports=c}),34);
__d("ristretto255",["ristretto255-0.1.1"],(function(a,b,c,d,e,f){e.exports=b("ristretto255-0.1.1")}),null);
__d("LsDataTraceFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1743851");b=d("FalcoLoggerInternal").create("ls_data_trace",a);e=b;g["default"]=e}),98);
__d("ArmadilloDataTraceType",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;a=(h||d("I64")).of_string("13");g.armadilloMessageSend=a}),98);
__d("LSDataTraceFlush",["ArmadilloDataTraceType","I64","LSDataTraceType","LSIntEnum","LsDataTraceFalcoEvent","ODS","Promise","ReQL","asyncToGeneratorRuntime","clearTimeout","gkx","promiseDone","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(i||(i=d("I64"))).of_string("120000"),m=i.of_string("600000"),n=new Set(["encrypted_backups_upload","encrypted_backups_media_backup"]);function o(a,b,c){var e=a.length;if(e===0)return[(i||(i=d("I64"))).neg_one,i.neg_one,void 0,void 0,void 0];e=a.find(function(a){return a.errorMessage!=null});e=e==null?void 0:e.errorMessage;a=a[a.length-1|0];var f=(i||(i=d("I64"))).of_float(Date.now()),g=a.timestampMs,h=i.compare(i.sub(f,c),l)>=0;return!b&&h?[(i||(i=d("I64"))).sub(f,c),a.checkPointId,g,e,"trace expired"]:[i.sub(g,c),a.checkPointId,g,e,e]}function p(a){return a.reduce(function(a,b,c){var e,f=(i||(i=d("I64"))).to_string(b.checkPointId),g=b.timestampMs;e=i.to_string((e=b.syncChannel)!=null?e:(i||(i=d("I64"))).neg_one);b=b.tags;b=b!=null?","+b:"";if(c===0)a.pointsList="".concat("(",f,",",e,b,")");else{c=String((i||(i=d("I64"))).to_int32(i.sub(g,a.lastCheckPointTimestamp)));a.pointsList=a.pointsList.concat("-",c,"-(",f,",",e,b,")")}a.lastCheckPointTimestamp=g;return a},{lastCheckPointTimestamp:(i||(i=d("I64"))).zero,pointsList:""}).pointsList}var q=i.of_string("2");function r(a){var b=a.traceType;b=(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").TASK))?"send":(i||(i=d("I64"))).equal(b,d("ArmadilloDataTraceType").armadilloMessageSend)?"armadillo send":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_INIT))?"encrypted_backups_init":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_ADD_DEVICE))?"encrypted_backups_add_device":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_UPLOAD))?"encrypted_backups_upload":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_RESTORE))?"encrypted_backups_restore":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_MEDIA_BACKUP))?"encrypted_backups_media_backup":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_SYNC_EPOCHS))?"encrypted_backups_sync_epochs":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").SAP_VESTA_LOGIN))?"sap_vesta_login":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").SAP_VESTA_REGISTRATION))?"sap_vesta_registration":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_OPT_OUT_OF_BACKUP))?"encrypted_backups_opt_out_of_backup":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_FETCH_BACKUPS_METADATA))?"encrypted_backups_fetch_backups_metadata":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_CREATE_EXTRA_VIRTUAL_DEVICE))?"encrypted_backups_create_extra_virtual_device":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_FETCH_BACKUP_STATUS))?"encrypted_backups_fetch_backup_status":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_THIRD_PARTY_ID_GENERATION))?"encrypted_backups_third_party_id_generation":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_MEDIA_RESTORE))?"encrypted_backups_media_restore":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_DELETE_BACKUP))?"encrypted_backups_delete_backup":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_SHADOW_INIT))?"shadow_encrypted_backups_init":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_SHADOW_ADD_DEVICE))?"shadow_encrypted_backups_add_device":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_SHADOW_UPLOAD))?"shadow_encrypted_backups_upload":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_SHADOW_RESTORE))?"shadow_encrypted_backups_restore":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_SHADOW_DELETE_BACKUP))?"shadow_encrypted_backups_delete_backup":a.contextTwo;return b}function s(a,b){var e=b.traceId,f=b.shouldFlush,g=r(b),h=b.traceType,j=(i||(i=d("I64"))).equal(h,d("ArmadilloDataTraceType").armadilloMessageSend)?"tam_message_send":b.contextOne,k=(i||(i=d("I64"))).equal(b.traceType,q)?void 0:b.predefinedId,l=b.initTimestampMs;return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.table("data_trace_addon").index("traceIdAddonId")).getKeyRange(e)).then(function(a){var b=o(a,f,l),h=b[0],m=b[1],n=b[3],q=b[4],r=a.length,s=p(a);c("LsDataTraceFalcoEvent").log(function(){var a;return{check_point_count:(i||(i=d("I64"))).to_string(i.of_int32(r)),check_point_list:s,client_event_ts:i.to_string(i.of_float(Date.now())),cold_start_time:void 0,data_trace_id:e,database_id:j,delivered_messages:void 0,error_message:q,first_error_message:n,has_backgrounded:!1,last_check_point:i.to_string(m),latency:i.to_string(h),media_type:void 0,num_of_attachments:void 0,persisted_metadata:void 0,predefined_id:k,sent_rich_media_messages:void 0,sent_text_messages:void 0,start_time:i.to_string(l),trace_flow:(a=g)!=null?a:""}})}).then(function(){return a.table("data_trace_meta")["delete"](e)})}function a(a,c){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("data_trace_meta")).getKeyRange(c)).then(function(c){if(c!=null)return s(a,c);else return(h||(h=b("Promise"))).resolve()})}var t={contents:void 0};function u(a){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.table("data_trace_meta").index("shouldFlushInitTimestampMsTraceId")).getKeyRange(!1).bounds({lt:d("ReQL").key((i||(i=d("I64"))).sub(i.of_float(Date.now()),l))})).then(function(a){if(c("gkx")("7110")){var b=(i||(i=d("I64"))).of_float(Date.now());return a.filter(function(a){var c=r(a);if(c!=null&&n.has(c)){c=(i||(i=d("I64"))).compare(i.sub(b,a.initTimestampMs),m)>=0;return c}return!0})}return a})}function v(a){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=(yield u(a));if(c.length===0)return;return a.runInTransaction(function(a){return u(a).then(function(c){return(h||(h=b("Promise"))).all(c.map(function(b){return s(a,b)}))})},"readwrite")});return w.apply(this,arguments)}function x(){var a=t.contents;if(a!=null){c("clearTimeout")(a);return}}function y(a){c("promiseDone")(v(a),function(){x();var b=c("setTimeout")(function(){y(a)},6e4);t.contents=b},function(){x(),(j||(j=d("ODS"))).bumpEntityKey(3185,"mw_trace","error")});return x}e=a;f=y;a={flush:e,flushExpiredDataTraces:f};g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("LSAppendDataTraceAddonStoredProcedure",["LSAppendDataTraceAddon"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.dataTraceId;d[1]=b.checkPointId;d[2]=b.syncChannel;d[3]=b.errorMessage;d[4]=b.tags;return c("LSAppendDataTraceAddon").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSIsMobileClient",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return c[0]=!1,b.resolve(c)}b=a;f["default"]=b}),66);
__d("LSIsEncryptionVersionSecure",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d=[];return b.i64.eq(a[0],b.i64.cast([0,4]))?c[0]=!1:(b.i64.eq(a[0],b.i64.cast([0,3]))?c[1]=!0:(b.i64.eq(a[0],b.i64.cast([0,2]))?c[2]=!0:(b.i64.eq(a[0],b.i64.cast([0,0]))?c[3]=!0:(b.i64.eq(a[0],b.i64.cast([0,99]))?c[4]=!1:c[4]=!1,c[3]=c[4]),c[2]=c[3]),c[1]=c[2]),c[0]=c[1]),d[0]=c[0],b.resolve(d)}b=a;f["default"]=b}),66);
__d("LSDataTraceCheckPoint",[],(function(a,b,c,d,e,f){a=Object.freeze({CLIENT_DB_OUTBOUND:1,CLIENT_NETWORK_OUTBOUND:2,CLIENT_NETWORK_INBOUND:10,CLIENT_DB_INBOUND:11,CLIENT_EVALUATE_DASM:12,CLIENT_APP_STATE_CHANGE:13,CLIENT_CREATE_TASK:20,CLIENT_RECIPIENT_PRESENCE:21,CLIENT_EVALUATE_DASM_BEGIN:22,MQTT_PUBLISH:30,MQTT_PUBLISH_ACK:31,MQTT_DISCONNECTED:32,MQTT_CONNECTING:33,MQTT_CONNECTED:34,MQTT_CONNECTION_ACKED:35,TINCAN_RECEIVE_MESSAGE:36,TINCAN_RECEIVE_DECRYPTION_COMPLETE:37,TINCAN_RECEIVE_DECRYPTION_FAILED:38,TINCAN_RECEIVE_DR_QUEUED:39,TINCAN_RECEIVE_DR_SENT_TO_NETWORK:40,TINCAN_RECEIVE_DR_PUBLISH_TO_MQTT:41,TINCAN_RECEIVE_DRMQTT_PUBACK:42,TINCAN_RECEIVE_BOUNCE_TASK_QUEUED:43,TINCAN_RECEIVE_BOUNCE_TASK_SENT_TO_NETWORK:44,TINCAN_RECEIVE_BOUNCE_TASK_PUBLISH_TO_MQTT:45,RICH_MEDIA_DOWNLOAD_START:50,RICH_MEDIA_DOWNLOAD_END:51,RICH_MEDIA_DOWNLOAD_ERROR:52,RICH_MEDIA_UPLOAD_START:53,ARMADILLO_ACT:60,ARMADILLO_ACT_TASK_PICK:61,ARMADILLO_ACT_SERIALIZE:62,ARMADILLO_ACT_GROUP_SEND:63,ARMADILLO_ACT_SEND_FAILURE:64,ARMADILLO_ACT_MESSAGE_SEND:65,NETWORK_DISCONNECTED:70,NETWORK_CONNECTED:71,NETWORK_UNKNOWN:72,FLOW_CREAT:80,FLOW_END:81,FLOW_INTERRUPTED:82,FLOW_CONNECT_ID:83,FLOW_END_AND_FLUSH:84,FLOW_END_FOR_FAILURE:85,TRACE_CREATED:98,CLIENT_READY_TO_FLUSH:99,PENDING_DELTA:100,NO_PENDING_DELTA:101,INIT_SYNC:102,RESNAPSHOT:103,CATCH_UP:104,PERIODIC_SYNC:105,CATCH_UP_FROM_REVISION:106,RESNAPSHOT_CONTINUE:107,RESNAPSHOT_END:108,PERIODIC_SYNC_CONTINUE:109,PERIODIC_SYNC_END:110,CONTACT_SYNC_OPTIMISTIC:111,CONTACT_SYNC_FROM_OMNISTORE:112,CONTACT_SYNC_TAM_OPTIMISTC:113,CONTACT_SYNC_TAM_FROM_OMNISTORE:114,CONTACT_SYNC_TAM_ERROR:115,VERIFY_USER_FOR_SYNC:116,SNAPSHOT_START:117,SNAPSHOT_CONTINUE:118,SNAPSHOT_END:119,FETCH_DELTA:120,DELTA_SUMMARY:130,RECEIVE_DELIVERY_RECEIPT:200,TASK_DESERIALIZATION_ERROR:201,OPTIMISIC_MESSAGE_FAILED:202,SEND_SERVER_AUTHORITATIVE:203,THREAD_RANGE_QUERY_COMPLETE:204,THREAD_RANGE_QUERY_FAILURE:205,THREAD_POINT_QUERY_COMPLETE:206,SEND_SERVER_PARTIAL:207,MARK_AS_OPTIMISTIC_SENT:208,XMS_TRANSPORT_MESSAGE_SEND_START:300,XMS_TRANSPORT_MESSAGE_SEND_FAIL:301,SKIP_TASK_DISPATCH:900,ADVANCED_CRYPTO_MEM_ENCRYPT_TASK_START:1200,ADVANCED_CRYPTO_MEM_ENCRYPT_TASK_COMPLETE:1201,ADVANCED_CRYPTO_MEM_WA_PUBLISH:1202,ADVANCED_CRYPTO_MEM_PUBLISH_ACK:1203,ADVANCED_CRYPTO_MEM_SEND_TASK_COMPLETE:1204,ADVANCED_CRYPTO_MEM_WA_CONNECTION_DISCONNECTED:1205,ADVANCED_CRYPTO_MEM_WA_CONNECTION_CONNECTING:1206,ADVANCED_CRYPTO_MEM_WA_CONNECTION_CONNECTED:1207,ADVANCED_CRYPTO_MEM_FAILURE:1208,ADVANCED_CRYPTO_MEM_SEND_SUCCESS_WITH_RETRY:1209,ADVANCED_CRYPTO_MEM_DELIVERY_RECEIPT_RECEIVED:1210,ADVANCED_CRYPTO_REGISTRATION_CAT_DISK_FETCH_START:1211,ADVANCED_CRYPTO_REGISTRATION_CAT_DISK_FETCH_END:1212,ADVANCED_CRYPTO_REGISTRATION_CAT_NETWORK_FETCH_START:1213,ADVANCED_CRYPTO_REGISTRATION_CAT_NETWORK_FETCH_RETRYSTART:1214,ADVANCED_CRYPTO_REGISTRATION_CAT_NETWORK_FETCH_END:1215,ADVANCED_CRYPTO_REGISTRATION_WA_REQUEST_SEND_START:1216,ADVANCED_CRYPTO_REGISTRATION_WA_REQUEST_SEND_END:1217,ADVANCED_CRYPTO_REGISTRATION_WCR_REGISTER:1218,ADVANCED_CRYPTO_REGISTRATION_SAVE_WA_DEVICE_ID_ERROR:1219,ADVANCED_CRYPTO_MEM_DEVICE_FETCH_START:1220,ADVANCED_CRYPTO_MEM_DEVICE_FETCH_END:1221,ADVANCED_CRYPTO_MEM_ENCRYPTION_BEGIN:1222,ADVANCED_CRYPTO_MEM_ENCRYPTION_END:1223,ADVANCED_CRYPTO_MEM_ENCRYPTION_DEVICE_COUNT:1224,ADVANCED_CRYPTO_DUAL_SEND:1225,ADVANCED_CRYPTO_REGISTRATION_SERVER_SUCCESS:1226,ADVANCED_CRYPTO_REGISTRATION_RETRY_REGISTER:1227,ADVANCED_CRYPTO_REGISTRATION_CAT_NULL:1228,ADVANCED_CRYPTO_REGISTRATION_WCR_MANAGER_NULL:1229,ADVANCED_CRYPTO_REGISTRATION_RESPONSE_NULL:1230,ADVANCED_CRYPTO_REGISTRATION_SELF_NULL:1231,ADVANCED_CRYPTO_REGISTRATION_EMPTY_DEVICE_ID:1232,ADVANCED_CRYPTO_REGISTRATIONRETRY_REGISTER_FAILURE:1233,ADVANCED_CRYPTO_GROUP_DUAL_SEND:1234,RAVEN_IMAGE_MESSAGE:1235,RAVEN_VIDEO_MESSAGE:1236,ADVANCED_CRYPTO_REGISTRATION_RETRY_REGISTER_CAT:1237,ADVANCED_CRYPTO_REGISTRATION_RETRY_REGISTER_NETWORK:1238,ADVANCED_CRYPTO_CAT_DISK_FETCH_CAT_INVALID:1239,ADVANCED_CRYPTO_RECONNECT_GENERIC_ERROR:1240,ADVANCED_CRYPTO_RECONNECT_CAT_INVALID:1241,ADVANCED_CRYPTO_RECONNECT_CAT_EXPIRED:1242,ADVANCED_CRYPTO_CAT_MEMORY_FETCH_NULL:1243,ADVANCED_CRYPTO_FIRST_CONNECTION_START:1244,LABYRINTH_INITIALIZE_BACKUP_SPROC:1400,LABYRINTH_INITIALIZE_BACKUP_SUCCESS_SPROC:1401,LABYRINTH_INITIALIZE_BACKUP_FAILURE:1402,LABYRINTH_CREATE_BACKUP_MAILBOX_SPROC:1403,LABYRINTH_HANDLE_CREATE_BACKUP_MAILBOX_SUCCESS_SPROC:1404,LABYRINTH_OPEN_EPOCH_SPROC:1405,LABYRINTH_HANDLER_OPEN_EPOCH_SUCCESS_SPROC:1406,LABYRINTH_HANDLER_OPEN_EPOCH_FAILURE_SPROC:1407,LABYRINTH_CREATE_VIRTUAL_DEVICE_SPROC:1410,LABYRINTH_HANDLE_CREATE_VIRTUAL_DEVICE_SUCCESS_SPROC:1411,LABYRINTH_HANDLE_CREATE_VIRTUAL_DEVICE_FAILURE_SPROC:1412,LABYRINTH_ADD_DEVICE_SPROC:1413,LABYRINTH_ADD_DEVICE_FROM_VIRTUAL_SPROC:1414,LABYRINTH_HANDOLE_WRONG_RECOVERY_CODE_SPROC:1415,LABYRINTH_HANDLE_ADD_DEVICE_SUCCESS_SPROC:1416,LABYRINTH_HANDLE_ADD_DEVICE_FAILURE_SPROC:1417,LABYRINTH_INITIALIZE_RESTORE_SPROC:1418,LABYRINTH_DECRYPT_THREADS_SPROC:1419,LABYRINTH_REQUEST_MESSAGES_FROM_THREADS_SPROC:1420,LABYRINTH_REQUEST_MESSAGES_FROM_RANGE_QUERY_SPROC:1421,LABYRINTH_DECRYPT_MESSAGES_SPROC:1422,LABYRINTH_DELETE_BACKUP_ON_CLIENT_SPROC:1423,LABYRINTH_DELETE_BACKUPS_SPROC:1424,LABYRINTH_HANDLE_DELETE_MAILBOX_SPROC:1425,LABYRINTH_ISSUE_DELETE_BACKUP_TASK_SPROC:1426,LABYRINTH_BACKUP_UPLOAD_BEGIN:1427,LABYRINTH_BACKUP_UPLOAD_SUCCESS_SPROC:1428,LABYRINTH_CREATE_EXTRA_VIRTUAL_DEVICE_SPROC:1429,LABYRINTH_QR_INIT_ADD_DEVICE_SPROC:1430,LABYRINTH_QR_INIT_ADD_DEVICE_SUCCESS_SPROC:1431,LABYRINTH_QR_INIT_GET_SECRETS_SPROC:1433,LABYRINTH_QR_FINISH_ADD_PEER_DEVICE_SPROC:1434,LABYRINTH_SYNC_EPOCHS_STORED_PROCEDURE_SPROC:1436,LABYRINTH_SYNC_EPOCHS_SUCCESS_SPROC:1437,LABYRINTH_SYNC_EPOCHS_FORWARD_DERIVATION_END:1438,LABYRINTH_SYNC_EPOCHS_BACKWARD_DERIVATION_END:1439,LABYRINTH_SYNC_EPOCHS_OPEN_NEW_EPOCH:1440,LABYRINTH_PREPARE_OPEN_EPOCH_SPROC:1441,LABYRINTH_PREPARE_OPEN_EPOCH_SUCCESS_SPROC:1442,LABYRINTH_MEB_MANAGER_ADD_DEVICE:1443,LABYRINTH_BACKUP_UPLOAD_FAIL:1450,LABYRINTH_DECRYPT_SINGLE_MESSAGE_SPROC:1498,LABYRINTH_DECRYPT_SINGLE_MESSAGE_SUCCESS:1499,LABYRINTH_MEDIA_BACKUP_START:1455,LABYRINTH_MEDIA_BACKUP_SUCCESS:1456,LABYRINTH_MEDIA_BACKUP_FAILURE:1458,LABYRINTH_MEDIA_RESTORE_START:1459,LABYRINTH_MEDIA_RESTORE_SUCCESS:1460,LABYRINTH_MEDIA_RESTORE_FAILURE:1462,LABYRINTH_REMOVE_VIRTUAL_DEVICE_SPROC:1484,LABYRINTH_HANDLE_REMOVE_VIRTUAL_DEVICE_RESULT_SUCCESS:1485,LABYRINTH_HANDLE_REMOVE_VIRTUAL_DEVICE_RESULT_FAILURE:1486,LABYRINTH_REMOVE_VIRTUAL_DEVICE_BACKUP_NOT_FOUND:1493,LABYRINTH_REMOVE_VIRTUAL_DEVICE_WRITE_TASK:1494,LABYRINTH_BACKUP_UPLOAD_ENQUEUE_TASK_EXECUTER:1495,LABYRINTH_BACKUP_UPLOAD_ENQUEUE_SERIALIZER:1496,LABYRINTH_BACKUP_UPLOAD_SERIALIZE:1451,LABYRINTH_BACKUP_UPLOAD_SERIALIZE_SUCCEED:1463,LABYRINTH_BACKUP_UPLOAD_SERIALIZE_FAIL:1464,LABYRINTH_UPDATE_BACKUP_TABLE_SPROC:1467,LABYRINTH_FETCH_BACKUP_IDS_SPROC:1468,LABYRINTH_PROCESS_BACKUP_IDS_SPROC:1487,LABYRINTH_BACKUP_STATUS_NO_INFO:1488,LABYRINTH_BACKUP_STATUS_FETCH_ERROR:1489,LABYRINTH_BACKUP_STATUS_NOT_ONBOARDED:1490,LABYRINTH_BACKUP_STATUS_ONBOARDED:1491,LABYRINTH_BACKUP_STATUS_NO_BACKUPS_PRESENT:1492,LABYRINTH_OPT_OUT_OF_BACKUP_SPROC:1469,LABYRINTH_TRIGGER_THIRD_PARTY_ID_GENERATION_SPROC:1470,LABYRINTH_HANDLE_TRIGGER_THIRD_PARTY_ID_GENERATION_SPROC:1471,LABYRINTH_FETCH_BACKUPS_METADATA_SPROC:1478,LABYRINTH_HANDLE_BACKUPS_METADATA_RESULT_SPROC:1480,LABYRINTH_RESTORE_THREADS_SUCCESS:1481,LABYRINTH_RESTORE_MESSAGES_SUCCESS:1482,LABYRINTH_POINT_QUERY_MESSAGE_RESTORE:2511,LABYRINTH_RESTORE_MESSAGE_NEWER_DIRECTION:2514,LABYRINTH_RESTORE_SURROUNDING_MESSAGES:2515,LABYRINTH_BACKUP_UPLOAD_GET_ECHO_DOC:1497,LABYRINTH_MEBMANAGER_ADD_DEVICE_FETCH_BACKUP_STATE:1800,LABYRINTH_MEBMANAGER_ADD_DEVICE_FETCH_BACKUP_STATE_SUCCESS:1801,LABYRINTH_MEBMANAGER_ADD_DEVICE_FETCH_BACKUP_STATE_FAILURE:1802,LABYRINTH_MEBMANAGER_ADD_DEVICE_ADD_DEVICE_SPROC_CALLED:1803,LABYRINTH_MEBMANAGER_ADD_DEVICE_ADD_DEVICE_SPROC_RETURN_SUCCESS:1804,LABYRINTH_MEBMANAGER_ADD_DEVICE_ADD_DEVICE_SPROC_RETURN_FAILURE:1805,LABYRINTH_MEBMANAGER_ADD_DEVICE_NOTOFICATION_TRIGGERED:1806,LABYRINTH_MEBMANAGER_ADD_DEVICE_FETCH_ADD_DEVICE_STATE:1807,LABYRINTH_MEBMANAGER_ADD_DEVICE_FETCH_ADD_DEVICE_STATEFAILURE:1808,LABYRINTH_MEBMANAGER_ADD_DEVICE_INIT_RESTORE_SPROC_CALLED:1809,LABYRINTH_MEBMANAGER_ADD_DEVICE_INIT_RESTORE_SPROC_RETURN_SUCCESS:1810,LABYRINTH_MEBMANAGER_ADD_DEVICE_INIT_RESTORE_SPROC_RETURN_FAILURE:1811,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_SPROC_CALLED:1812,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_SPROC_RETURN_SUCCESS:1813,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_SPROC_RETURN_FAILURE:1814,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_NOTIFICATION_TRIGGERRED:1815,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_FETCH_RECOVERY_CODE_STATUS:1816,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_FETCH_RECOVERY_CODE_STATUS_FAILURE:1817,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_CREATE_EXTRA_VIRTUAL_DEVICE_SUCCESS:1818,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_CREATE_EXTRA_VIRTUAL_DEVICE_FAILURE:1819,LABYRINTH_MEBMANAGER_WRONG_RECOVERY_CODE:1823,LABYRINTH_ENCRYPT_MESSAGE_FAIL:1828,LABYRINTH_ENCRYPT_MESSAGE_GENERATED_PAYLOAD:1824,LABYRINTH_ENCODE_DOCUMENT:1820,LABYRINTH_ENCODE_DOCUMENT_FAIL:1821,LABYRINTH_ENCODE_DOCUMENT_SUCCESS:1822,LABYRINTH_MEDIA_ISSUE_ATTACHMENT_BACKUP_TASK_SPROC:1825,LABYRINTH_MEDIA_UPDATE_ATTACHMENT_BACKUP_ENT_SPROC:1826,LABYRINTH_MEDIA_HANDLE_ATTACHMENT_BACKUP_FAILURE_SPROC:1827,LABYRINTH_MEDIA_ISSUE_ATTACHMENT_RESTORE_TASK:1829,LABYRINTH_MEDIA_UPDATE_ATTACHMENT_CDN_URL:1830,LABYRINTH_MEDIA_HANDLE_ATTACHMENT_RESTORE_FAILURE:1831,LABYRINTH_MEDIA_ISSUE_BATCH_ATTACHMENT_BACKUP_TASK_SPROC:1873,LABYRINTH_UPLOAD_CANCEL:1850,LABYRINTH_DELETE_BACKUP_ON_CLIENT_STARTING_CANCEL:1851,LABYRINTH_DELETE_BACKUP_ON_CLIENT_DID_CANCEL:1852,LABYRINTH_DELETE_BACKUP_ON_CLIENT_FAILED_CANCEL:1853,LABYRINTH_BACKUP_RETRY_DELETE_MESSAGE_BACKUP_STATUS_ENTRY:1865,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_BEGIN:1881,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_GOT_MESSAGE_IDS_FROM_ACT:1882,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_BEGIN_OCMF_OPE_OPERATIONS:1883,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_END_OCMF_OPE_OPERATIONS:1884,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_FETCH_MESSAGE_RANGE_ERROR:1885,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_ISSUE_COMPARATOR_TASK:1886,LABYRINTH_CLEAR_BACKUP_TABLE_ON_CLIENT:1891,LABYRINTH_CLEAR_VIRTUAL_DEVICES_TABLE_ON_CLIENT:1892,LABYRINTH_CLEAR_BACKUP_METADATA_TABLE_ON_CLIENT:1893,SAP_VESTA_FETCH_VESTA_KEY_AND_SECRET_BEGIN:2400,LABYRINTH_PLUGIN_CALLING_GENERATE_RECOVERY_CODE:2401,SAP_FESTA_FETCH_KEY_AND_SECRET_COMPLETION:2402,SAP_VESTA_CALLING_VESTA_REGISTRATION:2403,SAP_VESTA_REGISTRATION_COMPLETION:2404,LABYRINTH_PLUGIN_CALLING_CREATE_EXTRA_VIRTUAL_DEVICE:2405,SAP_VESTA_NOTIFY_SECRET_STORED_COMPLETION:2406,SAP_VESTA_NOTIFY_CLIENT_ABOUT_VESTA_REGISTRATION:2407,SAP_VESTA_CALLING_VESTA_LOGIN:2411,SAP_VESTA_LOGIN_COMPLETION:2412,LABYRINTH_PLUGIN_CALLING_ADD_DEVICE:2413,LABYRINTH_PLUGIN_CALLING_INITIALIZE_BACKUP:2416,LABYRINTH_PIN_SETUP_BEGIN:2417,LABYRINTH_PIN_SETUP_SUCCESS:2418,LABYRINTH_PIN_SETUP_FAILURE:2419,LABYRINTH_PIN_RESTORE_BEGIN:2420,LABYRINTH_PIN_RESTORE_SUCCESS:2421,LABYRINTH_PIN_RESTORE_FAILURE:2422,LABYRINTH_PLUGIN_CALLING_INITIALIZE_RESTORE:2423,LABYRINTH_FETCH_THREAD_IDS_SPROC:2500,LABYRINTH_FETCH_THREAD_IDS_NATIVE_OP_SUCCESS:2501,LABYRINTH_FETCH_THREAD_IDS_NATIVE_OP_FAILURE:2502,LABYRINTH_REQUEST_MESSAGES_FROM_FETCH_THREAD_IDS_SPROC:2503,LABYRINTH_REQUEST_MESSAGES_FROM_INIT_RESTORE_SPROC:2506,LABYRINTH_POINT_QUERY_RESTORE_TASK_SPROC_START:2512,LABYRINTH_POINT_QUERY_RESTORE_TASK_SPROC_END:2513,LABYRINTH_VERSIONING_UPSERT_DEVICE_ENCRYPTION_VERSIONS_TO_CLIENT_SPROC_START:2800,LABYRINTH_VERSIONING_UPSERT_DEVICE_ENCRYPTION_VERSIONS_TO_CLIENT_SPROC_END:2801,LABYRINTH_VERSIONING_DELETE_AND_SYNC_DEVICE_ENCRYPTION_VERSION_DATA_SPROC:2802,LABYRINTH_VERSIONING_UPSERT_DEVICE_DELETE_DEVICE_ENCRYPTION_VERSION_DATA:2803,LABYRINTH_VERSIONING_SYNC_ENCRYPTION_VERSION_DATA_SPROC:2804,LABYRINTH_VERSIONING_VERSION_SUPPORTED:2805,LABYRINTH_VERSIONING_SYNC_UPDATE_VERSION_DATA:2806,LABYRINTH_VERSIONING_SYNC_NO_VERSION_DATA:2807,LABYRINTH_VERSIONING_VERSION_SELECTED:2808,LABYRINTH_VERSIONING_DELETE_AND_SYNC_DEVICE_DELETE_DEVICE_ENCRYPTION_VERSION_DATA:2809,LABYRINTH_VERSIONING_VERSION_NOT_SUPPORTED:2810,LABYRINTH_VERSIONING_UPSERT_DEVICE_INVALID_SIGNATURE:2811,LABYRINTH_PREPARE_OPEN_EPOCH_SPROC_ISSUE_REQUEST_ASSOC_DEVICES:2821,LABYRINTH_PREPARE_OPEN_EPOCH_FAILURE_NO_BACKUP:2822,LABYRINTH_PREPARE_OPEN_EPOCH_FAILURE_FLOW_ALREADY_IN_PROGRES:2823,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC:2824,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_NUM_EDGES:2825,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_PROCESS_EDGE_FROM:2826,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_PROCESS_EDGE_TO:2827,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FORWARD_EDGE_SOURCE:2828,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FORWARD_SOURCE_EPOCH_LOADED:2829,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_DERIVE_CHAINING_KEY_PSK:2830,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_DECRYPT_FORWARD_EDGE_ENTROPY:2831,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FORWARD_EDGE_DECRYPTION_SUCCESS:2832,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FORWARD_EDGE_DECRYPTION_FAIL:2833,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FORWARD_FAIL_TO_LOAD_SOURCE_EPOCH:2834,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_BACKWARD_EDGE_SOURCE:2835,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_BACKWARD_SOURCE_EPOCH_LOADED:2836,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_DECRYPT_BACKWARD_EDGE:2837,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_BACKWARD_EDGE_DECRYPTION_SUCCESS:2838,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_BACKWARD_EDGE_DERIVATION_FAIL:2839,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_BACKWARD_FAIL_TO_LOAD_SOURCE_EPOCH:2840,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FAILURE:2841,LABYRINTH_GET_OPEN_EPOCH_KEYS_SPROC:2842,LABYRINTH_GET_OPEN_EPOCH_KEYS_NO_EPOCHS_ON_CLIENT:2843,LABYRINTH_GET_OPEN_EPOCH_KEYS_GET_ALL_EPOCH_ANON_IDS:2844,LABYRINTH_GET_OPEN_EPOCH_KEYS_NUM_ANON_IDS:2845,LABYRINTH_GET_OPEN_EPOCHS_KEYS_EPOCH_ANON_ID_LIST_EMPTY:2846,LABYRINTH_GET_OPEN_EPOCH_KEYS_GET_KEYS_FOR_ANON_ID:2847,LABYRINTH_GET_OPEN_EPOCH_KEYS_ANON_ID_NOT_FOUND:2848,LABYRINTH_SYNC_EPOCHS_SPROC_DOWNLOAD_EPOCHS_V2_WRITE_TASK:2849,LABYRINTH_OPEN_EPOCH_SPROC_OPEN_INITIAL_EPOCH:2850,LABYRINTH_OPEN_EPOCH_SPROC_OPEN_EPOCH_WITH_LAST_EPOCH_METADATA:2851,LABYRINTH_OPEN_EPOCH_SPROC_OPEN_AFTER_FIRST_EPOCH:2852,LABYRINTH_OPEN_EPOCH_SPROC_FAILURE_LAST_EPOCH_NOT_FOUND:2853,LABYRINTH_OPEN_EPOCH_SPROC_ERROR:2854,LABYRINTH_PREPARE_OPEN_EPOCH_SPROC_CLOSE_LAST_EPOCH:2855,LABYRINTH_PREPARE_OPEN_EPOCH_SPROC_DERIVE_AND_STORE_EPOCH:2856,LABYRINTH_HANDLER_OPEN_EPOCH_SUCCESS_SPROC_DERIVE_AND_STORE:2857,LABYRINTH_HANDLER_OPEN_EPOCH_SUCCESS_SPROC_UPDATE_AUTHORITY:2858,LABYRINTH_HANDLER_OPEN_EPOCH_SUCCESS_SPROC_UPDATE_EPOCH_ID:2859,LABYRINTH_INCLUDE_FALLBACK_KEY_DURING_ENCRYPTION:2860,LABYRINTH_DERIVE_FALLBACK_KEY:2861,LABYRINTH_FAILED_TO_INCLUDE_FALLBACK_KEY:2862,LABYRINTH_GET_OPEN_EPOCH_KEYS_ANON_ID_VALUE:2863,LABYRINTH_GET_OPEN_EPOCH_KEYS_ANON_ID_NULL_VALUE:2864,LABYRINTH_MESSAGE_RESTORE_EPOCH_ANON_ID_NULL:2865,LABYRINTH_WEB_EPOCH_ROTATION_ENABLED:2866,LABYRINTH_WEB_EPOCH_ROTATION_DISABLED:2867,LABYRINTH_MOBILE_EPOCH_ROTATION_ENABLED:2868,LABYRINTH_MOBILE_EPOCH_ROTATION_DISABLED:2869,LABYRINTH_DECRYPT_MESSAGE_SPROC_SINGLE_EPOCH_KEY:2870,LABYRINTH_DECRYPT_MESSAGE_SPROC_EPOCH_NOT_FOUND_ERROR:2871,LABYRINTH_DECRYPT_MESSAGE_SPROC_MULTIPLE_EPOCHS_ERROR:2872,LABYRINTH_WEB_ECHO_MESSAGE_RESTORE_BEGIN:3600,LABYRINTH_WEB_ISSUE_RESTORE_JOB_DONE:3601,LABYRINTH_WEB_INSERT_TO_BAKCUP_MESSAGE_TABLE_DONE:3602,LABYRINTH_WEB_RESTORE_WITH_SERIALIZER_START:3603,LABYRINTH_WEB_ISSUE_RESTORE_JOB_STARTED:3604,LABYRINTH_WEB_INSERT_TO_RESTORE_PAYLOAD_CONTEXT_TABLE_DONE:3605,LABYRINTH_WEB_XMA_RESTORE_STARTED:3606,LABYRINTH_WEB_XMA_RESTORE_ENDED:3607,LABYRINTH_WEB_XMA_RESTORE_MEDIAID_NULL:3608,LABYRINTH_WEB_XMA_RESTORE_DBXMA_NULL:3609,LABYRINTH_WEB_ECHO_MESSAGE_UPLOAD_INVALID_REQUEST:3700,LABYRINTH_WEB_ECHO_MESSAGE_UPLOAD_BEGIN:3701,LABYRINTH_WEB_ECHO_MESSAGE_UPLOAD_FAILURE:3702,LABYRINTH_WEB_UPLOAD_THREAD_NOT_PRESENT:3703,LABYRINTH_WEB_UPLOAD_THREAD_PRESENT:3704,LABYRINTH_WEB_UPLOAD_GET_SENDER_INFO_UNSUCCESSFUL:3705,LABYRINTH_WEB_UPLOAD_GET_SENDER_INFO_SUCCESSFUL:3706,LABYRINTH_WEB_UPLOAD_CONTACT_NAME_NULL:3707,LABYRINTH_WEB_UPLOAD_CONTACT_NAME_NOT_NULL:3708,LABYRINTH_WEB_UPLOAD_GET_RECEIPT_STATUS_LIST_SUCCESSFUL:3709,LABYRINTH_WEB_UPLOAD_GET_SENDER_DISPLAY_NAME_FOR_QUOTED_MSG_NULL:3710,LABYRINTH_WEB_UPLOAD_GET_SENDER_DISPLAY_NAME_FOR_QUOTED_MSG_NOT_NULL:3711,LABYRINTH_WEB_UPLOAD_XMA_DATA_UPLOAD_SUCCESSFUL:3712,LABYRINTH_WEB_UPLOAD_XMA_DATA_UPLOAD_UNSUCCESSFUL:3713,LABYRINTH_WEB_UPLOAD_INVALID_MSG_TYPE_FOR_MEDIA_TYPE:3714,LABYRINTH_WEB_UPLOAD_IS_MEDIA_MSG_TRUE:3715,LABYRINTH_WEB_UPLOAD_IS_MEDIA_MSG_FALSE:3716,LABYRINTH_WEB_UPLOAD_UNSUPPORTED_MEDIA_TYPE:3717,LABYRINTH_WEB_UPLOAD_NO_MEDIA_ID_FOUND_IN_MEDIA_MSG:3718,LABYRINTH_WEB_UPLOAD_NO_MEDIA_ENTRY_FOR_MEDIA_ID:3719,LABYRINTH_WEB_UPLOAD_GET_REACTION_DATA_SUCCESSFUL:3720,LABYRINTH_WEB_UPLOAD_GET_QUOTE_MSG_SUCCESSFUL:3721,LABYRINTH_WEB_UPLOAD_GET_QUOTE_SENDER_NAME_SUCCESSFUL:3722,LABYRINTH_WEB_UPLOAD_FB_ID_NULL_FOR_XMA_MSG:3723,LABYRINTH_WEB_UPLOAD_GET_XMA_DATA_SUCCESSFUL:3724,LABYRINTH_WEB_UPLOAD_NO_XMA_DB_ENTRY_FOR_EXTERNAL_ID:3725,LABYRINTH_WEB_UPLOAD_ECHO_MESSAGE_CREATION_SUCCESSFUL:3726,LABYRINTH_WEB_UPLOAD_MISSING_MEDIA_DATA_FOR_MEDIA_MSG:3727,LABYRINTH_WEB_UPLOAD_INVOKE_MESSAGE_UPLOAD_SPROC:3728,LABYRINTH_WEB_UPLOAD_ISSUE_MESSAGE_UPLOAD_UI_EVENT:3729,LABYRINTH_WEB_UPLOAD_USER_DEVICE_NOT_ENROLLED:3730,LABYRINTH_WEB_GET_BACKUP_TENANCY:3731,LABYRINTH_WEB_UPLOAD_ERROR_OCCURRED_ON_ISSUE_MESSAGE_UPLOAD_UI_EVENT:3739,LABYRINTH_WEB_UPLOAD_XMA_NOT_FOUND_IN_IDB:3740,LABYRINTH_WEB_UPLOAD_MEDIA_NOT_FOUND_FOR_XMA_IN_IDB:3741,LABYRINTH_WEB_UPLOAD_INVALID_ECHO_MESSAGE_SERIALIZATION_RESPONSE:3742,LABYRINTH_WEB_UPLOAD_DUPLICATE_REQUEST:3743,LABYRINTH_WEB_RETROACTIVE_BACKUPS_START_UPLOAD_MSG:3744,LABYRINTH_WEB_RETROACTIVE_BACKUPS_START_UPLOAD_MEDIA:3745,LABYRINTH_WEB_RETROACTIVE_BACKUPS_UPLOAD_MSG_ERROR:3746,LABYRINTH_WEB_RETROACTIVE_BACKUPS_UPLOAD_MEDIA_ERROR:3747,LABYRINTH_WEB_UPLOAD_XMA_DATA_IS_NULL:3748,LABYRINTH_WEB_UPLOAD_REPLIED_MESSAGE_NOT_IN_DB:3749,LABYRINTH_WEB_UPLOAD_REPLIED_MESSAGE_IN_DB:3750,MQTT_STATE_DISCONNECTED_EVENT:10000001,MQTT_STATE_CONNECTED_EVENT:10000002,APP_STATEBACKGROUND:10000003,APP_STATEFOREGROUND:10000004,MQTT_STATE_CONNECTING_EVENT:10000005,GLOBAL_CONNECTIVITY_BANNER_DISPLAY:10000006,GLOBAL_CONNECTIVITY_BANNER_VANISH:10000007,SWITCH_ACCOUNT_EVENT:10000008,ADVANCED_CRYPTO_MEM_WA_CONNECTION_DISCONNECTED_EVENT:10001205,ADVANCED_CRYPTO_MEM_WA_CONNECTION_CONNECTING_EVENT:10001206,ADVANCED_CRYPTO_MEM_WA_CONNECTION_CONNECTED_EVENT:10001207});f["default"]=a}),66);
__d("updateAndFlushLSDataTrace",["I64","LSAppendDataTraceAddonStoredProcedure","LSDataTraceCheckPoint","LSFactory","LSIntEnum","Promise","ReQLTable","requireDeferred","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=c("requireDeferred")("LSDataTraceFlush").__setRef("updateAndFlushLSDataTrace");function a(a,e){return e==null?(j||(j=b("Promise"))).resolve():c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").CLIENT_READY_TO_FLUSH),dataTraceId:e,syncChannel:(i||(i=d("I64"))).neg_one}).then(function(){return d("ReQLTable").update(a.table("data_trace_meta"),[e],function(a){if(a!=null)return{contextOne:a.contextOne,contextThree:a.contextThree,contextTwo:a.contextTwo,foregroundTimestampMs:a.foregroundTimestampMs,initTimestampMs:a.initTimestampMs,predefinedId:a.predefinedId,shouldFlush:!0,traceId:a.traceId,traceType:a.traceType};else throw c("unrecoverableViolation")("Data trace is missing "+e,"messenger_web_product")}).then(function(){return k.load().then(function(b){return b.flush(a,e)})})})}g["default"]=a}),98);
__d("LSFlushDataTrace.nop",["MetaConfig","Promise","ReQL","updateAndFlushLSDataTrace"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,e,f){return!c("MetaConfig")._("62")?(h||(h=b("Promise"))).resolve():d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("data_trace_meta")).getKeyRange(f)).then(function(d){if(d!=null)return c("updateAndFlushLSDataTrace")(a,f);else return(h||(h=b("Promise"))).resolve()})};g["default"]=a}),98);
__d("MebClientLogsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("3226");b=d("FalcoLoggerInternal").create("meb_client_logs",a);e=b;g["default"]=e}),98);
__d("LSLogMebClientEvent.nop",["I64","LSVec","MebClientLogsFalcoEvent","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=function(a,e,f,g,j,k){c("MebClientLogsFalcoEvent").log(function(){return{calling_class:f,device_family_id:void 0,device_registration_id:void 0,log_level:(i||(i=d("I64"))).to_string(k),msg:g,trace_ids:c("LSVec").toArray(j)}});return(h||(h=b("Promise"))).resolve()};g["default"]=a}),98);
__d("LSDataTraceType",[],(function(a,b,c,d,e,f){a=Object.freeze({TASK:1,SYNC:2,RECEIVE_MSG:3,RICH_MEDIA_SEND:4,RICH_MEDIA_DOWNLOAD:5,TASK_CLIENT_MODE:6,ENCRYPTED_BACKUPS_FETCH_BACKUP_STATUS:69,ENCRYPTED_BACKUPS_INIT:70,ENCRYPTED_BACKUPS_ADD_DEVICE:71,ENCRYPTED_BACKUPS_UPLOAD:72,ENCRYPTED_BACKUPS_RESTORE:73,ENCRYPTED_BACKUPS_DELETE_BACKUP:75,ENCRYPTED_BACKUPS_CREATE_EXTRA_VIRTUAL_DEVICE:76,ENCRYPTED_BACKUPS_QR_ADD_DEVICE:77,ENCRYPTED_BACKUPS_SYNC_EPOCHS:78,ENCRYPTED_BACKUPS_OPEN_EPOCH:79,ENCRYPTED_BACKUPS_OPT_OUT_OF_BACKUP:80,ENCRYPTED_BACKUPS_MEDIA_BACKUP:81,ENCRYPTED_BACKUPS_MEDIA_RESTORE:82,ENCRYPTED_BACKUPS_THIRD_PARTY_ID_GENERATION:83,ENCRYPTED_BACKUPS_FETCH_BACKUPS_METADATA:86,ENCRYPTED_BACKUPS_REMOVE_VIRTUAL_DEVICE:87,ENCRYPTED_BACKUPS_QR_ADD_DEVICE_RECEIVER:88,ENCRYPTED_BACKUPS_DERIVE_AND_STORE_EPOCHS:89,ENCRYPTED_BACKUPS_GET_OPEN_EPOCH_KEYS:90,ENCRYPTED_BACKUPS_END_TO_END_THREAD_RESTORE:190,SAP_VESTA_REGISTRATION:251,SAP_VESTA_LOGIN:252,ENCRYPTED_BACKUPS_SHADOW_FETCH_BACKUP_STATUS:197,ENCRYPTED_BACKUPS_SHADOW_INIT:198,ENCRYPTED_BACKUPS_SHADOW_ADD_DEVICE:199,ENCRYPTED_BACKUPS_SHADOW_UPLOAD:200,ENCRYPTED_BACKUPS_SHADOW_RESTORE:201,ENCRYPTED_BACKUPS_SHADOW_DELETE_BACKUP:203,ENCRYPTED_BACKUPS_SHADOW_CREATE_EXTRA_VIRTUAL_DEVICE:204,ENCRYPTED_BACKUPS_SHADOW_QR_ADD_DEVICE:205,ENCRYPTED_BACKUPS_SHADOW_SYNC_EPOCHS:206,ENCRYPTED_BACKUPS_SHADOW_OPEN_EPOCH:207,ENCRYPTED_BACKUPS_SHADOW_QR_ADD_DEVICE_RECEIVER:216,ENCRYPTED_BACKUPS_ENCRYPTION_VERSIONING_UPSERT_VERSION_DATA:240,ENCRYPTED_BACKUPS_ENCRYPTION_VERSIONING_DELETE_VERSION_DATA:241,ENCRYPTED_BACKUPS_ENCRYPTION_VERSIONING_SYNC_VERSION_DATA:242,ENCRYPTED_BACKUPS_MESSAGE_INTEGRITY_CHECKER:243});f["default"]=a}),66);
__d("LSRequestId",["uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h="0123456789abcdef",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function a(){var a=c("uuidv4")().replace(/[^0-9a-f]/gi,""),b=0,d=["#"];while(b<33){var e=h.indexOf(a.charAt(b))<<8,f=h.indexOf(a.charAt(b+1))<<4,g=h.indexOf(a.charAt(b+2));g=g|(f|e);f=g>>6;d.push(i.charAt(f));d.push(i.charAt(g&63));b+=3}return d.join("")}b={generate:a};g["default"]=b}),98);
__d("LSGenerateTraceId",["LSRequestId","MetaConfig"],(function(a,b,c,d,e,f,g){"use strict";function a(){if(c("MetaConfig")._("62"))return c("LSRequestId").generate();else return void 0}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("LSGetVirtualDeviceIdsByType",["LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(b){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsGetVirtualDeviceIdsByTypeStoredProcedure] Beginning execution."),d[1]=c.createArray(),c.fe(c.ftr(c.db.table(184).fetch(),function(b){return c.i64.eq(b.virtualDeviceType,a[0])}),function(a){a=a.item;return d[9]=(d[1].push(a.virtualDeviceId),d[1])})},function(a){return d[2]=c.i64.of_float(Date.now()),d[4]="Finishing execution. Execution time: ",d[5]=c.i64.to_string(c.i64.sub(d[2],d[0])),d[7]=" ms",d[3]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsGetVirtualDeviceIdsByTypeStoredProcedure] ",d[3],d[4],d[3],d[5],d[3],d[7]].join("")),d[6]=",",d[8]=c.createArray(),f!==f?d[9]=(d[8].push(f),d[8]):0,c.nop(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsGetVirtualDeviceIdsByTypeStoredProcedure",[d[4],d[6],d[5],d[6],d[7]].join(""),d[8],c.i64.cast([0,4]))},function(a){return e[0]=d[1]}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSGetVirtualDeviceIdsByTypeStoredProcedure",["LSGetVirtualDeviceIdsByType"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.virtualDeviceType;return c("LSGetVirtualDeviceIdsByType").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("useMWChatEncryptedBackupsGDriveData_query.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useMWChatEncryptedBackupsGDriveData_query",selections:[{alias:null,args:null,concreteType:"MessengerSDKSbxConfig",kind:"LinkedField",name:"messender_sdk_sbx_config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"fbsbx_url",storageKey:null}],storageKey:null}],type:"Query",abstractKey:null};e.exports=a}),null);
__d("MWEncryptedBackupsThreadListOnboardingNuxWrapperQuery.graphql",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";a={fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWEncryptedBackupsThreadListOnboardingNuxWrapperQuery",selections:[{args:null,kind:"FragmentSpread",name:"useMWChatEncryptedBackupsGDriveData_query"},{kind:"RequiredField",field:{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"MWEncryptedBackupsThreadListOnboardingNuxWrapper_viewer"}],storageKey:null},action:"THROW",path:"viewer"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MWEncryptedBackupsThreadListOnboardingNuxWrapperQuery",selections:[{alias:null,args:null,concreteType:"MessengerSDKSbxConfig",kind:"LinkedField",name:"messender_sdk_sbx_config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"fbsbx_url",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:"1rqfsi"}],concreteType:null,kind:"LinkedField",name:"encrypted_backups_upsell_renderer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"MWEncryptedBackupsThreadListOnboardingNuxWrapper_viewer",fragmentName:"EncryptedBackupsPreTlcUpsellRenderer_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"XFBEncryptedBackupsPreTlcUpsellRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"MWEncryptedBackupsThreadListOnboardingNuxWrapper_viewer",fragmentName:"EncryptedBackupsTlcUpsellRenderer_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"XFBEncryptedBackupsTlcUpsellRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"MWEncryptedBackupsThreadListOnboardingNuxWrapper_viewer",fragmentName:"EncryptedBackupsPostTlcUpsellRenderer_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"XFBEncryptedBackupsPostTlcUpsellRenderer",abstractKey:null}],storageKey:'encrypted_backups_upsell_renderer(supported:"1rqfsi")'}],storageKey:null}]},params:{id:"5636138393156803",metadata:{},name:"MWEncryptedBackupsThreadListOnboardingNuxWrapperQuery",operationKind:"query",text:null}};b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("MWEncryptedBackupsThreadListOnboardingNuxWrapper_viewer.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWEncryptedBackupsThreadListOnboardingNuxWrapper_viewer",selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:"1rqfsi"}],concreteType:null,kind:"LinkedField",name:"encrypted_backups_upsell_renderer",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,documentName:"MWEncryptedBackupsThreadListOnboardingNuxWrapper_viewer",fragmentName:"EncryptedBackupsPreTlcUpsellRenderer_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"XFBEncryptedBackupsPreTlcUpsellRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"MWEncryptedBackupsThreadListOnboardingNuxWrapper_viewer",fragmentName:"EncryptedBackupsTlcUpsellRenderer_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"XFBEncryptedBackupsTlcUpsellRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"MWEncryptedBackupsThreadListOnboardingNuxWrapper_viewer",fragmentName:"EncryptedBackupsPostTlcUpsellRenderer_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"XFBEncryptedBackupsPostTlcUpsellRenderer",abstractKey:null}],storageKey:'encrypted_backups_upsell_renderer(supported:"1rqfsi")'}],type:"Viewer",abstractKey:null};e.exports=a}),null);
__d("MWEncryptedBackupsThreadListRestoreQPWrapper_query.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"isFetchBackupIdsV2Enabled"}],kind:"Fragment",metadata:null,name:"MWEncryptedBackupsThreadListRestoreQPWrapper_query",selections:[{condition:"isFetchBackupIdsV2Enabled",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"xfb_backup",plural:!1,selections:[{condition:"isFetchBackupIdsV2Enabled",kind:"Condition",passingValue:!0,selections:[{args:null,kind:"FragmentSpread",name:"useMWEncryptedBackupsGetVirtualDevicesPreloaded_xfbEncryptedBackup"},{alias:null,args:[{kind:"Literal",name:"family_device_id",value:""}],kind:"ScalarField",name:"has_otc_eligible_devices",storageKey:'has_otc_eligible_devices(family_device_id:"")'}]}],storageKey:null}]}],type:"Query",abstractKey:null};e.exports=a}),null);
__d("MWEncryptedBackupsCheckInvalidOnboardingStatusQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6210947192348641"}),null);
__d("MWEncryptedBackupsCheckInvalidOnboardingStatusQuery.graphql",["MWEncryptedBackupsCheckInvalidOnboardingStatusQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerDefaultEncryptedBackup",kind:"LinkedField",name:"messenger_default_encrypted_backup",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWEncryptedBackupsCheckInvalidOnboardingStatusQuery",selections:a,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MWEncryptedBackupsCheckInvalidOnboardingStatusQuery",selections:a},params:{id:b("MWEncryptedBackupsCheckInvalidOnboardingStatusQuery_facebookRelayOperation"),metadata:{},name:"MWEncryptedBackupsCheckInvalidOnboardingStatusQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWChatEncryptedBackupsGDriveDataContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=(h||d("react")).createContext;b=a({fbsbxDomain:null});g["default"]=b}),98);
__d("useHasOTCEligibleDevices",["MAWOneTimeCodeGating","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=(h||(h=c("useReStore")))(),b=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(a.table("encrypted_backups"))},[a],f.id+":19");return b==null||!d("MAWOneTimeCodeGating").isOneTimeCodeEnabled()?!1:b.hasOtcEligibleDevices}g["default"]=a}),98);
__d("MWChatEncryptedBackupsVirtualDevicesContextProvider.react",["MAWOneTimeCodeGating","MWChatEncryptedBackupsVirtualDevicesContext.react","cr:8196","gkx","react","useHasOTCEligibleDevices"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useMemo,k=(e=c("gkx")("8092"))!=null?e:!1;function a(a){var e=a.children,f=a.hasOtcEligibleDevicesInitialValue,g=a.isGDriveDeviceEnabledInitialValue;g=g===void 0?!1:g;var h=a.offlineDevicesCountInitialValue;h=h===void 0?-1:h;a=a.vestaClientIDInitialValue;h=b("cr:8196")({isGDriveDeviceEnabledInitialValue:g,offlineDevicesCountInitialValue:h,vestaClientIDInitialValue:(g=a)!=null?g:void 0});var l=h.isGDriveDeviceEnabled,m=h.offlineDevicesCount,n=h.vestaClientID;a=c("useHasOTCEligibleDevices")();var o=d("MAWOneTimeCodeGating").isOneTimeCodeEnabled()&&(k===!0||f===!0||a);g=j(function(){return{virtualDeviceInfo:{doesUserHaveOtcEligibleDevices:o,isGDriveDeviceEnabled:l,isPINCodeRegistered:n!=null,offlineDevicesCount:m,vestaClientID:n}}},[o,l,m,n]);return i.jsx(c("MWChatEncryptedBackupsVirtualDevicesContext.react").Provider,{value:g,children:e})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWChatEncryptedBackupsGDriveData",["CometRelay","ConstUriUtils","useMWChatEncryptedBackupsGDriveData_query.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var c;a=a.query;a=d("CometRelay").useFragment(h!==void 0?h:h=b("useMWChatEncryptedBackupsGDriveData_query.graphql"),a);var e,f;(a==null?void 0:(c=a.messender_sdk_sbx_config)==null?void 0:c.fbsbx_url)!=null&&(f=d("ConstUriUtils").getUri(a.messender_sdk_sbx_config.fbsbx_url));f!=null&&(e=f.getDomain());return{fbsbxDomain:e}}g["default"]=a}),98);
__d("MWEncryptedBackupsVerifyDeviceNux.react",["fbt","ix","CometContextualMessage.react","CometImageFromIXValue.react","EncryptedBackupsSupportedPlatformUtils","MAWEncryptedBackupsRestoreDialog.entrypoint","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsQPLSource.enum","MWChatEncryptedBackupsVirtualDevicesContext.react","MWEncryptedBackupsRetrieveQplLoggingAnnotations","MWJewelPopoverDialogContext.react","MWXButtonGroup.react","QPLUserFlow","react","useLabyrinthLogging","useMWXEntryPointDialog","useReStore","useVisibilityObserver"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l=k||(k=d("react")),m=k.useContext;function a(a){var b=a.children,e=a.currentSupportedPlatform,f=a.setClosed,g=a.setDismissed;a=c("useMWXEntryPointDialog")(c("MAWEncryptedBackupsRestoreDialog.entrypoint"),{});var k=a[0],n=(j||(j=c("useReStore")))(),o=e!==d("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.FACEBOOK_DOT_COM,p=o?c("MWChatEncryptedBackupsQPLSource.enum").INBOX_THREADLIST_UPSELL:c("MWChatEncryptedBackupsQPLSource.enum").FB_DOT_COM_THREAD_LIST_UPSELL;a=d("useLabyrinthLogging").useLabyrinthLoggingFlow();var q=a.startFlowFromSource;e=m(c("MWJewelPopoverDialogContext.react"));var r=e.setIsOpenForDialog;a=c("useVisibilityObserver")({onVisible:function(){d("MWEncryptedBackupsRetrieveQplLoggingAnnotations").encryptedBackupsRetrieveQplLoggingAnnotations({db:n,onFetch:function(a){var b=a.firstUpsellTime;a=a.hasUserRestoredBefore;q(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,p,{eb_session_identifier:b,has_user_restored_before:a,restore_upsell_first_impression_time:b});a=o?"VERIFY_DEVICE_INBOX_QP_THREAD_LIST_IMPRESSION":"VERIFY_DEVICE_QP_THREAD_LIST_IMPRESSION";c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,a)}})}});var s=function(){var a=o?"USER_CLICKED_INBOX_THREAD_LIST_VERIFY_DEVICE":"USER_CLICKED_FB_THREAD_LIST_VERIFY_DEVICE";c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,a);r(!0);f()};e=function(){var a=o?"USER_CLOSED_INBOX_THREAD_LIST_VERIFY_DEVICE_NUX":"USER_CLOSED_FB_THREAD_LIST_VERIFY_DEVICE_NUX";c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,a);d("MWChatEncryptedBackupsLogging").cancelFlow({cancelEndPoint:"thread_list_nux",event:d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent});t()};var t=function(){g(),f()},u=m(c("MWChatEncryptedBackupsVirtualDevicesContext.react"));u=u.virtualDeviceInfo;var v=u.vestaClientID!=null;u=u.offlineDevicesCount>0;if(!v&&!u)return b;u=h._("__JHASH__QhOFgxp42ZR__JHASH__");return l.jsx("div",{className:"xjf5wm9 xdj266r xq8finb xzueoph x16n37ib",ref:a,children:l.jsx(c("CometContextualMessage.react"),{addOnPrimary:l.jsx(c("MWXButtonGroup.react"),{align:"justify",paddingHorizontal:12,primary:{label:v?h._("__JHASH__7lrVIuZIr_a__JHASH__"):h._("__JHASH__c-xwKDcXpSY__JHASH__"),onPress:function(){s(),k({onDismissUpsell:t,source:p})},testid:"mw-encrypted-backups-in-thread-verify-device-nux-verify-now-button"}}),body:v?h._("__JHASH__VcY2jgkRWO-__JHASH__"):h._("__JHASH__oJuWWcw2MCh__JHASH__"),headline:u,icon:l.jsx(c("CometImageFromIXValue.react"),{alt:u,source:i("1745665")}),level:4,onClose:e})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWEncryptedBackupsThreadListOnboardingNuxWrapper.react",["CometRelay","MWChatEncryptedBackupsGDriveDataContext","MWEncryptedBackupsLocalStorageEntryEnum","MWEncryptedBackupsThreadListOnboardingNuxWrapperQuery.graphql","MWEncryptedBackupsThreadListOnboardingNuxWrapper_viewer.graphql","react","useMWChatEncryptedBackupsGDriveData","useMWEncryptedBackupsLocalStorageEntry"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react")),l=j.useState;function m(a){var e=l(!0),f=e[0],g=e[1];e=c("useMWEncryptedBackupsLocalStorageEntry")(c("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_OPT_OUT);e=e.getIsEntryPresent;a=d("CometRelay").useFragment(h!==void 0?h:h=b("MWEncryptedBackupsThreadListOnboardingNuxWrapper_viewer.graphql"),a);a=a.encrypted_backups_upsell_renderer;if(a==null||e()===!0||!f){f&&g(!1);return null}return k.jsx(d("CometRelay").MatchContainer,{match:a,props:{onClick:function(){return g(!1)}}})}m.displayName=m.name+" [from "+f.id+"]";function a(a){a=a.children;var e=d("CometRelay").useLazyLoadQuery(i!==void 0?i:i=b("MWEncryptedBackupsThreadListOnboardingNuxWrapperQuery.graphql"),{}),f=c("useMWChatEncryptedBackupsGDriveData")({query:e});return k.jsx(c("MWChatEncryptedBackupsGDriveDataContext").Provider,{value:f,children:(f=m(e.viewer))!=null?f:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWEncryptedBackupsThreadListPersistentBanner.react",["fbt","EncryptedBackupsSupportedPlatformUtils","MAWEncryptedBackupsRestoreDialog.entrypoint","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsQPLSource.enum","MWEncryptedBackupsRetrieveQplLoggingAnnotations","MWJewelPopoverDialogContext.react","MWXLink.react","MWXText.react","QPLUserFlow","qex","react","useLabyrinthLogging","useMWXEntryPointDialog","useReStore","useVisibilityObserver"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react")),l=j.useContext;function a(a){var b=a.currentSupportedPlatform,e=a.onDismissUpsell;a=c("useMWXEntryPointDialog")(c("MAWEncryptedBackupsRestoreDialog.entrypoint"),{});var f=a[0],g=b!==d("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.FACEBOOK_DOT_COM;a=l(c("MWJewelPopoverDialogContext.react"));var j=a.setIsOpenForDialog,m=(i||(i=c("useReStore")))();b=d("useLabyrinthLogging").useLabyrinthLoggingFlow();var n=b.startFlowFromSource,o=g?c("MWChatEncryptedBackupsQPLSource.enum").INBOX_THREADLIST_UPSELL:c("MWChatEncryptedBackupsQPLSource.enum").FB_DOT_COM_THREAD_LIST_UPSELL;a=c("useVisibilityObserver")({onVisible:function(){d("MWEncryptedBackupsRetrieveQplLoggingAnnotations").encryptedBackupsRetrieveQplLoggingAnnotations({db:m,onFetch:function(a){var b=a.firstUpsellTime;a=a.hasUserRestoredBefore;n(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,o,{eb_session_identifier:b,has_user_restored_before:a,restore_upsell_first_impression_time:b});c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,g?"RESTORE_THREAD_LIST_PERSISTENT_BANNER_IMPRESSION_INBOX":"RESTORE_THREAD_LIST_PERSISTENT_BANNER_IMPRESSION")}})}});b=(b=c("qex")._("493"))!=null?b:!1;return k.jsx("div",{className:"xlhe6ec x1lq5wgf xgqcy7u x30kzoy x9jhf4c x1d52u69 xktsk01 x1xmf6yo x1e56ztr x6ikm8r x10wlt62 x1swvt13 x1pi30zi xyamay9 x1l90r2v x1qh3cfz",ref:a,children:k.jsx(c("MWXText.react"),{color:"primary",type:"body4",children:b?k.jsxs(k.Fragment,{children:[h._("__JHASH__OuaeMHC1hyC__JHASH__")," ",k.jsx(c("MWXText.react"),{color:"blueLink",type:"bodyLink4",children:k.jsx(c("MWXLink.react"),{onClick:function(){j(!0),c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,g?"RESTORE_THREAD_LIST_PERSISTENT_BANNER_CTA_CLICKED_INBOX":"RESTORE_THREAD_LIST_PERSISTENT_BANNER_CTA_CLICKED"),f({onDismissUpsell:e,source:o})},target:"_blank",testid:void 0,children:h._("__JHASH__6flAN3HetRr__JHASH__")})})]}):h._("__JHASH__wQm-tjVhK3P__JHASH__",[h._implicitParam("=m1",k.jsx(c("MWXText.react"),{color:"blueLink",type:"bodyLink4",children:h._("__JHASH__xaMoLnJjon1__JHASH__",[h._implicitParam("=m1",k.jsx(c("MWXLink.react"),{onClick:function(){j(!0),c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,g?"RESTORE_THREAD_LIST_PERSISTENT_BANNER_CTA_CLICKED_INBOX":"RESTORE_THREAD_LIST_PERSISTENT_BANNER_CTA_CLICKED"),f({onDismissUpsell:e,source:o})},target:"_blank",testid:void 0,children:h._("__JHASH__0kjBquZIZaf__JHASH__")}))])}))])})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWEncryptedBackupsThreadListRestoreQPWrapper.react",["CometRelay","EncryptedBackupsSupportedPlatformUtils","MWChatEncryptedBackupsVirtualDevicesContextProvider.react","MWEncryptedBackupsDeferLocalStorageUpsell","MWEncryptedBackupsLocalStorageEntryEnum","MWEncryptedBackupsThreadListPersistentBanner.react","MWEncryptedBackupsThreadListRestoreQPWrapper_query.graphql","MWEncryptedBackupsVerifyDeviceNux.react","cr:6976","gkx","qex","react","useMWEncryptedBackupsIsUpsellDismissed","useMWEncryptedBackupsLocalStorageEntry","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||d("react"),l=(e=c("qex")._("782"))!=null?e:!1;function a(a){var e=a.children;a=a.queryRef;a=d("CometRelay").useFragment(h!==void 0?h:h=b("MWEncryptedBackupsThreadListRestoreQPWrapper_query.graphql"),a);var f=d("EncryptedBackupsSupportedPlatformUtils").useMWEncryptedBackupsGetCurrentSupportedPlatform(),g=(i||(i=c("useReStore")))(),j=c("useMWEncryptedBackupsIsUpsellDismissed")({upsellType:d("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.QP_JEWEL}),m=j[0],n=j[1];j=c("useMWEncryptedBackupsLocalStorageEntry")(c("MWEncryptedBackupsLocalStorageEntryEnum").INTERSTITIAL_DIALOG_VERIFY_DEVICE_NUX_DISMISSED);j=j.getIsEntryPresent;j=j();var o=c("useMWEncryptedBackupsIsUpsellDismissed")({upsellType:d("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.PERSISTENT_BANNER_JEWEL}),p=o[0],q=o[1];o=(o=c("qex")._("615"))!=null?o:!1;var r=b("cr:6976")({encryptedBackup:a==null?void 0:a.xfb_backup});r=r.getVirtualDevices;r=r();var s=r.isGDriveDeviceEnabled,t=r.offlineDevicesCount;r=r.vestaClientID;p=m?o&&!p?k.jsx(c("MWEncryptedBackupsThreadListPersistentBanner.react"),{currentSupportedPlatform:f,onDismissUpsell:function(){q(!0),d("MWEncryptedBackupsDeferLocalStorageUpsell").updateUpsellEntry({db:g,upsellType:d("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.PERSISTENT_BANNER_JEWEL})}}):e:k.jsx(c("MWChatEncryptedBackupsVirtualDevicesContextProvider.react"),{hasOtcEligibleDevicesInitialValue:(o=l===!0&&(a==null?void 0:(m=a.xfb_backup)==null?void 0:m.has_otc_eligible_devices))!=null?o:void 0,isGDriveDeviceEnabledInitialValue:s,offlineDevicesCountInitialValue:t,vestaClientIDInitialValue:r,children:k.jsx(c("MWEncryptedBackupsVerifyDeviceNux.react"),{children:e,currentSupportedPlatform:f,setClosed:function(){n(!0)},setDismissed:function(){return d("MWEncryptedBackupsDeferLocalStorageUpsell").updateUpsellEntry({db:g,upsellType:d("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.QP_JEWEL})}})});switch(f){case d("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.INSTAGRAM_DIRECT_INBOX:return e;case d("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.MESSENGER_DOT_COM:case d("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.FACEBOOK_INBOX:a=c("gkx")("2318");return a&&j?p:e;case d("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.FACEBOOK_DOT_COM:return p}}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWEncryptedBackupsCheckInvalidOnboardingStatus.react",["CometRelay","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWEncryptedBackupsCheckInvalidOnboardingStatusQuery.graphql","react","useLabyrinthLogging"],(function(a,b,c,d,e,f,g){"use strict";var h,i;c=i||d("react");var j=c.useEffect,k=c.useRef;function a(){var a=k(!1),c=d("CometRelay").useLazyLoadQuery(h!==void 0?h:h=b("MWEncryptedBackupsCheckInvalidOnboardingStatusQuery.graphql"),{},{fetchPolicy:"network-only"}),e=d("useLabyrinthLogging").useLabyrinthLoggingFlow(),f=e.startFlowOrAddMarker;j(function(){var b;if(a.current===!0)return;a.current=!0;f({event:d("MWChatEncryptedBackupsQPLEvents").encryptedBackupsUxPerfQplEvent});if(((b=c.viewer)==null?void 0:b.messenger_default_encrypted_backup)!=null){d("MWChatEncryptedBackupsLogging").endFailure({annotations:{string:{component:"MWEncryptedBackupsCheckInvalidOnboardingStatus"}},errorName:"invalid_onboarding_status_detected",event:d("MWChatEncryptedBackupsQPLEvents").encryptedBackupsUxPerfQplEvent});return}d("MWChatEncryptedBackupsLogging").endSuccess({annotations:{string:{component:"MWEncryptedBackupsCheckInvalidOnboardingStatus"}},event:d("MWChatEncryptedBackupsQPLEvents").encryptedBackupsUxPerfQplEvent})},[(e=c.viewer)==null?void 0:e.messenger_default_encrypted_backup,f]);return null}g["default"]=a}),98);
__d("useMWEncryptedBackupsGetVirtualDevicesPreloadedFallback",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(a){a.encryptedBackup;a=i(function(){return{isGDriveDeviceEnabled:void 0,offlineDevicesCount:void 0,vestaClientID:void 0}},[]);return{getVirtualDevices:a}}g["default"]=a}),98);
__d("useMWEncryptedBackupsListenForChangesToVirtualDevices",["Base64Utils","LSFactory","LSGetVirtualDeviceIdsByTypeStoredProcedure","LSIntEnum","LSVec","Promise","ReQL","ReQLSuspense","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;e=k||d("react");var l=e.useEffect,m=e.useRef,n=e.useState;function a(a){a=a===void 0?{}:a;var e=a.trackInFlightStatus_SET_DURING_INIT_ONLY,g=a.isGDriveDeviceEnabledInitialValue;g=g===void 0?!1:g;var k=a.vestaClientIDInitialValue;a=a.offlineDevicesCountInitialValue;a=a===void 0?-1:a;var o=(j||(j=c("useReStore")))();k=n(k);var p=k[0],q=k[1];k=n(a);a=k[0];var r=k[1];k=n(g);g=k[0];var s=k[1];k=n(!0);var t=k[0],u=k[1],v=m((k=e)!=null?k:!1);e=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(o.table("encrypted_backups_virtual_devices"))},[o],f.id+":61");l(function(){var a=function(){return o.runInTransaction(function(a){return(h||(h=b("Promise"))).all([c("LSGetVirtualDeviceIdsByTypeStoredProcedure")(c("LSFactory")(a),{virtualDeviceType:(i||(i=d("LSIntEnum"))).ofNumber(2)}),c("LSGetVirtualDeviceIdsByTypeStoredProcedure")(c("LSFactory")(a),{virtualDeviceType:i.ofNumber(1)}),c("LSGetVirtualDeviceIdsByTypeStoredProcedure")(c("LSFactory")(a),{virtualDeviceType:i.ofNumber(7)})])},"readwrite").then(function(a){var b=c("LSVec").toArray(a[0][0],f.id+":94"),e=c("LSVec").toArray(a[1][0],f.id+":95");a=c("LSVec").toArray(a[2][0],f.id+":96");r(e.length);s(a.length>0);q(b.length>0?d("Base64Utils").fromArrayBuffer(b[0]):void 0)})};v.current&&u(!0);c("promiseDone")(a()["finally"](function(){return v.current&&u(!1)}))},[o,e]);return{isGDriveDeviceEnabled:g,isInFlight:t,offlineDevicesCount:a,vestaClientID:p}}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("LSFetchBackupIdsStoredProcedure",["LSFetchBackupIds"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.backupTenancy;d[1]=b.traceId;return c("LSFetchBackupIds").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("MAWEncryptedBackupsRestoreDialogWrapperQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6844201472308541"}),null);
__d("MAWEncryptedBackupsRestoreDialogWrapperQuery$Parameters",["MAWEncryptedBackupsRestoreDialogWrapperQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("MAWEncryptedBackupsRestoreDialogWrapperQuery_facebookRelayOperation"),metadata:{},name:"MAWEncryptedBackupsRestoreDialogWrapperQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("MWEncryptedBackupsDeviceRegistrationId",["FBLogger","MessengerWebInitData"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=c("MessengerWebInitData").sessionId;if(a==null){c("FBLogger")("labyrinth_web").mustfix("PAKE: Failed to get registration id from MessengerWebInitData");return""}return a}g.getDeviceRegistrationId=a}),98);
__d("MWEncryptedBackupsDeferLocalStorageUpsell",["$InternalEnum","FBLogger","MWEncryptedBackupsSharedState","ReQL","WebStorage","asyncToGeneratorRuntime","getMWEncryptedBackupsIsLocalStorageSupported","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("$InternalEnum").Mirrored(["SOFTBLOCK_JEWEL_AND_CHAT_TAB","QP_JEWEL","QP_CHAT_TAB","SCROLL_BANNER_CHAT_TAB","PERSISTENT_BANNER_JEWEL"]),j=-1;function k(a){switch(a){case i.SOFTBLOCK_JEWEL_AND_CHAT_TAB:return{countdownInMS:24*60*60*1e3,impressionsCountKey:"mw_encrypted_backups_soft_block_impressions_count_key",lastImpressionTimeKey:"mw_encrypted_backups_soft_block_last_impression_time_key",maxImpressionLimit:5};case i.QP_JEWEL:return{countdownInMS:12*60*60*1e3,impressionsCountKey:"mw_encrypted_backups_qp_jewel_impressions_count_key",lastImpressionTimeKey:"mw_encrypted_backups_qp_jewel_last_impression_time_key",maxImpressionLimit:j};case i.QP_CHAT_TAB:return{countdownInMS:12*60*60*1e3,impressionsCountKey:"mw_encrypted_backups_qp_chat_tab_impressions_count_key",lastImpressionTimeKey:"mw_encrypted_backups_qp_chat_tab_last_impression_time_key",maxImpressionLimit:j};case i.SCROLL_BANNER_CHAT_TAB:return{countdownInMS:72*60*60*1e3,impressionsCountKey:"mw_encrypted_backups_banner_chat_tab_impressions_count_key",lastImpressionTimeKey:"mw_encrypted_backups_banner_chat_tab_last_impression_time_key",maxImpressionLimit:j};case i.PERSISTENT_BANNER_JEWEL:return{countdownInMS:72*60*60*1e3,impressionsCountKey:"mw_encrypted_backups_banner_jewel_impressions_count_key",lastImpressionTimeKey:"mw_encrypted_backups_banner_jewel_last_impression_time_key",maxImpressionLimit:j}}}function a(a){var e=a.db,f=a.upsellType;a=k(f);var g=a.impressionsCountKey;a=a.lastImpressionTimeKey;c("promiseDone")(d("MWEncryptedBackupsSharedState").upsertEBSharedStateEntry({db:e,stateKey:a,stateValue:Date.now().toString()}).then(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(e.table("experiences_shared_state"))));a=(a=d("MWEncryptedBackupsSharedState").getEntryValueFromSharedState({db:e,sharedStateTable:a,stateKey:g}))!=null?a:"0";yield d("MWEncryptedBackupsSharedState").upsertEBSharedStateEntry({db:e,stateKey:g,stateValue:(+a+1).toString()})})),function(){},function(){var a="[Encrypted Backups] Failed to defer EB upsell "+f;c("FBLogger")("labyrinth_web").mustfix(a)})}function e(a){if(d("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var b;a=k(a);a=a.lastImpressionTimeKey;(b=(h||(h=c("WebStorage"))).getLocalStorage())==null?void 0:b.removeItem(a)}}function f(a){var b=a.db,c=a.sharedStateTable;a=a.upsellType;a=k(a);a=a.impressionsCountKey;return(b=d("MWEncryptedBackupsSharedState").getEntryValueFromSharedState({db:b,sharedStateTable:c,stateKey:a}))!=null?b:"0"}g.MWEncryptedBackupsDeferableUpsellType=i;g.INFINITE_IMPRESSIONS_LIMIT=j;g.getLocalStorageKeys=k;g.updateUpsellEntry=a;g.deleteEntry=e;g.getUpsellImpressions=f}),98);
__d("MWEncryptedBackupsRetrieveQplLoggingAnnotations",["FBLogger","MWEncryptedBackupsDeferLocalStorageUpsell","MWEncryptedBackupsFirstRestoreUpsellTime","MWEncryptedBackupsLocalStorageEntryEnum","MWEncryptedBackupsSharedState","ReQL","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.db,e=a.onFetch,f=a.upsellType;c("promiseDone")(d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(b.table("experiences_shared_state"))).then(function(a){var g=d("MWEncryptedBackupsFirstRestoreUpsellTime").getFirstRestoreUpsellTime(),h=d("MWEncryptedBackupsSharedState").getEntryValueFromSharedState({db:b,sharedStateTable:a,stateKey:c("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_RESTORED_SUCCESSFULLY});h=h!=null;a=f&&d("MWEncryptedBackupsDeferLocalStorageUpsell").getUpsellImpressions({db:b,sharedStateTable:a,upsellType:f});e({firstUpsellTime:g,hasUserRestoredBefore:h.toString(),impressionsCount:(g=a)!=null?g:"0"})}),function(){},function(){c("FBLogger")("labyrinth_web").mustfix("[Encrypted Backups] Failed to fetch QPL annotations from Shared State")})}g.encryptedBackupsRetrieveQplLoggingAnnotations=a}),98);
__d("useMWEncryptedBackupsSharedStateFallback",[],(function(a,b,c,d,e,f){"use strict";function a(a){a.stateKey;return{checkIsEntryPresent:null,deleteEntry:null,getEntryValue:null,upsertEntry:null}}f["default"]=a}),66);
__d("MWChatEncryptedBackupsQPLEvents",["qpl"],(function(a,b,c,d,e,f,g){"use strict";b=(a=c("qpl"))._(521476140,"378");d=a._(521472542,"295");e=a._(521482085,"409");f=a._(521482763,"296");c=a._(521484295,"1460");var h=a._(521482969,"1519"),i=a._(521479124,"1939"),j=a._(521474385,"263"),k=a._(521477722,"1954");a=a._(521476098,"504");g.pinCodeChangeQplEvent=b;g.optOutQplEvent=d;g.backupSetupQplEvent=e;g.restoreQplEvent=f;g.restoreDeviceAuthQplEvent=c;g.messageRestoreQplEvent=h;g.restoreWithAutoRestoreConsentQplEvent=i;g.hsmFleetMigrationQplEvent=j;g.encryptedBackupsUxPerfQplEvent=k;g.virtualDeviceRevocationQplEvent=a}),98);
__d("useLabyrinthLogging",["EncryptedBackupsSupportedPlatformUtils","MWEncryptedBackupsDeviceRegistrationId","QPLEvent","QPLUserFlow","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).useCallback;function a(){var a=d("EncryptedBackupsSupportedPlatformUtils").useMWEncryptedBackupsGetCurrentSupportedPlatform(),b=j(function(b,e,f){if(!c("QPLUserFlow").getActiveFlowIDs().includes((i||(i=d("QPLEvent"))).getMarkerId(b))){var g=d("MWEncryptedBackupsDeviceRegistrationId").getDeviceRegistrationId();g={deviceRegistrationId:g,platform:a,source:e};c("QPLUserFlow").start(b,{annotations:{string:babelHelpers["extends"]({},f,g)}})}},[a]),e=j(function(b){var e=b.additionalAnnotations,f=b.addMarkerIfFlowActive;b=b.event;if(!c("QPLUserFlow").getActiveFlowIDs().includes((i||(i=d("QPLEvent"))).getMarkerId(b))){var g={platform:a};c("QPLUserFlow").start(b,{annotations:{string:babelHelpers["extends"]({},e,g)}})}else f!=null&&c("QPLUserFlow").addPoint(b,f)},[a]);return{startFlowFromSource:b,startFlowOrAddMarker:e}}g.useLabyrinthLoggingFlow=a}),98);
__d("MAWEncryptedBackupsRestoreDialog.entrypoint",["JSResourceForInteraction","MAWEncryptedBackupsRestoreDialogWrapperQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{queries:{queryReference:{parameters:c("MAWEncryptedBackupsRestoreDialogWrapperQuery$Parameters"),variables:{}}}}},root:c("JSResourceForInteraction")("MAWEncryptedBackupsRestoreDialogWrapper.react").__setRef("MAWEncryptedBackupsRestoreDialog.entrypoint")};g["default"]=a}),98);
__d("MWEncryptedBackupsInThreadPersistentBanner.react",["fbt","MAWEncryptedBackupsRestoreDialog.entrypoint","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsQPLSource.enum","MWEncryptedBackupsRetrieveQplLoggingAnnotations","MWPColorUtils","MWXLink.react","MWXText.react","QPLUserFlow","cr:8641","react","useLabyrinthLogging","useMWXEntryPointDialog","useReStore","useVisibilityObserver"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||d("react");function a(a){var e,f=a.onDismissUpsell;a=c("useMWXEntryPointDialog")(c("MAWEncryptedBackupsRestoreDialog.entrypoint"),{});var g=a[0];a=d("useLabyrinthLogging").useLabyrinthLoggingFlow();var j=a.startFlowFromSource,l=(i||(i=c("useReStore")))(),m=c("MWChatEncryptedBackupsQPLSource.enum").FB_DOT_COM_IN_THREAD_UPSELL;a=c("useVisibilityObserver")({onVisible:function(){d("MWEncryptedBackupsRetrieveQplLoggingAnnotations").encryptedBackupsRetrieveQplLoggingAnnotations({db:l,onFetch:function(a){var b=a.firstUpsellTime;a=a.hasUserRestoredBefore;j(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,m,{eb_session_identifier:b,has_user_restored_before:a,restore_upsell_first_impression_time:b});c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_IN_THREAD_PERSISTENT_BANNER_IMPRESSION")}})}});e=b("cr:8641")==null?void 0:(e=b("cr:8641")())==null?void 0:e.threadTheme;var n=(e==null?void 0:e.titlebarBackgroundColor)!=null?d("MWPColorUtils").int64ToHex(e.titlebarBackgroundColor):void 0;e=(e==null?void 0:e.composerTintColor)!=null?d("MWPColorUtils").int64ToHex(e.composerTintColor):void 0;return k.jsx("div",{className:"xcrg951 x80vd3b x1q0q8m5 xso031l xt0psk2 x1o1nzlu x10b6aqq x889kno x10l6tqk x1wo2wf3 xh8yej3 x1vjfegm",ref:a,style:n!=null?{backgroundColor:n}:void 0,children:k.jsx(c("MWXText.react"),{align:"center",color:"secondary",numberOfLines:2,type:"meta4",children:k.jsxs(k.Fragment,{children:[h._("__JHASH__4WMqcKoHbeS__JHASH__")," ",k.jsx(c("MWXText.react"),{color:"blueLink",type:"bodyLink4",children:k.jsx(c("MWXLink.react"),{onClick:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_IN_THREAD_PERSISTENT_BANNER_CTA_CLICKED"),g({onDismissUpsell:f,source:m})},target:"_blank",testid:void 0,weight:"semibold",children:k.jsx("div",{style:{color:e,display:"inline"},children:h._("__JHASH__6flAN3HetRr__JHASH__")})})})]})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWEncryptedBackupsInThreadPersistentBannerWrapper.react",["MWEncryptedBackupsDeferLocalStorageUpsell","MWEncryptedBackupsInThreadPersistentBanner.react","ReQL","ReQLSuspense","react","useCometRouterState","useEncryptedBackupsProcessState","useMWEncryptedBackupsIsUpsellDismissed","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function a(){var a=(h||(h=c("useReStore")))(),b=c("useMWEncryptedBackupsIsUpsellDismissed")({upsellType:d("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.SCROLL_BANNER_CHAT_TAB}),e=b[0],g=b[1];b=c("useCometRouterState")();b=b==null?void 0:b.main.route.tabKey;var i=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(a.table("encrypted_backups"))},[a],f.id+":41");i=c("useEncryptedBackupsProcessState")({encryptedBackupData:i,storage:a});var k=i.backupState;i=i.hasUserOptedOut;return b!=="messenger"&&k===4&&!e&&!i?j.jsx(c("MWEncryptedBackupsInThreadPersistentBanner.react"),{onDismissUpsell:function(){g(!0),d("MWEncryptedBackupsDeferLocalStorageUpsell").updateUpsellEntry({db:a,upsellType:d("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.SCROLL_BANNER_CHAT_TAB})}}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWContextEncryptedBackupsMissingMessages.react",["fbt","MAWEncryptedBackupsRestoreDialog.entrypoint","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsQPLSource.enum","MWEncryptedBackupsRetrieveQplLoggingAnnotations","MWXLink.react","MWXRow.react","MWXRowItem.react","MWXText.react","QPLUserFlow","ReQL","ReQLSuspense","gkx","qex","react","useCometRouterState","useEncryptedBackupsProcessState","useLabyrinthLogging","useMWXEntryPointDialog","useReStore","useVisibilityObserver"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||d("react"),l={banner:{backgroundColor:"xlhe6ec",borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingStart:"x1xfsgkm",paddingLeft:null,paddingRight:null,paddingEnd:"xqmdsaz",paddingTop:"xyamay9",paddingBottom:"x1l90r2v",$$css:!0}};function a(){var a=(i||(i=c("useReStore")))(),b=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(a.table("encrypted_backups"))},[a],f.id+":49");b=c("useEncryptedBackupsProcessState")({encryptedBackupData:b,storage:a});var e=b.backupState;b=b.hasUserOptedOut;var g=c("useMWXEntryPointDialog")(c("MAWEncryptedBackupsRestoreDialog.entrypoint"),{}),j=g[0];g=c("useCometRouterState")();var m=d("useLabyrinthLogging").useLabyrinthLoggingFlow(),n=m.startFlowFromSource;m=g==null?void 0:g.main.route.tabKey;var o=c("MWChatEncryptedBackupsQPLSource.enum").FB_DOT_COM_IN_THREAD_UPSELL;g=c("useVisibilityObserver")({onVisible:function(){d("MWEncryptedBackupsRetrieveQplLoggingAnnotations").encryptedBackupsRetrieveQplLoggingAnnotations({db:a,onFetch:function(a){var b=a.firstUpsellTime;a=a.hasUserRestoredBefore;n(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,o,{eb_session_identifier:b,has_user_restored_before:a,restore_upsell_first_impression_time:b});c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_IN_THREAD_MISSING_MESSAGE_GAP_UI_IMPRESSION")}})}});if(m==="messenger"&&!c("gkx")("2318")||e!==4||b)return null;e=(m=c("qex")._("493"))!=null?m:!1;return k.jsx(c("MWXRow.react"),{align:"center",paddingHorizontal:16,paddingVertical:12,ref:g,children:k.jsx(c("MWXRowItem.react"),{xstyle:l.banner,children:k.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"body4",children:e?k.jsxs(k.Fragment,{children:[h._("__JHASH__4WMqcKoHbeS__JHASH__")," ",k.jsx(c("MWXText.react"),{color:"blueLink",type:"bodyLink4",children:k.jsx(c("MWXLink.react"),{onClick:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_IN_THREAD_GAP_UI_CTA_CLICK"),j({source:o})},target:"_blank",testid:void 0,children:h._("__JHASH__6flAN3HetRr__JHASH__")})})]}):h._("__JHASH__bzTzBeD_AZz__JHASH__",[h._implicitParam("=m1",k.jsx(c("MWXText.react"),{color:"blueLink",type:"bodyLink4",children:h._("__JHASH__xaMoLnJjon1__JHASH__",[h._implicitParam("=m1",k.jsx(c("MWXLink.react"),{onClick:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_IN_THREAD_GAP_UI_CTA_CLICK"),j({source:o})},target:"_blank",testid:void 0,children:h._("__JHASH__0kjBquZIZaf__JHASH__")}))])}))])})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWCutoverEncryptedBackupsBanner.react",["CometErrorBoundary.react","I64","LSMessagingThreadTypeUtil","MWEncryptedBackupsThreadNux.react","MWPActor.react","ReQL","ReQLSuspense","cr:6045","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||d("react");function a(a){var e=a.isShown,g=a.thread,j=(h||(h=c("useReStore")))(),l=d("MWPActor.react").useActor();a=d("ReQLSuspense").useArray(function(){return d("ReQL").leftJoin(d("ReQL").fromTableAscending(j.table("participants")).getKeyRange(g.threadKey),d("ReQL").fromTableAscending(j.table("contacts"))).take(8)},[g.threadKey],f.id+":33");a=a.filter(function(a){return!(i||(i=d("I64"))).equal(a[0].contactId,l)});a=(a=a[0])==null?void 0:(a=a[1])==null?void 0:a.firstName;return k.jsxs(k.Fragment,{children:[k.jsx(c("CometErrorBoundary.react"),{fallback:function(){return null},children:k.jsx(c("MWEncryptedBackupsThreadNux.react"),{isOneToOne:d("LSMessagingThreadTypeUtil").isOneToOne(g.threadType),peerName:a})}),e&&b("cr:6045")?k.jsx(c("CometErrorBoundary.react"),{fallback:function(){return null},children:k.jsx(b("cr:6045"),{})}):null]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWCutoverSecureThreadDetail_DEPRECATED.react",["CometErrorBoundary.react","CometHeroHoldTrigger.react","CometPagelet.react","ComponentMountUnmountSubspanLogger.react","I64","LSMessagingThreadTypeUtil","MAWArmadilloLinkContext.react","MAWFetchMoreMessages","MAWMessageList_DEPRECATED.react","MAWSecureAttachmentRenderer.react","MAWSecureThreadDetail_DEPRECATED.react","MWContextBanner.react","MWEncryptedBackupsThreadNux.react","MWInboxThreadMessagesSpinner.react","MWPActor.react","MWPMessageListColumn.react","MWV2MessageScroller.react","ReQL","ReQLSuspense","cr:6045","react","useMAWMarkThreadAsRead","useMWChatLoadMoreItemsIncrementally","useMWCurrentVisibleMessage","useMWV2ConversationScrollerRefs","useReStore","useSecureThreadDetailGetDevices"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react"));e=j;var l=e.useCallback,m=e.useState,n=3;function a(a){var e=a.cutoverOpenThread,g=a.entryPoint,j=a.thread,o=(h||(h=c("useReStore")))(),p=d("MWPActor.react").useActor();a=d("ReQLSuspense").useArray(function(){return d("ReQL").leftJoin(d("ReQL").fromTableAscending(o.table("participants")).getKeyRange(j.threadKey),d("ReQL").fromTableAscending(o.table("contacts"))).take(8)},[j.threadKey],f.id+":77");a=a.filter(function(a){return!(i||(i=d("I64"))).equal(a[0].contactId,p)});a=(a=a[0])==null?void 0:(a=a[1])==null?void 0:a.firstName;var q=c("MAWFetchMoreMessages").useFetchCutoverMessages(j.threadKey,e.threadKey,j.threadType),r=c("useMWV2ConversationScrollerRefs")(),s=c("useMWCurrentVisibleMessage")(j,r.scrollerRef),t=s.messageRange,u=c("useMWCurrentVisibleMessage")(e,r.scrollerRef);u=u.messageRange;u=c("useMWChatLoadMoreItemsIncrementally")(t!=null?t.hasMoreAfter:!1,void 0,void 0,d("MAWSecureThreadDetail_DEPRECATED.react").useMessagesWithMaybeCutover(t,u,j,e,g),q,t!=null?t.hasMoreBefore:!1);e=m(!1);q=e[0];var v=e[1],w=l(function(){var a;return((a=r.scrollPositionRef.current)==null?void 0:a.value)===void 0&&((a=r.scrollPositionRef.current)==null?void 0:a.type)==="Bottom"},[r]);e=u[2];var x=u[0];c("useSecureThreadDetailGetDevices")(j,o);var y=t!=null?t.hasMoreAfter:!1;t=t==null||t.isLoadingBefore;var z=x.length>=n;return k.jsxs(k.Fragment,{children:[k.jsx(d("CometPagelet.react").Placeholder,{fallback:null,name:"MWEncryptedBackupsThreadNux",children:k.jsx(c("CometErrorBoundary.react"),{fallback:function(){return null},children:k.jsx(c("MWEncryptedBackupsThreadNux.react"),{isOneToOne:d("LSMessagingThreadTypeUtil").isOneToOne(j.threadType),peerName:a})})}),k.jsx(c("CometHeroHoldTrigger.react"),{description:"MAWCutoverLoadingMessages",hold:t&&!z}),q&&b("cr:6045")?k.jsx(c("CometErrorBoundary.react"),{fallback:function(){return null},children:k.jsx(b("cr:6045"),{})}):null,k.jsx(c("ComponentMountUnmountSubspanLogger.react"),{description:"MAWCutoverSecureThreadDetail"}),k.jsx(d("MAWArmadilloLinkContext.react").MAWArmadilloLinkProvider,{children:k.jsxs(c("MWV2MessageScroller.react"),{fetchMore:u[1],hasMoreAfter:y,hasMoreBefore:e,lastMessageToCalculateIfThreadIsRead:x.length!==0?x[x.length-1]:void 0,markThreadAsRead:c("useMAWMarkThreadAsRead")(j,g),onScroll:function(){v(!w())},scrollerRefs:r,thread:j,children:[k.jsxs(d("MWPMessageListColumn.react").MWPMessageListColumnShrinkwrap,{children:[k.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnVerticalRhythm,{height:20}),e?k.jsx(c("MWInboxThreadMessagesSpinner.react"),{}):k.jsx(c("MWContextBanner.react"),{threadKey:j.threadKey,threadType:j.threadType}),k.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnVerticalRhythm,{height:10})]}),k.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnGrow,{children:null}),k.jsx(d("CometPagelet.react").Placeholder,{fallback:null,name:"MAWMessageList",children:k.jsx(c("MAWMessageList_DEPRECATED.react"),{messageElementRefs:s.messageElementRefs.current,messages:x,renderAttachment:d("MAWSecureAttachmentRenderer.react").render,scrollerRefs:r,thread:j})}),y?k.jsx(c("MWInboxThreadMessagesSpinner.react"),{}):null]})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("MWXMenu.react",["cr:12346","react"],(function(a,b,c,d,e,f,g){"use strict";var h;h||d("react");g["default"]=b("cr:12346")}),98);
__d("MWXMenuItem.react",["BaseTheme.react","MWXSvgIcon","MWXThreadThemeColor","cr:4265","cr:4318","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useMemo;function a(a,c){var e=a.icon,f=a.iconColor;a=babelHelpers.objectWithoutPropertiesLoose(a,["icon","iconColor"]);var g=f instanceof d("MWXThreadThemeColor").MWXThreadThemeColor?"primary":f;if(b("cr:4318")!=null)return i.jsx(k,{iconColor:f,children:i.jsx(b("cr:4318"),babelHelpers["extends"]({icon:e,iconColor:g},a,{ref:c}))});return b("cr:4265")!=null?i.jsx(k,{iconColor:f,children:i.jsx(b("cr:4265"),babelHelpers["extends"]({icon:e instanceof d("MWXSvgIcon").MWXSvgIcon?e.component:e,iconColor:g},a,{ref:c}))}):null}a.displayName=a.name+" [from "+f.id+"]";function k(a){var b=a.children,e=a.iconColor;a=j(function(){return e instanceof d("MWXThreadThemeColor").MWXThreadThemeColor?{dark:{"primary-icon":e.color},light:{"primary-icon":e.color},type:"VARIABLES"}:void 0},[e]);return a==null?b:i.jsx(c("BaseTheme.react"),{config:a,children:b})}k.displayName=k.name+" [from "+f.id+"]";e=i.forwardRef(a);g["default"]=e}),98);
__d("MessengerMQTTPresence",["FBMqttChannel","ODS"],(function(a,b,c,d,e,f,g){"use strict";var h,i="/orca_presence",j="mqtt_web.presence",k="/send_additional_contacts",l=!1;function a(a){if(l)return;l=!0;c("FBMqttChannel").subscribe(i,function(b){b=JSON.parse(b);b&&b.list&&(b.list_type&&b.list_type==="full"&&a.reset(),a.setMultiFromMQTT(b.list),(h||(h=d("ODS"))).bumpEntityKey(3303,j,"buddylist.event"),h.bumpEntityKey(3303,j,"buddylist.active_buddies",b.list.length))})}function b(){l=!1,c("FBMqttChannel").unsubscribeAll(i)}var m=new Map(),n=1e3*60*3;function e(a){if(m.has(a)){var b=m.get(a);if(b!=null&&b>Date.now())return;m["delete"](a)}m.set(a,Date.now()+n);c("FBMqttChannel").publish(k,JSON.stringify({additional_contacts:[a]}))}g.subscribe=a;g.unsubscribe=b;g.sendAdditionalBuddyRequest=e}),98);
__d("MessengerMQTTPresence.bs",["MessengerMQTTPresence"],(function(a,b,c,d,e,f,g){"use strict";function a(a){d("MessengerMQTTPresence").sendAdditionalBuddyRequest(a)}g.sendAdditionalBuddyRequest=a}),98);
__d("WebUserFlowLoggingDataContextProvider.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;c=b.createContext;var j=b.useMemo,k=b.useRef,l=c({loggingDataRef:{current:{}},setLoggingData:function(){}});function a(a){a=a.children;var b=k({}),c=function(a){b.current=a},d=j(function(){return{loggingDataRef:b,setLoggingData:c}},[]);return i.jsx(l.Provider,{value:d,children:a})}a.displayName=a.name+" [from "+f.id+"]";g.WebUserFlowLoggingDataContext=l;g.WebUserFlowLoggingDataContextProvider=a}),98);
__d("ZenonSDESKeyDetector",[],(function(a,b,c,d,e,f){"use strict";var g=/inline:\s*[0-9a-zA-z+/]{40}(\b|\s|$)/;function a(a){return g.test(JSON.stringify(a))}f["default"]=a}),66);
__d("RtcWebUserActionsDebugFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1744337");b=d("FalcoLoggerInternal").create("rtc_web_user_actions_debug",a);e=b;g["default"]=e}),98);
__d("RtcWebUserActionsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1744338");b=d("FalcoLoggerInternal").create("rtc_web_user_actions",a);e=b;g["default"]=e}),98);
__d("ZenonMachineToQPLEvent",["qpl"],(function(a,b,c,d,e,f,g){"use strict";b={ConnectionStateMachine:(a=c("qpl"))._(64243854,"2452"),ParentSignalingClient:a._(64234815,"1094"),PeerConnectionStateMachine:a._(64239068,"6172"),SignalingStateMachine:a._(64245348,"8823")};g["default"]=b}),98);
__d("ZenonODSLogger",["ODS"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(){}var b=a.prototype;b.logCounter=function(a){(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_multiway",a),h.flush()};b.logE2eeCounter=function(a){(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_e2ee",a),h.flush()};return a}();b=new a();g["default"]=b}),98);
__d("ZenonDebugLogger",["ChannelClientID","CurrentUser","FBLogger","IGDWebUtils","Log","LogHistory","ODS","QuickLogActionType","QuickPerformanceLogger","RpWebStateMachineLoggingBlocklist","UserAgentData","ZenonAuditedCheckpointLogId","ZenonInfraActionsLogger","ZenonMachineToQPLEvent","ZenonODSLogger","formatDate","isEmployeeTestUserZenonLogging"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=null;a=function(){a.getInstance=function(){j||(j=new a());return j};a.getFBLogger=function(a){var b;a===void 0&&(a={});return c("FBLogger")("rpweb").addMetadata("RT_WEB","CALL_ID",""+((b=a.signalingID)!=null?b:"null")).addMetadata("RT_WEB","PEER_ID",""+((b=a.peerID)!=null?b:"null"))};function a(){var a;this.$1=d("LogHistory").getInstance("webrtc");this.$2=d("ChannelClientID").getID();this.$3=JSON.stringify({browser:(a=c("UserAgentData")).browserName,browser_version:a.browserFullVersion,device:a.deviceName,msg_source:"web",os:a.platformName,os_version:a.platformFullVersion,version:2});a=c("CurrentUser").getAppID();a!=null&&d("IGDWebUtils").isInstagramWebSupportedApp(Number(a))?this.$4=parseInt(a,10):this.$4=219994525426954;this.$5=new Set(c("RpWebStateMachineLoggingBlocklist").EVENT_TYPES);this.$6=new Set(c("RpWebStateMachineLoggingBlocklist").STATES)}var b=a.prototype;b.$7=function(a,b,d){b===void 0&&(b=!0);var e=c("formatDate")(new Date(),"[H:i:s:X]",{skipPatternLocalization:!0});this.$1.log("Console",e+" "+a);b&&c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"[ZP] "+a,messageID:d})};b.$8=function(a,b,d){var e=c("formatDate")(new Date(),"[H:i:s:X]",{skipPatternLocalization:!0});this.$1.log("Console",e+" "+a+". StateMachineID:  "+((e=b)!=null?e:""));e={auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__STATE_MACHINE,checkpoint:"[ZP] "+a+".",stateMachineID:b};d!=null&&(e.messageID=d);c("ZenonInfraActionsLogger").logCheckpoint(e)};b.$9=function(a,b,d,e){e===void 0&&(e=0);a=c("ZenonMachineToQPLEvent")==null?void 0:c("ZenonMachineToQPLEvent")[a];if(!a||!(i||(i=c("QuickPerformanceLogger")))||!c("QuickLogActionType"))return;d==="terminated"?(i||(i=c("QuickPerformanceLogger"))).markerEnd(a,2,e):(i||(i=c("QuickPerformanceLogger"))).markerPoint(a,b,{data:{string:{data:d}},instanceKey:e})};b.$10=function(a){return isNaN(+a)?0:+a};b.getLogHistory=function(){return this.$1};b.logStateMachine=function(a,b,d,e,f){if(!c("isEmployeeTestUserZenonLogging")())return;if(this.$5.has(d))return;var g="["+a+"] [Current State: "+b+"] Processing event: "+d;g={auditId:c("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__STATE_MACHINE,checkpoint:""+g,stateMachineID:e};f!=null&&(g.messageID=f);c("ZenonInfraActionsLogger").logCheckpoint(g);this.$9(a,d,b,this.$10(e))};b.logStateMachineTransition=function(a,b,d,e,f,g,h,i){if(this.$6.has(d)||this.$5.has(f))return;if(!c("isEmployeeTestUserZenonLogging")())return;var j="";g!=null&&g.length===1&&g[0].type==="defer"?j="["+a+"] [[DEFERRED] "+f+" did not trigger transition. Current state remains "+d:d!==e?j="["+a+"] [[PROCESSED] "+f+" caused transition from "+(e||"")+" to "+d+".":b?j="["+a+"] [[PROCESSED] "+f+" did not trigger transition. Current state remains "+d:(j="["+a+"] [[DROPPED] "+f+" did not trigger transition. Current state remains "+d,this.$11(a));this.$8(j,h,i)};b.startQPL=function(a,b){b===void 0&&(b=0),(i||(i=c("QuickPerformanceLogger")))&&(i||(i=c("QuickPerformanceLogger"))).markerStart(a,this.$10(b))};b.endQPL=function(a,b){b===void 0&&(b=0),(i||(i=c("QuickPerformanceLogger")))&&c("QuickLogActionType")&&(i||(i=c("QuickPerformanceLogger"))).markerEnd(a,2,this.$10(b))};b.logConsole=function(a){this.$7(a,!1)};b.logMQTTStateChange=function(a){var b="mqtt_client_state_"+a;c("ZenonODSLogger").logCounter(b);c("isEmployeeTestUserZenonLogging")()&&c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"[ZP] onMQTTStateChanged: "+a+", document.visibility: "+document.visibilityState+", document.hasFocus: "+String(document.hasFocus())+", navigator.onLine: "+String(navigator.onLine)})};b.logMQTTConnectStats=function(a,b){c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"[ZP] MQTT Connection time: "+String(a)+"ms, Retry Count: "+String(b)})};b.$11=function(a){(h||(h=d("ODS"))).bumpEntityKey(4083,"zenon_state_machine",a+"_event_dropped"),h.flush()};return a}();g["default"]=a}),98);
__d("ZenonUserActionLogger",["RtcWebUserActionsDebugFalcoEvent","RtcWebUserActionsFalcoEvent","ZenonDebugLogger","ZenonSDESKeyDetector","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=new Map(),i=window.location.hostname.search("facebook")!==-1?"facebook":window.location.hostname.search("messenger")!==-1?"messenger_dot_com":null,j={logCheckpoint:function(a){j.logEvent(babelHelpers["extends"]({},a,{event:"checkpoint"}))},logClick:function(a){j.logEvent(babelHelpers["extends"]({},a,{event:"tap"}))},logError:function(a){j.logEvent(babelHelpers["extends"]({},a,{event:"error"}))},logEvent:function(a){var b;if(c("ZenonSDESKeyDetector")(a))throw c("unrecoverableViolation")("ZenonUserActionLogger event contains SDES crypto key! This log entry must be removed!","rtc_www");b=babelHelpers["extends"]({},a,{page:(b=a.page)!=null?b:i});var d=babelHelpers["extends"]({},b,{client_time:Date.now().toString()});c("RtcWebUserActionsDebugFalcoEvent").log(function(){return d});c("RtcWebUserActionsFalcoEvent").log(function(){return d});c("ZenonDebugLogger").getInstance().getLogHistory().log((a=a.event)!=null?a:"null",JSON.stringify(b))},logImpression:function(a){j.logEvent(babelHelpers["extends"]({},a,{event:"impression"}))},logPreCallClick:function(a){j.logEvent(babelHelpers["extends"]({},a,{event:"tap"}))},logPreCallImpression:function(a){j.logEvent(babelHelpers["extends"]({},a,{event:"impression"}))},startTimer:function(a){var b=Date.now();h=h.set(a,b);j.logCheckpoint({checkpoint:a+"_timerStart"})},stopTimer:function(a){var b=a.checkpointName===void 0?a.timerName:a.checkpointName,c=a.event||{},d=function(a){var b=h.get(a);if(b!=null){h["delete"](a);return parseInt(Date.now()-b,10)}return null};d=d(a.timerName);j.logCheckpoint(babelHelpers["extends"]({},c,{checkpoint:b+"_timerEnd",event_time_elapsed:d==null?void 0:d.toString()}));return parseInt(d,10)}};f.exports=j}),34);
__d("MessageRequestsBulkActionEditFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2614");b=d("FalcoLoggerInternal").create("message_requests_bulk_action_edit",a);e=b;g["default"]=e}),98);
__d("MessageRequestsViewThreadlistFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("263");b=d("FalcoLoggerInternal").create("message_requests_view_threadlist",a);e=b;g["default"]=e}),98);/*FB_PKG_DELIM*/
__d("VideoPlayerDefaultControls_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoPlayerDefaultControls_video",selections:[{args:null,kind:"FragmentSpread",name:"VideoPlayerDefaultControlsImplLive_video"},{args:null,kind:"FragmentSpread",name:"VideoPlayerDefaultControlsImplNotLive_video"}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("CometContentNotAvailable.react",["fbt","CometContentArea.react","NullStateGeneral","TetraNullState.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){return j.jsx("div",{className:"x6s0dn4 x78zum5 xtp0wl1 xl56j7k xh8yej3",children:j.jsx(c("CometContentArea.react"),{verticalAlign:"middle",children:j.jsx(c("TetraNullState.react"),{headline:h._("__JHASH__C7tfZyxTgu9__JHASH__"),icon:c("NullStateGeneral")})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("validateAggregatedStoryTrackingNodeIndex",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a!=null&&typeof a==="number"?a:0}f["default"]=a}),66);
__d("Base64Utils",["base64Binary"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("base64Binary").encode(new TextEncoder().encode(a))}function b(a){return d("base64Binary").encode(new Uint8Array(a))}function c(a){return d("base64Binary").decode(a).buffer}g.encodeUnicode=a;g.fromArrayBuffer=b;g.toArrayBuffer=c}),98);
__d("VideoPlayerDefaultControls.react",["CometPlaceholder.react","CometRelay","CometWarningScreenContext","VideoPlayerDefaultControlsProperties","VideoPlayerDefaultControls_video.graphql","VideoPlayerFullscreenControl.react","VideoPlayerHooks","cr:1875194","deferredLoadComponent","emptyFunction","react","requireDeferred","useVideoPlayerBigPlayButtonOverlay","useVideoPlayerDefaultControlsVisibility"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||d("react"),l=(e=b("cr:1875194"))!=null?e:c("emptyFunction"),m=c("deferredLoadComponent")(c("requireDeferred")("VideoPlayerDefaultControlsImplLive.react").__setRef("VideoPlayerDefaultControls.react")),n=c("deferredLoadComponent")(c("requireDeferred")("VideoPlayerDefaultControlsImplNotLive.react").__setRef("VideoPlayerDefaultControls.react"));function a(a){var e,f=a.forceVisible,g=a.forceVisibleOnMount,i=a.mutedButtonVisibility,o=a.pictureInPictureControl,p=a.renderExpandControl,q=a.shouldRenderBigPlayButton,r=a.shouldRenderCaptionsControl,s=a.shouldRenderCostreamControl,t=a.shouldRenderExpandSidePanelControl,u=a.shouldRenderLivePauseControl,v=a.shouldRenderModeratorControl,w=a.shouldRenderQuietModeControl;a.shouldRenderSkipControl;var x=a.shouldRenderWatchAndScrollControl,y=a.shouldUnmuteForBigPlayButton,z=a.skipControl,A=a.subOrigin,B=a.video;a=a.videoTahoeUrl;B=d("CometRelay").useFragment(h!==void 0?h:h=b("VideoPlayerDefaultControls_video.graphql"),B);e=(e=d("CometWarningScreenContext").useIsContentVisible())!=null?e:!1;var C=l();C=C!=null?C.isSilentAtPlayhead:!1;var D=(j||(j=d("VideoPlayerHooks"))).useMuted(),E=j.useIsLive();g=c("useVideoPlayerDefaultControlsVisibility")({forceVisible:f,forceVisibleOnMount:g});var F=g.isControlsVisible;g=g.onUserInteraction;q=c("useVideoPlayerBigPlayButtonOverlay")({forceVisible:q!=null?q:f===!1?!1:void 0,shouldUnmute:y});f=q.bigPlayButtonElement;y=q.bigPlayButtonIsVisible;q=F&&!y&&e;F=i===d("VideoPlayerDefaultControlsProperties").MutedButtonVisibility.SAME_AS_OTHER_CONTROLS?q:(D||q||C)&&!y;e=p!=null?p({onUserInteraction:g}):k.jsx(c("VideoPlayerFullscreenControl.react"),{onUserInteraction:g});i=E?k.jsx(m,{expandControl:e,isControlsVisible:q,isVolumeControlVisible:F,onUserInteraction:g,pictureInPictureControl:o,shouldRenderCaptionsControl:r,shouldRenderCostreamControl:s,shouldRenderExpandSidePanelControl:t,shouldRenderModeratorControl:v,shouldRenderPauseControl:u,shouldRenderQuietModeControl:w,shouldRenderWatchAndScrollControl:x,subOrigin:A,video:B,videoTahoeUrl:a}):k.jsx(n,{expandControl:e,isControlsVisible:q,isVolumeControlVisible:F,onUserInteraction:g,pictureInPictureControl:o,shouldRenderCaptionsControl:r,shouldRenderExpandSidePanelControl:t,shouldRenderQuietModeControl:w,shouldRenderWatchAndScrollControl:x,skipControl:z,subOrigin:A,video:B,videoTahoeUrl:a});return k.jsxs(k.Fragment,{children:[f,k.jsx(c("CometPlaceholder.react"),{fallback:null,children:i})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("useMWEncryptedBackupsLocalStorageEntry",["WALogger","WebStorage","cr:7225","getMWEncryptedBackupsIsLocalStorageSupported","promiseDone","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Encrypted Backups key "," written to local storage"]);j=function(){return a};return a}var k=(i||d("react")).useCallback;function a(a){var e=a;a=b("cr:7225")({stateKey:e});var f=a.checkIsEntryPresent,g=a.deleteEntry,i=a.getEntryValue,l=a.upsertEntry;a=k(function(){if(i)return i();if(d("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var a;return(a=(h||(h=c("WebStorage"))).getLocalStorageForRead())==null?void 0:a.getItem(e)}return null},[i,e]);var m=k(function(){if(f)return f();if(d("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var a;return((a=(h||(h=c("WebStorage"))).getLocalStorageForRead())==null?void 0:a.getItem(e))!=null}return!0},[f,e]),n=function(){var a="true";if(l){c("promiseDone")(l(a));return}if(d("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var b;d("WALogger").LOG(j(),e);(b=(h||(h=c("WebStorage"))).getLocalStorage())==null?void 0:b.setItem(e,a)}},o=function(){if(g){c("promiseDone")(g());return}if(d("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var a;(a=(h||(h=c("WebStorage"))).getLocalStorage())==null?void 0:a.removeItem(e)}};return{createEntry:n,deleteEntry:o,getEntryValue:a,getIsEntryPresent:m}}g["default"]=a}),98);
__d("MWChatEncryptedBackupsLogging",["QPLUserFlow"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var b=a.cancelEndPoint;a=a.event;c("QPLUserFlow").addPoint(a,"cancel");c("QPLUserFlow").addAnnotations(a,{string:{cancel_end_point:b}});c("QPLUserFlow").endCancel(a)}function a(a){var b=a.event;a=a.onClose;h({cancelEndPoint:"dialog_x_button",event:b});a()}function b(a){var b=a.annotations;a=a.event;c("QPLUserFlow").addPoint(a,"success");c("QPLUserFlow").endSuccess(a,{annotations:b})}function d(a){var b=a.annotations,d=a.errorName;a=a.event;c("QPLUserFlow").addPoint(a,"failure");c("QPLUserFlow").endFailure(a,d,{annotations:b})}g.cancelFlow=h;g.closeDialogCancelFlow=a;g.endSuccess=b;g.endFailure=d}),98);/*FB_PKG_DELIM*/
__d("useMDSIconColors",["gkx","react","useCometIconColors"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useMemo,j=c("gkx")("571")&&c("gkx")("386"),k={"mds-accent":"var(--icon-accent-color)","mds-destructive":"var(--icon-destructive-color)","mds-inactive":"var(--icon-inactive-color)","mds-nux":"var(--icon-nux-color)","mds-selected":"var(--icon-selected-color)",primary:"var(--icon-primary-color)",secondary:"var(--icon-secondary-color)",tertiary:"var(--icon-tertiary-color)",white:"var(--icon-white-color)"},l={"mds-accent":"primaryAccent","mds-destructive":"negative","mds-inactive":"disabled","mds-nux":"tertiary","mds-selected":"primary",primary:"primary",secondary:"secondary",tertiary:"tertiary",white:"white"};function a(){var a=c("useCometIconColors")();return i(function(){var b={},c=Object.entries(a);for(var d=0;d<c.length;d++){var e=c[d],f=e[0];e=e[1];b[f]=e}f=Object.entries(k);for(e=0;e<f.length;e++){c=f[e];d=c[0];c=c[1];b[d]=c}if(!j){d=Object.entries(l);for(c=0;c<d.length;c++){f=d[c];e=f[0];f=f[1];b[e]=a[f]}}return b},[a])}g["default"]=a}),98);
__d("MWXIconStrict.react",["BaseSVGIcon.react","MWXThreadThemeColor","react","useMDSIconColors"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={root:{display:"x1lliihq",$$css:!0}};function a(a){var b=a.alt,e=a.color;e=e===void 0?"primary":e;var f=a.icon;a=a.size;var g=c("useMDSIconColors")();g=e instanceof d("MWXThreadThemeColor").MWXThreadThemeColor?e.color:g[e];return i.jsx(c("BaseSVGIcon.react"),{alt:b,color:g,icon:f.component.component,size:a,xstyle:j.root})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("PauseCircleOutline20.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 20 20",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("g",{fillRule:"evenodd",transform:"translate(-446 -398)",children:i.jsxs("g",{children:[i.jsx("path",{d:"M102 193.5c-5.523 0-10 4.477-10 10s4.477 10 10 10 10-4.477 10-10-4.477-10-10-10m0 1.5c4.687 0 8.5 3.813 8.5 8.5 0 4.687-3.813 8.5-8.5 8.5-4.687 0-8.5-3.813-8.5-8.5 0-4.687 3.813-8.5 8.5-8.5",transform:"translate(354 204.5)"}),i.jsx("path",{d:"M99.658 208h-.816a.842.842 0 0 1-.842-.842v-7.316c0-.465.377-.842.842-.842h.816c.465 0 .842.377.842.842v7.316a.842.842 0 0 1-.842.842m5.5 0h-.816a.842.842 0 0 1-.842-.842v-7.316c0-.465.377-.842.842-.842h.816c.465 0 .842.377.842.842v7.316a.842.842 0 0 1-.842.842",transform:"translate(354 204.5)"})]})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("PlayCircleOutline20.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 20 20",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("g",{fillRule:"evenodd",transform:"translate(-446 -398)",children:i.jsxs("g",{children:[i.jsx("path",{d:"M103.5 193.5c-5.523 0-10 4.477-10 10s4.477 10 10 10 10-4.477 10-10-4.477-10-10-10m0 1.5c4.687 0 8.5 3.813 8.5 8.5 0 4.687-3.813 8.5-8.5 8.5-4.687 0-8.5-3.813-8.5-8.5 0-4.687 3.813-8.5 8.5-8.5",transform:"translate(352.5 204.5)"}),i.jsx("path",{d:"M101 200.053v6.894a.46.46 0 0 0 .71.386l5.33-3.447a.46.46 0 0 0 0-.772l-5.33-3.447a.46.46 0 0 0-.71.386",transform:"translate(352.5 204.5)"})]})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);/*FB_PKG_DELIM*/
__d("useMWEncryptedBackupsIsUpsellDismissed",["MWEncryptedBackupsDeferLocalStorageUpsell","ReQL","ReQLSuspense","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=i||d("react");var j=b.useMemo,k=b.useState;function a(a){var b=a.upsellType,e=(h||(h=c("useReStore")))();a=k(!1);var g=a[0];a=a[1];var i=j(function(){return d("MWEncryptedBackupsDeferLocalStorageUpsell").getLocalStorageKeys(b)},[b]),l=i.countdownInMS,m=i.impressionsCountKey,n=i.lastImpressionTimeKey,o=i.maxImpressionLimit;i=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.table("experiences_shared_state")).getKeyRange(n).map(function(a){a=a.stateValue;return a!=null&&+a+l>Date.now()?!0:!1})},[l,e,n],f.id+":47");var p=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.table("experiences_shared_state")).getKeyRange(m).map(function(a){a=a.stateValue;return o===d("MWEncryptedBackupsDeferLocalStorageUpsell").INFINITE_IMPRESSIONS_LIMIT||+a<o?!1:!0})},[e,m,o],f.id+":62");return[i===!0||p===!0||g,a]}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("MWXIconMenuItemReport",["MWXSvgIcon","SVGIcon","cr:3972","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:3972")),c("gkx")("571")||c("gkx")("386"));g["default"]=a}),98);
__d("MWCMReportGroupToAdminMenuItem.react",["fbt","MWPBumpEntityKey","MWXIconMenuItemReport","MWXMenuItem.react","react","useMWCMGetReportCommunityDialogTriggerHook"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useCallback;function a(a){var b=a.onSelectItem;a=a.thread;var e=h._("__JHASH__CHnyxuUNpic__JHASH__"),f=c("useMWCMGetReportCommunityDialogTriggerHook")(a.threadKey);a=k(function(){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.infobar","privacy_support_section_report_to_admin"),b==null?void 0:b(),f()},[b,f]);return j.jsx(c("MWXMenuItem.react"),{"aria-label":e,icon:c("MWXIconMenuItemReport"),onClick:a,primaryText:e})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("MinusCircleFilled12.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("g",{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsx("path",{d:"M459 1080.25h-6a.752.752 0 0 1-.75-.75c0-.412.337-.75.75-.75h6c.413 0 .75.338.75.75s-.337.75-.75.75m-3-6.75c-3.308 0-6 2.691-6 6s2.692 6 6 6 6-2.691 6-6-2.692-6-6-6"})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("PlusCircleFilled12.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("g",{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsx("path",{d:"M459 1080.25h-2.25v2.25c0 .412-.337.75-.75.75a.752.752 0 0 1-.75-.75v-2.25H453a.752.752 0 0 1-.75-.75c0-.412.337-.75.75-.75h2.25v-2.25c0-.412.337-.75.75-.75s.75.338.75.75v2.25H459c.413 0 .75.338.75.75s-.337.75-.75.75m-3-6.75c-3.308 0-6 2.691-6 6s2.692 6 6 6 6-2.691 6-6-2.692-6-6-6"})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);/*FB_PKG_DELIM*/
__d("MWChatEncryptedBackupsVirtualDevicesContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({virtualDeviceInfo:{doesUserHaveOtcEligibleDevices:!1,isGDriveDeviceEnabled:!1,isPINCodeRegistered:!1,offlineDevicesCount:-1,vestaClientID:null}});g["default"]=b}),98);
__d("MAWOneTimeCodeGating",["gkx","justknobx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("7110")&&c("justknobx")._("1601")}g.isOneTimeCodeEnabled=a}),98);