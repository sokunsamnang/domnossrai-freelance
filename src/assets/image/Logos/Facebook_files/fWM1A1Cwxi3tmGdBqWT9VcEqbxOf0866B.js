;/*FB_PKG_DELIM*/

__d("CometUFICommentEditor_comment.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometUFICommentEditor_comment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"depth",storageKey:null},{args:null,kind:"FragmentSpread",name:"useCometCreateComposerStateFromCommentData_comment"},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"optimistic_action",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"optimistic_error_code",storageKey:null}]}],type:"Comment",abstractKey:null};e.exports=a}),null);
__d("CometUFICommentEditor_feedback.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{kind:"RootArgument",name:"useDefaultActor"}],kind:"Fragment",metadata:null,name:"CometUFICommentEditor_feedback",selections:[{alias:null,args:[{kind:"Variable",name:"use_default_actor",variableName:"useDefaultActor"}],concreteType:null,kind:"LinkedField",name:"viewer_actor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{args:null,kind:"FragmentSpread",name:"CometUFIComposer_actor"}],storageKey:null},{args:null,kind:"FragmentSpread",name:"CometUFIComposer_feedback"},{args:null,kind:"FragmentSpread",name:"useCometUFIEditCommentMutation_feedback"}],type:"Feedback",abstractKey:null};e.exports=a}),null);
__d("useCometCreateComposerStateFromCommentData_comment.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCometCreateComposerStateFromCommentData_comment",selections:[a,{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"body",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},{alias:null,args:null,concreteType:"EntityAtRange",kind:"LinkedField",name:"ranges",plural:!0,selections:[b,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity",plural:!1,selections:[b,{kind:"InlineFragment",selections:[a],type:"Node",abstractKey:"__isNode"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entity_is_weak_reference",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"length",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"offset",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"style_list",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_markdown_enabled",storageKey:null},{args:null,kind:"FragmentSpread",name:"CometFeedStoryUFICommentAttachments_comment"}],type:"Comment",abstractKey:null}}();e.exports=a}),null);
__d("createCometUFICommentEditComposerLexicalPlugin",["fbt","CometLink.react","CometRow.react","CometRowItem.react","CometUFIComposerPreviewArea.react","Lexical","TetraText.react","mlcFocusSubscription","react","useCometLexicalSubscription"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useCallback,l=b.useEffect,m=b.useMemo;function n(a){return a.attachment&&a.attachment.__type==="ExistingAttachment"?a.attachment:null}function o(a){var b=a.allowCancelEdit,e=a.onFinishEdit;a=a.pluginProps;var f=a.composerState,g=a.editor,i=a.execCommand,o=a.setComposerState;a=n(f);f=m(function(){return c("mlcFocusSubscription")(g)},[g]);f=c("useCometLexicalSubscription")(f);var p=k(function(){i({__type:"BeforeFinishEdit"}),e()},[i,e]),q=k(function(){o(function(){return{attachment:null}})},[o]);l(function(){g.focus()},[g]);l(function(){return g.registerCommand(d("Lexical").KEY_ESCAPE_COMMAND,function(a){a=a;a.preventDefault();a.stopPropagation();b&&p();return!0},d("Lexical").COMMAND_PRIORITY_LOW)},[g,e,p,b]);return j.jsxs("div",{className:"xh8yej3",children:[a?j.jsx(c("CometUFIComposerPreviewArea.react"),{label:h._("__JHASH__HSFH2uC6RvQ__JHASH__"),onRemove:q,removeAnnouncement:h._("__JHASH__Pf-W96A21oP__JHASH__"),children:j.jsx("div",{className:"x1rg5ohu xvijh9v xhhsvwb x1ty9z65 xgzva0m xh8yej3",children:a.component})}):null,b&&j.jsx(c("CometRow.react"),{paddingHorizontal:0,paddingVertical:4,children:j.jsx(c("CometRowItem.react"),{children:j.jsx(c("TetraText.react"),{type:"meta4",children:f?h._("__JHASH__AfmVeI4Ncbw__JHASH__",[h._param("cancel",j.jsx(c("CometLink.react"),{color:"highlight",onClick:p,children:h._("__JHASH__MA2e8Vc584v__JHASH__")}))]):j.jsx(c("CometLink.react"),{color:"highlight",onClick:p,children:h._("__JHASH__73E60EqVclY__JHASH__")})})})})]})}o.displayName=o.name+" [from "+f.id+"]";function a(a){var b=a.allowCancelEdit;a=a.onFinishEdit;return{above:null,action:null,below:o,id:"edit",inside:null,props:{allowCancelEdit:b,onFinishEdit:a}}}g["default"]=a}),98);
__d("setFocusOnCometUFIComposerInputState",["FBLogger","Lexical"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.editor;b!=null?b.update(function(){var a=d("Lexical").$getRoot();a.getChildrenSize()!==0&&a.selectEnd()}):c("FBLogger")("UFILexicalComposer").warn("setFocusOnCometUFIComposerInputStateForLexical being used on an editor that does not support Lexical");return a}g["default"]=a}),98);
__d("useCometCreateComposerEditorStateFromCommentData",["CometFeedStoryUFICommentAttachments.react","FBLogger","Lexical","UnicodeUtils","cometLexicalTypeToNode","cometUFILexicalCreateEditor","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react");function k(a,b){return{__type:"ExistingAttachment",component:j.jsx(c("CometFeedStoryUFICommentAttachments.react"),{actorID:b.actorID,comment:a,feedbackSource:b.feedbackSource,storyRenderLocation:b.storyRenderLocation})}}function l(a){c("FBLogger")("UFILexicalComposer").warn("The user tried to edit a comment with an attachment in the %s style but no code exists to convert that back into an attachment on UFI2ComposerState",a);return null}function m(a,b){var c=a.attachments&&a.attachments[0];if(!c||!c.style_list)return null;for(var d=c.style_list,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;switch(g){case"sticker":case"animated_image_autoplay":case"animated_image_share":case"photo":case"video":case"video_autoplay":case"file_upload":case"image_share":case"facts_in_comments":case"community_award_attachment":return k(a,b);case"COMMENT_MESSAGE_INFO":case"event":case"group":case"music_aggregation":case"share":case"video_share":return null}}return l(c.style_list[0])}function a(a,b){var e,f=(e=(e=b.body)==null?void 0:e.text)!=null?e:"",g=(e=b.body)==null?void 0:e.ranges;e=m(b,{actorID:a.actorID,feedbackSource:a.feedbackSource,storyRenderLocation:a.storyRenderLocation});var h=c("cometUFILexicalCreateEditor")();h.update(function(){var a=d("Lexical").$getRoot(),c=b.body;if(c){var e=0;c=a.getFirstChild();var h=d("Lexical").$createParagraphNode();c===null?a.append(h):c.replace(h);if(g){c=n(g);c.forEach(function(a){var b,c,g;b=(b=a.offset)!=null?b:0;if(b>e){var j=b-e;j=(i||(i=d("UnicodeUtils"))).substr(f,e,j);o(h,j)}j=(j=(j=a.entity)==null?void 0:j.__typename)!=null?j:"Actor";c=(c=a.length)!=null?c:0;var k=(i||(i=d("UnicodeUtils"))).substr(f,b,c);a=d("cometLexicalTypeToNode").$cometLexicalTypeToNode({id:(g=(g=a.entity)==null?void 0:g.id)!=null?g:"0",isWeak:(g=a.entity_is_weak_reference)!=null?g:!1,text:k,type:j});a!==null&&(h.append(a),a.select());e=b+c})}if(e!==(i||(i=d("UnicodeUtils"))).strlen(f)){c=(i||(i=d("UnicodeUtils"))).substr(f,e);o(h,c);a.getChildrenSize()!==0&&a.selectEnd()}}});return{attachment:e,commentAssociatedWithReply:null,commentID:b.id,editor:h,feedbackID:a.feedbackId,formattingStyle:b.is_markdown_enabled===!0?"MARKDOWN":"PLAIN_TEXT",inputDecorators:[],inputState:{__type:"lexical-editor-state-based"},isLocked:!1}}function n(a){return Array.from(a).sort(function(a,b){return((a=a.offset)!=null?a:0)-((a=b.offset)!=null?a:0)})}function o(a,b){var c=b.split(/\r?\n/);if(c.length===1){b=d("Lexical").$createTextNode(b);a.append(b)}else{b=c.length;for(var e=0;e<b;e++){var f=c[e];f!==""&&a.append(d("Lexical").$createTextNode(f));e!==b-1&&a.append(d("Lexical").$createLineBreakNode())}}}g["default"]=a}),98);
__d("useCometCreateComposerStateFromCommentData",["CometRelay","unrecoverableViolation","useCometCreateComposerEditorStateFromCommentData","useCometCreateComposerStateFromCommentData_comment.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e){a=d("CometRelay").useFragment(h!==void 0?h:h=b("useCometCreateComposerStateFromCommentData_comment.graphql"),a);if(a==null)throw c("unrecoverableViolation")("Cannot create composer state without comment data on getCometCreateComposerStateFromCommentData","comet_feed");return c("useCometCreateComposerEditorStateFromCommentData")(e,a)}g["default"]=a}),98);
__d("CometUFICommentEditor.react",["fbt","CometRelay","CometUFICommentEditor_comment.graphql","CometUFICommentEditor_feedback.graphql","CometUFIComposer.react","CometUFICreateCommentMutation","CometUFIReparentedCommentIDsContext.react","FBLogger","cr:1564","cr:1583","cr:5764","cr:5765","createCometUFICommentEditComposerLexicalPlugin","qex","react","setFocusOnCometUFIComposerInputState","unrecoverableViolation","useCometConfirmationDialog","useCometCreateComposerStateFromCommentData","useCometUFICreateCommentMutation","useMinifiedProductAttribution","useTriggerAccessibilityAlert"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=k||(k=d("react"));e=k;var m=e.useContext,n=e.useState;e=(e=b("cr:5765"))!=null?e:{useCometUFIEditCommentMutation:function(a){return[function(){return null}]}};var o=e.useCometUFIEditCommentMutation;e=(e=b("cr:1564"))!=null?e:{commitDeleteCommentMutation:function(a,b){return{dispose:function(){}}}};var p=e.commitDeleteCommentMutation;e=(e=b("cr:1583"))!=null?e:{useCometUFIDeleteCommentMutation:function(a){return[function(){return null}]}};var q=e.useCometUFIDeleteCommentMutation,r={depth0:{paddingTop:"xexx8yu",paddingEnd:"x1pi30zi",paddingBottom:"x18d9i69",paddingStart:"x1swvt13",width:"xkxa9zd",$$css:!0},depth1:{paddingTop:"xexx8yu",paddingEnd:"x1pi30zi",paddingBottom:"x18d9i69",paddingStart:"xurb0ha",$$css:!0}};function a(a){var e=d("CometRelay").useFragment(i!==void 0?i:i=b("CometUFICommentEditor_comment.graphql"),a.comment),f=c("useTriggerAccessibilityAlert")(),g=d("CometRelay").useFragment(j!==void 0?j:j=b("CometUFICommentEditor_feedback.graphql"),a.feedback),k=d("CometRelay").useRelayEnvironment(),s=c("useCometConfirmationDialog")(),t=a.depth,u=a.feedbackSource,v=a.feedbackTargetID,w=a.feedLocation,x=a.focusCommentID,y=a.initialLexicalPlugins,z=a.onError,A=a.onFinishEdit,B=a.placeholder,C=a.storyRenderLocation,D=a.useDefaultActor;a=c("useCometCreateComposerStateFromCommentData")(e,{actorID:g==null?void 0:(a=g.viewer_actor)==null?void 0:a.id,feedbackId:v,feedbackSource:u,storyRenderLocation:C});C=m(d("CometUFIReparentedCommentIDsContext.react").CometUFIReparentedCommentIDsContext);var E=C.addReparentedCommentIds,F=c("useMinifiedProductAttribution")();C=n(!1);var G=C[0],H=C[1];C=o({callbacks:{onCompleted:function(){},onError:z},feedbackRef:g});var I=C[0];C=q({addReparentedCommentIds:E,commentId:(C=e==null?void 0:e.id)!=null?C:"",depth:e==null?void 0:e.depth,feedbackId:v,navigationChain:F});var J=C[0];if(e==null)throw c("unrecoverableViolation")("Cannot render editor without comment data","ufi2");if(g==null)throw c("unrecoverableViolation")("Cannot render editor without feedback data","ufi2");C=g.viewer_actor;if(C==null)throw c("unrecoverableViolation")("Cannot render editor without current actor data","ufi2");var K=C.id;if(K==null){c("FBLogger")("ufi2").mustfix("Cannot render editor without current actor id");return null}var L=e.id;if(L==null){c("FBLogger")("ufi2").mustfix("Cannot render editor without comment id");return null}a=c("setFocusOnCometUFIComposerInputState")(a);var M=e.optimistic_action==="ADD"&&e.optimistic_error_code!=null;e=!M;return l.jsx(c("CometUFIComposer.react"),{actor:C,commentAction:"EDIT",commentID:L,depth:t,feedLocation:w,feedback:g,feedbackSource:u,focusCommentID:x,initialComposerState:a,initialLexicalPlugins:[c("createCometUFICommentEditComposerLexicalPlugin")({allowCancelEdit:e,onFinishEdit:A})].concat(y).filter(Boolean),onCommit:function(a){var e=a.actorID,g=a.clientID,i=a.commentData,j=a.entitiesByID,l=a.topLevelFeedbackID;if(G)return;if(!i){a=h._("__JHASH__2h7moY0cBxE__JHASH__");H(!0);s({body:h._("__JHASH__T3vIhCO1k6e__JHASH__"),confirm:a,title:a},function(){A(),p(k,{addReparentedCommentIds:E,commentId:L,feedbackId:v,navigationChain:F,topLevelFeedbackId:l}),J(l),H(!1)},function(){return H(!1)});return}else if(M){c("qex")._("832")===!0?d("useCometUFICreateCommentMutation").getRetryFnExperimental(L)(i):d("CometUFICreateCommentMutation").getRetryFn(L)(i);A();return}A();a=i.attachments;var m=i.message;if(m==null)throw c("unrecoverableViolation")("Tried to commit an edit to a comment but `message` was `null` or `undefined`","ufi2");i=i.formatting_style;i==null&&(c("FBLogger")("ufi2").warn("Tried to commit an edit to a comment but `formatting_style` had not been fetched. The edit was committed with the style `PLAIN_TEXT` as a fallback but this might not have been what the user intended."),i="PLAIN_TEXT");a={attachments:a,attribution_id_v2:F,comment_id:L,formatting_style:i,message:m};I({clientID:g,commentData:a,entitiesByID:j});b("cr:5764")==null?void 0:b("cr:5764").edit(k,{actorID:e,clientID:g,entitiesByID:j,feedLocation:w,input:a,onError:z,triggerAccessibilityAlert:f,useDefaultActor:D})},placeholder:B,useDefaultActor:D,xstyle:[t===0&&r.depth0,t>0&&r.depth1]},"editComposerForUID"+K)}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("reformCometComposerTextWithEntitiesForLexical_textWithEntities.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"InlineDataFragment",name:"reformCometComposerTextWithEntitiesForLexical_textWithEntities"};e.exports=a}),null);
__d("CometInputWithCommands.react",["CometComponentWithKeyCommands.react","CometKeys","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useMemo;function a(a){var b=j(function(){var b=[];a.enter!=null&&b.push({command:{key:c("CometKeys").ENTER},description:a.enter.description,handler:a.enter.handler,triggerFromInputs:!0});a["delete"]!=null&&b.push({command:{key:c("CometKeys").DELETE},description:a["delete"].description,handler:a["delete"].handler,triggerFromInputs:!0});a.up!=null&&b.push({command:{key:c("CometKeys").UP},description:a.up.description,handler:a.up.handler,triggerFromInputs:!0});a.down!=null&&b.push({command:{key:c("CometKeys").DOWN},description:a.down.description,handler:a.down.handler,triggerFromInputs:!0});a.tab!=null&&b.push({command:{key:c("CometKeys").TAB},description:a.tab.description,handler:a.tab.handler,triggerFromInputs:!0});a.esc!=null&&b.push({command:{key:c("CometKeys").ESCAPE},description:a.esc.description,handler:a.esc.handler,triggerFromInputs:!0});return b},[a["delete"],a.down,a.enter,a.esc,a.tab,a.up]);return i.jsx(c("CometComponentWithKeyCommands.react"),{commandConfigs:b,debugName:"InputSubmit",elementType:a.isInline===!0?"span":"div",xstyle:a.xstyle,children:a.children})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("cometLexicalTypeToNode",["CometLexicalGenericEntityNode","Lexical"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.id,c=a.text;a=a.type;switch(a){case"Actor":case"User":case"Page":case"Event":case"Hashtag":case"PageWhatsAppNumber":case"Group":case"GroupRule":case"GroupCustomSlashCommand":return d("CometLexicalGenericEntityNode").$createCometLexicalGenericEntityNode({id:b,text:c,type:a});default:return d("Lexical").$createTextNode(c)}}g.$cometLexicalTypeToNode=a}),98);
__d("reformCometComposerLexicalEditorForLexical",["Lexical","UnicodeUtils","cometComposerLexicalCreateEditor","cometLexicalTypeToNode"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){var e=c("cometComposerLexicalCreateEditor")();e.update(function(){var c=d("Lexical").$getRoot(),e=d("Lexical").$createParagraphNode();c.append(e);i(c,e,a,b)});return e}function i(a,b,c,e){var f=0;e.forEach(function(a){var e;e=(e=a.offset)!=null?e:0;if(e>f){var g=e-f;g=(h||(h=d("UnicodeUtils"))).substr(c,f,g);j(b,g)}g=(g=a.length)!=null?g:0;var i=(h||(h=d("UnicodeUtils"))).substr(c,e,g);i=d("cometLexicalTypeToNode").$cometLexicalTypeToNode({id:a.entity.id,isWeak:a.isWeak,text:i,type:a.entity.type});i!==null&&(b.append(i),i.select());f=e+g});if(f!==(h||(h=d("UnicodeUtils"))).strlen(c)){e=(h||(h=d("UnicodeUtils"))).substr(c,f);j(b,e);a.getChildrenSize()!==0&&a.selectEnd()}}function j(a,b){var c=b.split(/\r?\n/);if(c.length===1){b=d("Lexical").$createTextNode(b);a.append(b);return}b=c.length;for(var e=0;e<b;e++){var f=c[e];f!==""&&a.append(d("Lexical").$createTextNode(f));e!==b-1&&a.append(d("Lexical").$createLineBreakNode())}}g["default"]=a}),98);
__d("reformCometComposerTextWithEntitiesForLexical",["CometRelay","reformCometComposerLexicalEditorForLexical","reformCometComposerTextWithEntitiesForLexical_textWithEntities.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e){a=d("CometRelay").readInlineData(h!==void 0?h:h=b("reformCometComposerTextWithEntitiesForLexical_textWithEntities.graphql"),a);var f=a.ranges;a=a.text;if(a==null)return e;var g=[];f!=null&&(f.forEach(function(a){if(a!=null&&a.offset!=null&&a.length!=null&&a.entity_is_weak_reference!=null&&a.entity!=null&&a.entity.id!=null&&a.entity.__typename!=null){var b=a.entity.__typename;g.push({entity:{id:a.entity.id,type:b},isWeak:a.entity_is_weak_reference,length:a.length,offset:a.offset})}}),g.sort(function(a,b){return a.offset-b.offset}));f=c("reformCometComposerLexicalEditorForLexical")(a,g);return babelHelpers["extends"]({lexicalEditor:f},e)}g["default"]=a}),98);
__d("transformDraftEditorStateToTextWithEntities",["UnicodeUtils","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){b===void 0&&(b=[]);var e=[],f=0,g=[],i=a.getCurrentContent();i.getBlockMap().forEach(function(a){var j="",k=0;a.findEntityRanges(c("emptyFunction").thatReturnsTrue,function(c,g){var l=b.some(function(b){var l=a.getText().slice(0,c);l=Math.max(0,l.length-(h||(h=d("UnicodeUtils"))).strlen(l));b=b(a,i,c,g);if(b!=null){var m=f-l+k;l=b.message;j+=l.text;e.push.apply(e,l.ranges.map(function(a){return{entity:a.entity,length:a.length,offset:a.offset+m}}));k+=l.text.length-(g-c);return!0}return!1});l||(j+=a.getText().slice(c,g).replace(/@\[/g,"@ ["))});f+=(h||(h=d("UnicodeUtils"))).strlen(j)+1;g.push(j)});a=g.join("\n");return{ranges:e,text:a}}g["default"]=a}),98);
__d("cometComposerMentionsBlockToEntity",["UnicodeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c,e){var f=a.getEntityAt(c);if(f==null)return null;b=b.getEntity(f);if(b.getType()!=="MENTION")return null;f=a.getText().slice(c,e);a=b.getData();e=a.id;return e==null?null:{message:{ranges:[{entity:{id:e},length:(h||(h=d("UnicodeUtils"))).strlen(f),offset:c}],text:f}}}g["default"]=a}),98);
__d("MediaEditorViewStateDispatcherContext",["emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext(c("emptyFunction"));g["default"]=b}),98);
__d("MediaEditorViewStateReducerContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({current:new Map()});g["default"]=b}),98);
__d("useMediaEditorReducer",["MediaEditorViewStateReducerContext","useContextRef"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("useContextRef")(a,c("MediaEditorViewStateReducerContext"))}g["default"]=a}),98);
__d("useMediaEditorViewStateDispatcher",["MediaEditorViewStateDispatcherContext","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useContext;function a(){return i(c("MediaEditorViewStateDispatcherContext"))}g["default"]=a}),98);
__d("updateTagReducer",["SharedAIProductTagUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,c){return d("SharedAIProductTagUtils").isPointNearbyPoint(a,b,c.x,c.y)}function a(a,b){var c;switch(b.type){case"REMOVE_TAG":return babelHelpers["extends"]({},a,{tags:((c=a.tags)!=null?c:[]).filter(function(a){return(a==null?void 0:(a=a.taggee)==null?void 0:a.id)!==b.tagToDelete})});case"ADD_TAG":return babelHelpers["extends"]({},a,{tags:[].concat((c=a.tags)!=null?c:[],[b.newTag]),unknownProductTagSuggestions:((c=a.unknownProductTagSuggestions)!=null?c:[]).filter(function(a){return!h(a.x,a.y,b.newTag)})});case"SET_VIDEO_PRODUCT_TAGS":return babelHelpers["extends"]({},a,{videoProductTags:(c=b.videoProductTags)!=null?c:[]});case"ADD_KNOWN_AI_SUGGESTED_PRODUCT_TAG":var d={source:b.newAISuggestedProductTag.source,taggee:b.newAISuggestedProductTag.taggee,x:b.newAISuggestedProductTag.x,y:b.newAISuggestedProductTag.y};return babelHelpers["extends"]({},a,{tags:((c=a.tags)!=null?c:[]).filter(function(a){return a.taggee.id===d.taggee.id}).length>0?(c=a.tags)!=null?c:[]:[].concat((c=a.tags)!=null?c:[],[d])});case"ADD_UNKNOWN_AI_SUGGESTED_PRODUCT_TAG":return babelHelpers["extends"]({},a,{unknownProductTagSuggestions:((c=a.unknownProductTagSuggestions)!=null?c:[]).includes(b.newUnknownSuggestedProductTag)||((c=a.tags)!=null?c:[]).some(function(a){return h(b.newUnknownSuggestedProductTag.x,b.newUnknownSuggestedProductTag.y,a)})?(c=a.unknownProductTagSuggestions)!=null?c:[]:[].concat((c=a.unknownProductTagSuggestions)!=null?c:[],[b.newUnknownSuggestedProductTag])});case"SET_SAVE_PRODUCT_TAGS_DISABLED":return babelHelpers["extends"]({},a,{isSaveProductTagsDisabled:b.shouldDisable});case"RESET":if(b.finalMutatedMediaAttachment.fileType==="PHOTO"){return babelHelpers["extends"]({},a,{tags:((c=b.finalMutatedMediaAttachment.data.tags)!=null?c:[]).filter(Boolean)})}}return a}g["default"]=a}),98);
__d("CometMediaViewerComposerLexicalPlugins.react",["cr:2590","createComposerDeferredPlugin","react","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("createComposerDeferredPlugin")(c("requireDeferred")("CometComposerIsDirtyPluginForLexical.react").__setRef("CometMediaViewerComposerLexicalPlugins.react")),k=c("createComposerDeferredPlugin")(c("requireDeferred")("CometComposerEmojiPluginForLexical.react").__setRef("CometMediaViewerComposerLexicalPlugins.react")),l=c("createComposerDeferredPlugin")(c("requireDeferred")("CometComposerLinksPluginForLexical.react").__setRef("CometMediaViewerComposerLexicalPlugins.react")),m=c("createComposerDeferredPlugin")(c("requireDeferred")("CometComposerMisinformationLinkDetectorPluginForLexical.react").__setRef("CometMediaViewerComposerLexicalPlugins.react")),n=c("createComposerDeferredPlugin")(c("requireDeferred")("CometMediaViewerComposerMentionsPluginForLexical.react").__setRef("CometMediaViewerComposerLexicalPlugins.react"));function a(a){var c=a.alwaysShrinkText;a=a.photoID;return i.jsxs(i.Fragment,{children:[i.jsx(l,{},"linkPlugin"),i.jsx(m,{composerType:"feed"},"misinformationLinkDetectorPlugin"),i.jsx(n,{photoID:a},"mentionsPlugin"),i.jsx(b("cr:2590"),{},"hashtagsPlugin"),i.jsx(k,{alwaysShrinkText:c},"emojiPlugin"),i.jsx(j,{})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometMediaViewerComposerLexicalEditor.react",["fbt","CometComposerEditorForLexical.react","CometMediaViewerComposerLexicalPlugins.react","FeedComposerCometTextStyleContext","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useMemo;function a(a){a=a.photoID;var b=k(function(){return{color:"primary-text",fontSize:15}},[]);return j.jsxs(c("FeedComposerCometTextStyleContext").Provider,{value:b,children:[j.jsx(c("CometComposerEditorForLexical.react"),{autoFocus:!0,placeholder:h._("__JHASH__cr_C5nMlTqA__JHASH__").toString(),surface:"FeedComposerCometStatusArea",textAlignment:void 0}),j.jsx(c("CometMediaViewerComposerLexicalPlugins.react"),{alwaysShrinkText:!1,photoID:a})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometMediaViewerComposerMentionsPluginForLexical.react",["CometMentionsForLexical.react","CometMentionsLayoutStrategy.react","FeedComposerCometMentionsViewItemResolver.react","cometMentionsLexicalCreateNodeStrategy","react","useCometMediaViewerComposerMentionsStrategyResolverConfig","useCometTypeaheadViewListStrategy","withComposerViewStatePart"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useCallback;function a(a){var b=a.editor;a=babelHelpers.objectWithoutPropertiesLoose(a,["editor"]);return b==null?null:i.jsx(k,babelHelpers["extends"]({},a,{editor:b}))}a.displayName=a.name+" [from "+f.id+"]";function k(a){var b=a.editor;a=a.photoID;a=c("useCometMediaViewerComposerMentionsStrategyResolverConfig")(a);var d=j(function(a){switch(a.rawData.type){case"MENTION_TYPE_SELECTION":return{shouldMentionSelectedEntry:!1};case"MENTION_TYPE_RESET":return{shouldMentionSelectedEntry:!1};default:return{shouldMentionSelectedEntry:!0}}},[]),e=c("useCometTypeaheadViewListStrategy")({viewItemStrategyRenderer:c("FeedComposerCometMentionsViewItemResolver.react")});return i.jsx(c("CometMentionsForLexical.react"),{createNodeStrategy:c("cometMentionsLexicalCreateNodeStrategy"),dataSourceResolverConfig:a,editor:b,layoutStrategyRenderer:c("CometMentionsLayoutStrategy.react"),mentionsHandlerForSelectedEntry:d,viewStrategyRenderer:e})}k.displayName=k.name+" [from "+f.id+"]";b=c("withComposerViewStatePart")(a,function(a){return{editor:a.lexicalEditor}});g["default"]=b}),98);
__d("CometMediaRemoveTagFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1743382");b=d("FalcoLoggerInternal").create("comet_media_remove_tag",a);e=b;g["default"]=e}),98);
__d("CometMediaVpvdFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1743384");b=d("FalcoLoggerInternal").create("comet_media_vpvd",a);e=b;g["default"]=e}),98);/*FB_PKG_DELIM*/
__d("LSHandleOTCNotificationSendingResult",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.seq([function(a){return b.fe(b.db.table(285).fetch(),function(a){return a["delete"]()})},function(a){return b.fe(b.ftr(b.db.table(285).fetch([[[b.i64.cast([0,1])]]]),function(a){return b.i64.eq(a.pk,b.i64.cast([0,1]))&&b.i64.lt(a.authorityLevel,b.i64.cast([0,80]))}),function(a){return a["delete"]()})},function(c){return b.db.table(285).add({pk:b.i64.cast([0,1]),notificationSendingStatus:a[0],authorityLevel:b.i64.cast([0,80])})}])},function(a){return b.resolve(c)}])}b=a;f["default"]=b}),66);
__d("useCometUFIDeleteCommentMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="24394021726863053"}),null);
__d("useCometUFIDeleteCommentMutation.graphql",["useCometUFIDeleteCommentMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"groupID"},{defaultValue:null,kind:"LocalArgument",name:"input"},{defaultValue:null,kind:"LocalArgument",name:"inviteShortLinkKey"},{defaultValue:null,kind:"LocalArgument",name:"renderLocation"},{defaultValue:null,kind:"LocalArgument",name:"scale"}],c=[{kind:"Variable",name:"data",variableName:"input"}],d={alias:null,args:null,kind:"ScalarField",name:"deleted_comment_id",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"useCometUFIDeleteCommentMutation",selections:[{alias:null,args:c,concreteType:"CommentDeleteResponsePayload",kind:"LinkedField",name:"comment_delete",plural:!1,selections:[d,{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[e,{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"associated_group",plural:!1,selections:[{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"if_viewer_can_see_pending_content_card",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"GroupsCometPendingActions_group"},{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"if_viewer_can_add_pending_participation_content_in_forum",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"GroupsCometInlineComposerRenderer_group"},{args:null,kind:"FragmentSpread",name:"CometGroupDiscussionRoot_rateLimitReachCard"}],storageKey:null}],storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"useCometUFIDisabledNotice_feedback"}],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"useCometUFIDeleteCommentMutation",selections:[{alias:null,args:c,concreteType:"CommentDeleteResponsePayload",kind:"LinkedField",name:"comment_delete",plural:!1,selections:[d,{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[e,{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"associated_group",plural:!1,selections:[{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"if_viewer_can_see_pending_content_card",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"invite_short_link_key",variableName:"inviteShortLinkKey"},{kind:"Literal",name:"supported",value:"3lS6dC"}],concreteType:null,kind:"LinkedField",name:"group_pending_action_card_renderer",plural:!1,selections:[f,{kind:"InlineFragment",selections:[{args:null,documentName:"GroupsCometPendingActions_group",fragmentName:"CometGroupHeaderPendingActionsArchivedCardRenderer_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"CometGroupHeaderPendingActionsArchivedCardRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"GroupsCometPendingActions_group",fragmentName:"CometGroupHeaderPendingActionsPausedCardRenderer_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"CometGroupHeaderPendingActionsPausedCardRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"GroupsCometPendingActions_group",fragmentName:"CometGroupHeaderPendingActionsFrozenNoticeCardRenderer_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"CometGroupHeaderPendingActionsFrozenNoticeCardRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"GroupsCometPendingActions_group",fragmentName:"CometGroupHeaderPendingActionsAdminInviteCardRenderer_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"CometGroupHeaderPendingActionsAdminInviteCardRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"GroupsCometPendingActions_group",fragmentName:"GroupsCometHeaderPendingActionsRequestCardRenderer_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"CometGroupHeaderPendingActionsRequestCardRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"GroupsCometPendingActions_group",fragmentName:"GroupsCometHeaderPendingActionsInvitationCardRenderer_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"CometGroupHeaderPendingActionsInvitationCardRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"GroupsCometPendingActions_group",fragmentName:"CometGroupHeaderPendingActionsMutedCardRenderer_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"CometGroupHeaderPendingActionsMutedCardRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"GroupsCometPendingActions_group",fragmentName:"GroupsCometHeaderPendingActionsAdminPromotionCardRenderer_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"CometGroupHeaderPendingActionsAdminPromotionCardRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"GroupsCometPendingActions_group",fragmentName:"GroupsCometHeaderPendingActionsAppealCardRenderer_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"GroupsCometHeaderPendingActionsAppealCardRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"GroupsCometPendingActions_group",fragmentName:"GroupsCometHeaderPendingActionsExpertInviteCardRenderer_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"GroupsCometHeaderPendingActionsExpertInviteCardRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"GroupsCometPendingActions_group",fragmentName:"GroupsCometHeaderPendingActionsTaskSetInviteCardRenderer_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"GroupsCometHeaderPendingActionsTaskSetInviteCardRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"GroupsCometPendingActions_group",fragmentName:"GroupsCometHeaderPendingActionsRequestCardTrustedParticipantRenderer_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"CometGroupHeaderPendingActionsTrustedParticipantCardRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"GroupsCometPendingActions_group",fragmentName:"CometGroupHeaderPendingActionsPostRateLimitedCardRenderer_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"CometGroupHeaderPendingActionsPostRateLimitedCardRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"GroupsCometPendingActions_group",fragmentName:"GroupsCometHeaderPendingActionsInviteLinkCardRenderer_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"XFBGroupsCometHeaderPendingActionsInviteLinkCardRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"GroupsCometPendingActions_group",fragmentName:"GroupsCometHeaderPendingActionsRequestCardContentRenderer_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"CometGroupHeaderPendingActionsContentCardRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"GroupsCometPendingActions_group",fragmentName:"GroupsCometHeaderPendingActionsAdminInactivityNoticeCardRenderer_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"CometGroupHeaderPendingActionsAdminInactivityNoticeCardRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"GroupsCometPendingActions_group",fragmentName:"GroupsCometHeaderPendingActionsChatHostInviteCardRenderer_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"XFBCometGroupHeaderPendingActionsChatHostInviteCardRenderer",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"if_viewer_can_add_pending_participation_content_in_forum",plural:!1,selections:[e,{alias:null,args:[{kind:"Literal",name:"feed_type",value:"DISCUSSION"}],concreteType:null,kind:"LinkedField",name:"comet_inline_composer_renderer",plural:!1,selections:[f,{kind:"InlineFragment",selections:[{args:null,documentName:"GroupsCometInlineComposerRenderer_group",fragmentName:"GroupsCometDefaultGroupInlineComposerRenderer_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"CometGroupInlineDefaultComposerRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"GroupsCometInlineComposerRenderer_group",fragmentName:"GroupsCometSaleInlineComposerRenderer_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"CometGroupInlineSalesComposerRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"GroupsCometInlineComposerRenderer_group",fragmentName:"CometGroupQAComposerRenderer_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"CometGroupInlineQAComposerRenderer",abstractKey:null}],storageKey:'comet_inline_composer_renderer(feed_type:"DISCUSSION")'},{alias:null,args:null,concreteType:"CometGroupForumPendingContentLimitReachCardRenderer",kind:"LinkedField",name:"pending_content_limit_reach_card",plural:!1,selections:[{args:null,documentName:"CometGroupDiscussionRoot_rateLimitReachCard",fragmentName:"GroupsCometForumPendingContentLimitReachCard_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],storageKey:null}],storageKey:null},e],storageKey:null},e],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"have_comments_been_disabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"are_live_video_comments_disabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_viewer_muted",storageKey:null},{alias:"total_comment_count",args:null,kind:"ScalarField",name:"comment_count",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"comments_disabled_notice_renderer",plural:!1,selections:[f,{kind:"InlineFragment",selections:[{args:null,documentName:"CometUFICommentDisabledNotice_feedback",fragmentName:"CometGenericCommentDisableNotice_commentDisableNotice",fragmentPropName:"commentDisableNotice",kind:"ModuleImport"}],type:"GeneralCommentDisableNotice",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometUFICommentDisabledNotice_feedback",fragmentName:"CometGroupForumCommentDisableNotice_commentDisableNotice",fragmentPropName:"commentDisableNotice",kind:"ModuleImport"}],type:"GroupForumParticipantDisableNotice",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometUFICommentDisabledNotice_feedback",fragmentName:"CometLiveVideoCommentDisableNotice_commentDisableNotice",fragmentPropName:"commentDisableNotice",kind:"ModuleImport"}],type:"LiveVideoCommentDisableNotice",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("useCometUFIDeleteCommentMutation_facebookRelayOperation"),metadata:{},name:"useCometUFIDeleteCommentMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("useCometUFIDeleteCommentMutation",["CometRelay","CometUFICommentsAPIConnectionCountUpdater","CometUFIDeleteCommentMutation","CometUFIModernCommentListContextProvider","UFI2LocalUserAction","WebPixelRatio","emptyFunction","forEachUFI2DisplayCommentsConnection","once","react","unrecoverableViolation","useCometUFIDeleteCommentMutation.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useCallback,k=h!==void 0?h:h=b("useCometUFIDeleteCommentMutation.graphql");function l(a,b,e){b=b!=null?a.get(b):null;var f=b==null?void 0:b.getLinkedRecord("feedback");if(!f||!b)return 0;b=null;e!=null&&(b=d("CometRelay").ConnectionHandler.getConnection(f,"CometUFIDepth"+(e+1)+"CommentList_feedback_replies"));e=null;c("forEachUFI2DisplayCommentsConnection")(a,f,c("once")(function(a){e=Number(a.getValue("count"))}));a=b!=null?(f=(a=b.getLinkedRecords("edges"))==null?void 0:a.length)!=null?f:0:(b=e)!=null?b:0;return a}function m(a,b,e,f){var g=a.get(b),h=g==null?void 0:g.getLinkedRecord("comment_parent"),i=g==null?void 0:g.getLinkedRecord("feedback");h=h==null?void 0:h.getLinkedRecord("feedback");if(!i||!h||!g)return;var j=new Map();if(f!=null){var k=a.get(f),l=d("CometRelay").ConnectionHandler.getConnection(i,"CometUFIDepth2CommentList_feedback_replies");if(l==null)return;h=l.getLinkedRecords("edges");h==null?void 0:h.forEach(function(b){b=b==null?void 0:b.getLinkedRecord("node");if(!b||j.has(b.getDataID()))return;var c=b.getDataID();b.setValue(!0,"is_subreply_parent_deleted");j.set(c,g.getDataID());var e;if(k!=null){e==null&&(e=n(k,g.getDataID()));b=d("CometRelay").ConnectionHandler.createEdge(a,k,b,"CommentsEdge");d("CometRelay").ConnectionHandler.insertEdgeBefore(k,b,e);d("CometRelay").ConnectionHandler.deleteNode(l,c)}})}else d("CometUFIDeleteCommentMutation").moveSubrepliesToParentForDisplayComments(a,b,c("emptyFunction"));e(j)}function n(a,b){a=a.getLinkedRecords("edges");a=a==null?void 0:a.find(function(a){a=a==null?void 0:a.getLinkedRecord("node");return a&&a.getDataID()===b});a=a==null?void 0:a.getValue("cursor");if(typeof a!=="string")return;return a}function o(a){var b=a.addReparentedCommentIds,e=a.commentId,f=a.connectionID,g=a.depth,h=a.feedbackId,i=a.topLevelFeedbackId;return function(a){var j=a.get(h);if(!j){a["delete"](e);return}m(a,e,b,f);var k=l(a,e,g);if(f!=null){var n=a.get(f);n&&d("CometRelay").ConnectionHandler.deleteNode(n,e)}c("forEachUFI2DisplayCommentsConnection")(a,j,function(a){d("CometRelay").ConnectionHandler.deleteNode(a,e)});a["delete"](e);c("CometUFICommentsAPIConnectionCountUpdater")({feedbackId:h,modifier:-1,store:a,topLevelFeedbackId:i,totalCommentCountModifier:-1-k})}}function p(a){return function(b){var d=b.get(a.commentId);if(d==null)throw c("unrecoverableViolation")("'useCometUFIDeleteCommentMutation: Could not find comment with ID "+a.commentId,"ufi2");d==null?void 0:d.setValue("DELETE","optimistic_action");o(a)(b)}}function a(a){var b=a.addReparentedCommentIds,e=a.commentId,f=a.depth,g=a.feedbackId,h=a.navigationChain,i=a.onCompleted,l=a.onError,m=a.removeLocation;a=d("CometRelay").useMutation(k);var n=a[0];a=d("CometUFIModernCommentListContextProvider").useCometUFIModernCommentListContext();var q=a.connectionID,r=d("CometRelay").useRelayEnvironment();a=function(a){a={addReparentedCommentIds:b,commentId:e,connectionID:q,depth:f,feedbackId:g,topLevelFeedbackId:a};var j=n({onCompleted:function(a){a=(a=a.comment_delete)==null?void 0:a.deleted_comment_id;a!=null&&c("UFI2LocalUserAction").emit("delete",{__target:"comment",commentId:a});i&&i()},onError:function(a){j&&j.dispose(),d("CometRelay").commitLocalUpdate(r,function(b){b=b.get(e);if(b==null)throw c("unrecoverableViolation")("useCometUFIDeleteCommentMutation: Could not find comment with ID "+e,"ufi2");b.setValue("DELETE","optimistic_action");b.setValue(a.toString(),"optimistic_error");l&&l(a)})},optimisticUpdater:p(a),updater:o(a),variables:{input:{attribution_id_v2:h,comment_id:e,remove_location:m},scale:d("WebPixelRatio").get()}});return j};a=j(a,[n,a,r]);return[a]}g.getDeleteCommentUpdater=o;g.getDeleteCommentOptimisticUpdater=p;g.useCometUFIDeleteCommentMutation=a}),98);