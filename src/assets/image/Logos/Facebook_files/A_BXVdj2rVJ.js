;/*FB_PKG_DELIM*/

__d("NotificationConstants",[],(function(a,b,c,d,e,f){a={UNKNOWN:0,USER_ACTION:1,LIVE_SEND:2,ENDPOINT:3,INITIAL_LOAD:4,OTHER_APPLICATION:5,SYNC:6,CLIENT:7};f.PayloadSourceType=a}),66);
__d("NotificationTokens",["CurrentUser"],(function(a,b,c,d,e,f,g){function a(a){return a.map(function(a){return c("CurrentUser").getID()+":"+a})}function b(a){return a.map(function(a){return a.split(":")[1]})}g.tokenizeIDs=a;g.untokenizeIDs=b}),98);
__d("LiveTimer",["csx","cx","fbt","CSS","DOM","ODS","Run","ServerTime","TimeSlice","clearTimeout","gkx","killswitch","setTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i){var j,k=1e3,l=60,m=3600;a=43200;var n=86400,o=60,p=24,q=7,r=365,s=6e4,t=function(a){a.text===""&&(a.text=null);return a},u=[],v=null,w=!0,x={restart:function(a){b("ServerTime").update(a*1e3),this.updateTimeStamps()},registerLiveTimestamp:function(a){if(!b("killswitch")("GHL_LIVE_TIMER_SERVER_REGISTERED_TIMESTAMP")){u.length===0&&(x.delayUpdatingServerRegisteredLiveTimestamps(),x.cleanupServerRegisteredLiveTimestampsOnLeave());var c="";if(b("gkx")("837029")){var d=x.render(a.serverTime,a.time,a.size);c=d!=null?String(d.text):""}u.push(babelHelpers["extends"]({},a,{initialText:c}))}},delayUpdatingServerRegisteredLiveTimestamps:function(){w=!0,b("setTimeout")(function(){w=!1,x.startLoop(0)},30*k)},cleanupServerRegisteredLiveTimestampsOnLeave:function(){v!=null&&(v=b("Run").onLeave(function(){u.length=0,v=null}))},getApproximateServerTime:function(){return b("ServerTime").get()},getServerTimeOffset:function(){return-1*b("ServerTime").getSkew()},updateTimeStamps:function(){this.timestamps=b("DOM").scry(document.body,"abbr.livetimestamp"),this.startLoop(s)},addTimeStamps:function(a){if(!a)return;this.timestamps=this.timestamps||[];if(b("DOM").isNodeOfType(a,"abbr")&&b("CSS").hasClass(a,"livetimestamp"))this.timestamps.push(a);else{a=b("DOM").scry(a,"abbr.livetimestamp");for(var c=0;c<a.length;++c)this.timestamps.push(a[c])}this.startLoop(0)},removeTimestamp:function(a){if(!this.timestamps||!a)return;a=this.timestamps.indexOf(a);a>-1&&this.timestamps.splice(a,1)},startLoop:function(a){this.stop(),this.createTimeout(a)},createTimeout:function(a){var c=this;this.timeout=b("setTimeoutAcrossTransitions")(b("TimeSlice").guard(function(){c.loop()},"LiveTimer.loop",{propagationType:b("TimeSlice").PropagationType.EXECUTION}),a)},stop:function(){b("clearTimeout")(this.timeout)},loop:function(a){var c=this;a&&this.updateTimeStamps();var d=Math.floor(b("ServerTime").get()/k),e=-1;this.timestamps&&this.timestamps.forEach(function(a){var f=a.getAttribute("data-utime"),g=a.getAttribute("data-shorten"),h=a.getAttribute("data-minimize");g=c.renderRelativeTime(d,f,g,h);if(g.text){h=b("DOM").scry(a,".timestampContent")[0];h==null?b("DOM").setContent(a,b("DOM").create("span",{"class":"timestampContent"},g.text)):h.textContent!==g.text.toString()&&(h.textContent=g.text);h=c.renderRelativeTime(d,f,!1,!1,!0);h.text&&b("DOM").setAttributes(a,{"aria-label":h.text})}g.next!=-1&&(g.next<e||e==-1)&&(e=g.next)});!b("killswitch")("GHL_LIVE_TIMER_SERVER_REGISTERED_TIMESTAMP")&&!w&&u.forEach(function(a){var f=c.render(d,a.time,a.size);f.next!=-1&&(f.next<e||e==-1)&&(e=f.next);if(b("gkx")("837029")){var g=String(f.text)===a.initialText;(j||(j=b("ODS"))).bumpEntityKey(2966,"feed_ads","LiveTimer.smart_update_"+String(g));if(g)return}b("DOM").setContent(a.ref,f.text)});if(e!=-1){a=Math.max(s,e*k);this.createTimeout(a)}},renderRelativeTime:function(a,b,c,d,e){var f={text:"",next:-1};if(a-b>n&&!e)return f;e=a-b;a=Math.floor(e/l);b=Math.floor(a/o);var g=Math.floor(b/p),h=Math.floor(g/q),j=Math.floor(g/r);if(a<1){d?(f.text=i._("1m"),f.next=20-e%20):c?(f.text=i._("Just now"),f.next=20-e%20):(f.text=i._("a few seconds ago"),f.next=l-e%l);return f}if(b<1){d?f.text=i._({"*":"{number}m"},[i._param("number",a,[0])]):c&&a==1?f.text=i._("1 min"):c?f.text=i._({"*":"{number} mins"},[i._param("number",a,[0])]):f.text=i._({"*":"{number} minutes ago","_1":"about a minute ago"},[i._plural(a,"number")]);f.next=l-e%l;return f}b<11&&(f.next=m-e%m);if(b<24){d?f.text=i._({"*":"{number}h"},[i._param("number",b,[0])]):c&&b==1?f.text=i._("1 hr"):c?f.text=i._({"*":"{number} hrs"},[i._param("number",b,[0])]):f.text=i._({"*":"{number} hours ago","_1":"about an hour ago"},[i._plural(b,"number")]);return f}if(g<7){d?f.text=i._({"*":"{number}d"},[i._param("number",g,[0])]):f.text=g===1?i._("a day ago"):i._({"*":"{number} days ago"},[i._param("number",g,[0])]);return f}if(g>=7&&g<365){d?f.text=i._({"*":"{number}w"},[i._param("number",h,[0])]):f.text=h===1?i._("a week ago"):i._({"*":"{number} weeks ago"},[i._param("number",h,[0])]);return f}d?f.text=i._({"*":"{number}y"},[i._param("number",j,[0])]):f.text=j===1?i._("a year ago"):i._({"*":"{number} years ago"},[i._param("number",j,[0])]);return f},renderRelativeTimeToServer:function(a,c,d,e){return this.renderRelativeTime(Math.floor(b("ServerTime").get()/k),a,c,d,e)},render:function(a,b,c,d){d===void 0&&(d=!1);return t(x.renderRelativeTime(a,b,c==="short",c==="minimal",d))},renderNow:function(a,b,c){c===void 0&&(c=!1);return t(x.renderRelativeTimeToServer(a,b==="short",b==="minimal",c))},CONSTS:{MS_IN_SEC:k,SEC_IN_MIN:l,SEC_IN_HOUR:m,SEC_IN_12_HOUR:a,SEC_IN_24_HOUR:n,MIN_IN_HOUR:o,HEARTBEAT:s}};e.exports=x}),null);
__d("NotificationUpdates",["Arbiter","LiveTimer","NotificationConstants","createObjectFrom"],(function(a,b,c,d,e,f,g){var h={},i={},j={},k={},l=!1,m=[],n=0,o=new(c("Arbiter"))();function p(){if(n)return;var a=h,b=i,c=j,d=k;h={};i={};j={};k={};(Object.keys(a).length||l)&&(l=!1,r("notifications-updated",a));Object.keys(b).length&&r("seen-state-updated",b);Object.keys(c).length&&r("read-state-updated",c);Object.keys(d).length&&r("hidden-state-updated",d);m.pop()}function q(){return m.length?m[m.length-1]:d("NotificationConstants").PayloadSourceType.UNKNOWN}function r(a,b){u(a,{updates:b,source:q()})}var s=null;function a(){return s}function b(a,b,c,e){b.servertime&&(s=b.servertime,d("LiveTimer").restart(b.servertime)),t(a,b)}function t(a,b){Object.keys(b).length&&z(function(){m.push(a);var c=babelHelpers["extends"]({},b,{payloadsource:q()});u("update-notifications",c);u("update-seen",c);u("update-read",c);u("update-hidden",c)})}function e(){return o}function u(a,b){return o.inform(a,b)}function f(a,b){return o.subscribe(a,b)}function v(a){Object.assign(h,c("createObjectFrom")(a)),l=!0,p()}function w(a){Object.assign(i,c("createObjectFrom")(a)),p()}function x(a){Object.assign(j,c("createObjectFrom")(a)),p()}function y(a){Object.assign(k,c("createObjectFrom")(a)),p()}function z(a){n++;try{a()}catch(a){throw a}finally{n--,p()}}g.getserverTime=a;g.handleUpdate=b;g._updateWithPayload=t;g.getArbiter=e;g.inform=u;g.subscribe=f;g.didUpdateNotifications=v;g.didUpdateSeenState=w;g.didUpdateReadState=x;g.didUpdateHiddenState=y;g.synchronizeInforms=z}),98);
__d("NotifClickEventsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1835463");b=d("FalcoLoggerInternal").create("notif_click_events",a);e=b;g["default"]=e}),98);
__d("NotificationUserActions",["AsyncRequest","Bootloader","BusinessUserConf","CurrentUser","NotifClickEventsFalcoEvent","NotificationConstants","NotificationTokens","NotificationUpdates","createObjectFrom"],(function(a,b,c,d,e,f,g){var h=!1;function i(a){c("BusinessUserConf").businessUserID!=null&&(a.biz_user_id=c("BusinessUserConf").businessUserID),new(c("AsyncRequest"))("/ajax/notifications/mark_read.php").setData(a).setAllowCrossPageTransition(!0).send()}function j(a){var b={};a.forEach(function(a,c){b["alert_ids["+c+"]"]=a});return b}function a(a,b,e){var f=document.getElementById("notificationsCountValue"),g=null;f&&(g=f.textContent);d("NotificationUpdates").handleUpdate(d("NotificationConstants").PayloadSourceType.USER_ACTION,{seenState:c("createObjectFrom")(a)});f=d("NotificationTokens").untokenizeIDs(a);a=j(f);a.seen=!0;g&&(a.badgeCount=g);b&&(a.source_view=b);e&&(a.classification=e);i(a)}function b(a){h=a}function e(a,b,e){e===void 0&&(e=null);d("NotificationUpdates").handleUpdate(d("NotificationConstants").PayloadSourceType.USER_ACTION,{readState:c("createObjectFrom")(a,!0)});a=d("NotificationTokens").untokenizeIDs(a);a=j(a);h&&(a.from_read_button=!0,h=!1);b&&(a.source_view=b);e&&(a.environment=e);i(a)}function f(a,b){d("NotificationUpdates").handleUpdate(d("NotificationConstants").PayloadSourceType.USER_ACTION,{readState:c("createObjectFrom")(a,!1)});a=d("NotificationTokens").untokenizeIDs(a);a=j(a);h&&(a.from_read_button=!0,h=!1);a.unread=!0;b&&(a.source_view=b);i(a)}function k(a,b){b===void 0&&(b=null),c("Bootloader").loadModules(["NotificationSeenState"],function(e){e=e.getUnreadIDs();e.length>0&&d("NotificationUpdates").handleUpdate(d("NotificationConstants").PayloadSourceType.USER_ACTION,{readState:c("createObjectFrom")(e)});e={read:!0};h&&(e.from_read_button=!0,h=!1);a&&(e.source_view=a);b&&(e.environment=b);i(e)},"NotificationUserActions")}function l(a){c("NotifClickEventsFalcoEvent").log(function(){var b;return{notification_data:{alert_id:d("NotificationTokens").untokenizeIDs([a])[0],logger_context:"www_jewel",to_user:String((b=c("BusinessUserConf").businessUserID)!=null?b:c("CurrentUser").getID())}}})}g.markNotificationsAsSeen=a;g.setNextIsFromReadButton=b;g.markNotificationsAsRead=e;g.markNotificationsAsUnread=f;g.markAllNotificationsAsRead=k;g.clickNotification=l}),98);
__d("Timestamp.react",["LiveTimer","joinClasses","react","tooltipPropsFor"],(function(a,b,c,d,e,f,g){var h,i=h||d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var e=b.prototype;e.componentDidMount=function(){this.props.autoUpdate&&this.$1&&d("LiveTimer").addTimeStamps(this.$1)};e.componentDidUpdate=function(a){this.props.autoUpdate&&this.props.time!==a.time&&d("LiveTimer").loop(!1)};e.componentWillUnmount=function(){this.$1&&d("LiveTimer").removeTimestamp(this.$1)};e.render=function(){var a=this,b=this.props,e=b.shorten,f=b.time,g=b.text,h=b.useTooltip,j=b.verbose,k=b.minimize,l=b.useLargerTimeUnits;b=b.className;l=d("LiveTimer").renderRelativeTimeToServer(f||0,e,k,l);var m=d("LiveTimer").renderRelativeTimeToServer(f||0,!1,!1,!0),n=h?c("tooltipPropsFor")(j):{};return i.jsx("abbr",babelHelpers["extends"]({},n,{"aria-label":m.text.toString()||g,minimize:k!=null?k.toString():void 0,className:c("joinClasses")(b,"livetimestamp"),title:h?null:j,"data-utime":f,"data-minimize":Boolean(this.props.minimize)?!0:null,"data-shorten":Boolean(e)?!0:null,ref:function(b){return a.$1=b},children:l.text.toString()||g}))};return b}(i.PureComponent);a.defaultProps={autoUpdate:!1,useTooltip:!1};g["default"]=a}),98);
__d("SoundPlayer",["ODS","URI","createArrayFromMixed"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=new Map();function k(a){var b=new(i||(i=c("URI")))(a);return b.getDomain()?a:new(i||(i=c("URI")))(window.location.href).setPath(b.getPath()).toString()}function l(a){a=new(i||(i=c("URI")))(a).getPath();if(/\.mp3$/.test(a))return"audio/mpeg";return/\.og[ga]$/.test(a)?"audio/ogg":""}var m=function(a,b){for(var a=c("createArrayFromMixed")(a),d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;if(j.has(f))return;var g=document.createElement("audio");if(!g||!g.canPlayType||!g.canPlayType(l(f)))continue;g.preload="auto";g.src=k(f);document.body&&document.body.appendChild(g);j.set(f,g);(b==null?void 0:b.onPreload)!=null&&b.onPreload(g);return}};a=function(a,b){b===void 0&&(b={});for(var a=c("createArrayFromMixed")(a),e=Array.isArray(a),f=0,a=e?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=a.length)break;g=a[f++]}else{f=a.next();if(f.done)break;g=f.value}g=g;j.has(g)||m(g,b.callbacks);g=j.get(g);if(!g)continue;b.loop&&g.setAttribute("loop","");b.volume&&(g.volume=b.volume);g=g.play();g!=null&&typeof g.then==="function"?g.then(function(a){(h||(h=d("ODS"))).bumpEntityKey(2966,"sound_player","play.success")})["catch"](function(a){(h||(h=d("ODS"))).bumpEntityKey(2966,"sound_player","play.error")}):(h||(h=d("ODS"))).bumpEntityKey(2966,"sound_player","non_promise");return}};b=function(a){for(var a=c("createArrayFromMixed")(a),b=Array.isArray(a),d=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(b){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e=j.get(e);if(e){e.pause();return}}};e=function(a){for(var a=c("createArrayFromMixed")(a),b=Array.isArray(a),d=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(b){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;var f=j.get(e);f&&(f.pause(),f.removeAttribute("src"),f.src=k(e))}};g.preload=m;g.play=a;g.pause=b;g.stop=e}),98);
__d("SoundSynchronizer",["SoundPlayer","WebStorage","createArrayFromMixed"],(function(a,b,c,d,e,f){var g,h="fb_sounds_playing3";function i(){var a=(g||(g=b("WebStorage"))).getLocalStorage();if(a)try{a=a[h];if(a){a=JSON.parse(a);if(Array.isArray(a))return a}}catch(a){}return[]}function j(a){var c=(g||(g=b("WebStorage"))).getLocalStorage();if(c){var d=i();d.push(a);while(d.length>5)d.shift();try{c[h]=JSON.stringify(d)}catch(a){}}}function k(a){return i().some(function(b){return b===a})}a={play:function(a,c,d,e){a=b("createArrayFromMixed")(a);c=c||a[0]+Math.floor(Date.now()/1e3);if(k(c))return;b("SoundPlayer").play(a,{loop:!!d,callbacks:e});j(c)},isSupported:function(){return!!(g||(g=b("WebStorage"))).getLocalStorage()}};e.exports=a}),null);
__d("SoundRPC",["FBJSON","SecurePostMessage","SoundSynchronizer","cr:950105"],(function(a,b,c,d,e,f,g){function h(a,b,c,e){d("SoundSynchronizer").play(a,b,c,e)}function a(a,b,c,e){b={name:"SoundRPC",data:{paths:b,sync:c,loop:e}};d("SecurePostMessage").sendMessageAllowAnyOrigin_UNSAFE(a,d("FBJSON").stringify(b))}function c(){return!!window.postMessage}function e(){var a=function(a){if(!/\.facebook.com$/.test(a.origin))return;var b={};try{a=a.data;typeof a==="string"&&(b=d("FBJSON").parse(a))}catch(a){}a=b;b=a.name;a=a.data;b==="SoundRPC"&&a!=null&&typeof a==="object"&&h(a.paths,a.sync,a.loop)};b("cr:950105")!=null?b("cr:950105").listen(window,"message",a):window.addEventListener("message",a)}g.playLocal=h;g.playRemote=a;g.supportsRPC=c;g._listen=e}),98);