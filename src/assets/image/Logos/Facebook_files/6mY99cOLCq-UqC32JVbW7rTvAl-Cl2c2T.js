;/*FB_PKG_DELIM*/

__d("MessengerWebPollConstants",[],(function(a,b,c,d,e,f){e.exports={POLL_COMPOSER_MAX_OPTIONS:10,POLL_MAX_OPTIONS:200,POLL_MIN_OPTIONS:2,POLL_MAX_OPTION_LENGTH:140,POLL_MAX_QUESTION_LENGTH:140}}),null);
__d("LSInsertRollCallContribution",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.seq([function(c){return b.fe(b.ftr(b.db.table(255).fetch([[[a[0],a[1],a[2],a[3]]]]),function(c){return b.i64.eq(c.rollCallContributionId,a[0])&&b.i64.eq(c.rollCallId,a[1])&&c.messageId===a[2]&&b.i64.eq(c.messageTimestampMs,a[3])&&b.i64.lt(c.authorityLevel,a[23])}),function(a){return a["delete"]()})},function(c){return b.db.table(255).add({rollCallContributionId:a[0],rollCallId:a[1],messageId:a[2],messageTimestampMs:a[3],threadKey:a[4],primaryMediaUrl:a[5],primaryMediaUrlFallback:a[6],primaryMediaExpiryMs:a[7],primaryMediaWidth:a[8],primaryMediaHeight:a[9],primaryMediaMimeType:a[10],previewMediaUrl:a[11],previewMediaUrlFallback:a[12],previewMediaExpiryMs:a[13],previewMediaWidth:a[14],previewMediaHeight:a[15],previewMediaMimeType:a[16],authorityLevel:a[23],contributorId:a[17],offlineThreadingId:a[18],blurOverride:a[19],contributionSource:a[20],contributionType:a[21],content:a[22]})}])},function(a){return b.resolve(c)}])}b=a;f["default"]=b}),66);
__d("LSIssuePollCreationForThreadTask",["LSIssueNewTaskWithExtraOperations"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(b){return c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[5]=b.syncGroup,c.i64.neq(d[5],f)?d[4]=d[5]:d[4]=c.i64.cast([0,1]),d[0]=d[4])})},function(e){return d[2]=new c.Map(),d[2].set("question_text",a[0]),d[2].set("thread_key",a[1]),d[2].set("options",a[2]),d[2].set("sync_group",d[0]),d[3]=c.toJSON(d[2]),c.sp(b("LSIssueNewTaskWithExtraOperations"),"poll_creation",c.i64.cast([0,163]),d[3],f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),f,f,c.i64.cast([0,0]),f,c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSIssuePollCreationForThreadTaskStoredProcedure",["LSIssuePollCreationForThreadTask"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.questionText;d[1]=b.threadKey;d[2]=b.options;return c("LSIssuePollCreationForThreadTask").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSLocalApplyOptimisticRollCallContribution",["LSArrayGetObjectAt","LSGetFirstAvailableAttachmentCTAID","LSGetViewerFBID","LSInsertAttachmentItem","LSInsertRollCallContribution","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return a[1]!==f?c.seq([function(b){return c.db.table(250).fetch([[[c.i64.from_string(a[1]),a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?(function(a){c.logger(a).mustfix(a)}("[LSMailboxLocalApplyOptimisticRollCallContributionStoredProcedure] couldn't find roll call in table roll_calls"),e=["Roll Call",c.i64.cast([0,0])],d[0]=e[0],d[1]=e[1],e):(b=a.item,e=[b.rollCallPrompt,b.expiryTimestampSec],d[0]=e[0],d[1]=e[1],e)})},function(b){return c.islc(c.sb(c.ftr(c.db.table(255).fetch(),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq(b.rollCallId,c.i64.from_string(a[1]))}),[["messageTimestampMs","DESC"]]),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var c=a.done;a=a.value;return c?d[3]=f:(b=a.item,d[3]=b.messageId)})},function(b){return d[3]!==f?c.seq([function(b){return d[7]=c.createArray(),c.fe(c.islc(c.sb(c.db.table(18).fetch([[[a[0],d[3]]],"fk_attachments"]),[["attachmentIndex","ASC"]]),0,c.i64.to_float(c.i64.cast([0,2]))),function(a){a=a.item;return d[8]=new c.Map(),d[8].set("attachment_index",a.attachmentIndex),d[8].set("preview_url",a.previewUrl),d[8].set("preview_url_expiration_timestamp_ms",a.previewUrlExpirationTimestampMs),d[8].set("preview_url_mime_type",a.previewUrlMimeType),d[8].set("preview_width",a.previewWidth),d[8].set("preview_height",a.previewHeight),d[8].set("default_cta_id",a.defaultCtaId),d[8].set("playable_url",a.playableUrl),d[9]=(d[7].push(d[8]),d[7])})},function(a){return d[5]=d[7]}]):c.resolve((d[7]=c.createArray(),d[5]=d[7]))},function(e){return c.i64.neq(a[6],f)?d[6]=a[6]:d[6]=c.i64.cast([0,0]),c.i64.eq(d[6],c.i64.cast([0,0]))?(d[7]=c.i64.of_int32(a[2].length),c.i64.eq(d[7],c.i64.cast([0,1]))?c.seq([function(b){return a[5]!==f?d[8]=c.i64.from_string(a[5]):d[8]=c.i64.cast([0,0]),c.localizeV2Async(c.i64.cast([0,3989800917]),f).then(function(a){return d[9]=a})},function(e){return c.ntop("Array",b("LSArrayGetObjectAt"),a[2],c.i64.cast([0,0])).then(function(a){return a=a,d[10]=a[0],d[11]=a[1],a})},function(a){return c.sp(b("LSGetFirstAvailableAttachmentCTAID")).then(function(a){return a=a,d[12]=a[0],a})},function(b){return d[13]=d[10].get("offline_attachment_id"),d[10],d[14]=d[10].get("attachment_index"),d[10],c.ftr(c.db.table(16).fetch([[[a[0],a[3],a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&b.messageId===a[3]&&b.attachmentFbid===a[1]&&c.i64.gt(b.authorityLevel,c.i64.cast([0,20]))}).next().then(function(b){var e=b.done;b.value;return e?c.db.table(16).put({threadKey:a[0],messageId:a[3],attachmentFbid:a[1],timestampMs:a[4],offlineAttachmentId:d[13],attachmentType:c.i64.cast([0,7]),filesize:c.i64.cast([0,0]),attachmentCta1Id:d[12],attachmentIndex:d[14],hasMedia:!1,hasXma:!0,isSharable:!1,xmaLayoutType:c.i64.cast([0,10]),cta1Title:d[9],cta1Type:"xma_disabled_cta",defaultCtaTitle:d[9],defaultCtaType:"xma_disabled_cta",defaultCtaId:d[12],titleText:d[0],authorityLevel:c.i64.cast([0,20]),countdownTimestampMs:c.i64.mul(d[1],c.i64.cast([0,1e3])),maxTitleNumOfLines:c.i64.cast([0,4])}):0})},function(a){return d[15]=d[10].get("preview_url"),d[10],d[26]=d[15]==null?"":d[15],d[16]=d[10].get("preview_url_mime_type"),d[10],d[27]=d[16]==null?"":d[16],d[17]=d[10].get("preview_height"),d[10],d[23]=d[17]==null?c.i64.cast([0,0]):d[17],d[18]=d[10].get("preview_width"),d[10],d[22]=d[18]==null?c.i64.cast([0,0]):d[18],d[19]=d[10].get("playable_url"),d[10],d[25]=d[19]==null?"":d[19],d[20]=d[10].get("playable_url_mime_type"),d[10],c.sp(b("LSGetViewerFBID")).then(function(a){return a=a,d[21]=a[0],a})},function(e){return c.sp(b("LSInsertRollCallContribution"),c.i64.cast([0,0]),c.i64.from_string(a[1]),a[3],a[4],a[0],d[25],"",c.i64.cast([0,0]),d[22],d[23],d[20]==null?"":d[20],d[26],"",c.i64.cast([0,0]),d[22],d[23],d[27],d[21],a[3],!1,d[8],a[6],f,c.i64.cast([0,20]))},function(b){return c.fe(c.db.table(250).fetch([[[c.i64.from_string(a[1]),a[0]]]]),function(a){var b=a.update;a.item;return b({isBlurred:!1,viewerHasContributed:!0})})},function(e){return d[24]=d[10].get("attachment_index"),d[10],c.sp(b("LSInsertAttachmentItem"),a[1],d[24],a[0],c.i64.cast([0,0]),a[3],f,c.i64.cast([0,0]),f,f,f,f,f,d[25],f,f,f,f,d[26],d[26],c.i64.cast([0,0]),d[27],d[22],d[23],f,d[12],d[9],"xma_disabled_cta",f,f,f,!1,"full",f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f)},function(e){return d[28]=c.i64.of_int32(d[5].length),c.i64.gt(d[28],c.i64.cast([0,0]))?c.loopAsync(d[28],function(e){return d[29]=e,c.seq([function(a){return c.ntop("Array",b("LSArrayGetObjectAt"),d[5],d[29]).then(function(a){return a=a,d[30]=a[0],d[31]=a[1],a})},function(e){return d[32]=d[30].get("attachment_index"),d[30],d[33]=d[30].get("preview_url"),d[30],d[34]=d[30].get("preview_url_expiration_timestamp_ms"),d[30],d[35]=d[30].get("preview_url_mime_type"),d[30],d[36]=d[30].get("preview_width"),d[30],d[37]=d[30].get("preview_height"),d[30],d[38]=d[30].get("default_cta_id"),d[30],d[39]=d[30].get("playable_url"),d[30],c.sp(b("LSInsertAttachmentItem"),a[1],c.i64.add(d[32],c.i64.cast([0,1])),a[0],c.i64.cast([0,0]),a[3],f,c.i64.cast([0,0]),f,f,f,f,f,d[39],f,f,f,f,d[33],d[33],d[34],d[35],d[36],d[37],f,d[38],d[9],"xma_disabled_cta",f,f,f,!1,"full",f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f)}])}):c.resolve()}]):c.resolve((d[8]=c.i64.of_int32(a[2].length),function(a){c.logger(a).mustfix(a)}(["[LSMailboxLocalApplyOptimisticRollCallContributionStoredProcedure] expected only 1 attachment for MEDIA contribution, but found ",c.i64.to_string(d[8])].join(""))))):c.i64.eq(d[6],c.i64.cast([0,1]))?a[7]!==f?(d[7]=new c.Map(),d[7].set("roll_call_id",c.i64.from_string(a[1])),d[7].set("contribution_type",d[6]),d[7].set("content",a[7]),d[7].set("offline_threading_id",a[3]),d[8]=d[7].get("roll_call_id"),d[7],d[9]=c.toJSON(d[7]),c.sp(b("LSIssueNewTask"),c.i64.to_string(d[8]),c.i64.cast([0,610]),d[9],f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),f,f,c.i64.cast([0,0]),c.i64.cast([0,0]))):c.resolve(function(a){c.logger(a).mustfix(a)}("[LSMailboxLocalApplyOptimisticRollCallContributionStoredProcedure] expected non-null content for TEXT contribution, but found null")):c.resolve(c.i64.eq(d[6],c.i64.cast([0,2]))?function(a){c.logger(a).mustfix(a)}("[LSMailboxLocalApplyOptimisticRollCallContributionStoredProcedure] LINK contributions are not yet supported"):0)}]):c.resolve(function(a){c.logger(a).mustfix(a)}("[LSMailboxLocalApplyOptimisticRollCallContributionStoredProcedure] param product_fbid is missing"))},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSLocalApplyOptimisticSharedAlbumContribution",["LSArrayGetObjectAt","LSArrayRemoveObjectAt","LSCollapseAttachments","LSGetFirstAvailableAttachmentCTAID","LSInsertAttachmentItem"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(a){return c.localizeV2Async(c.i64.cast([0,2856734260]),f).then(function(a){return d[0]=a})},function(a){return c.sp(b("LSGetFirstAvailableAttachmentCTAID")).then(function(a){return a=a,d[1]=a[0],a})},function(e){return c.ntop("Array",b("LSArrayGetObjectAt"),a[2],c.i64.cast([0,0])).then(function(a){return a=a,d[2]=a[0],d[3]=a[1],a})},function(e){return d[4]=c.i64.random(),d[5]=c.i64.to_string(d[4]),a[1]!==f?c.seq([function(b){return c.db.table(279).fetch([[[c.i64.from_string(a[1]),a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?(function(a){c.logger(a).mustfix(a)}("[LSMailboxLocalApplyOptimisticSharedAlbumContributionStoredProcedure] couldn't find album in table shared_albums"),d[6]="Shared Album"):(b=a.item,d[6]=b.title)})},function(b){return d[8]=d[2].get("offline_attachment_id"),d[2],d[9]=d[2].get("attachment_index"),d[2],c.ftr(c.db.table(16).fetch([[[a[0],a[3],d[5]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&b.messageId===a[3]&&b.attachmentFbid===d[5]&&c.i64.gt(b.authorityLevel,c.i64.cast([0,20]))}).next().then(function(b){var e=b.done;b.value;return e?c.db.table(16).put({threadKey:a[0],messageId:a[3],attachmentFbid:d[5],timestampMs:a[4],offlineAttachmentId:d[8],attachmentType:c.i64.cast([0,7]),filesize:c.i64.cast([0,0]),attachmentCta1Id:d[1],attachmentIndex:d[9],hasMedia:!1,hasXma:!0,isSharable:!1,xmaLayoutType:c.i64.cast([0,10]),cta1Title:d[0],cta1Type:"xma_disabled_cta",defaultCtaTitle:d[0],defaultCtaType:"xma_shared_album_viewer",defaultCtaId:d[1],titleText:d[6],authorityLevel:c.i64.cast([0,20]),maxTitleNumOfLines:c.i64.cast([0,4]),collapsibleId:c.i64.from_string(a[1])}):0})},function(d){return c.sp(b("LSCollapseAttachments"),a[0],c.i64.from_string(a[1]))},function(e){return d[10]=c.i64.of_int32(a[2].length),c.i64.gt(d[10],c.i64.cast([0,0]))?c.loopAsync(d[10],function(e){return d[12]=e,c.seq([function(e){return c.ntop("Array",b("LSArrayGetObjectAt"),a[2],d[12]).then(function(a){return a=a,d[13]=a[0],d[14]=a[1],a})},function(b){return d[15]=d[13].get("preview_url"),d[13],d[23]=d[15]==null?"":d[15],d[16]=d[13].get("preview_height"),d[13],d[24]=d[16]==null?c.i64.cast([0,0]):d[16],d[17]=d[13].get("preview_width"),d[13],d[25]=d[17]==null?c.i64.cast([0,0]):d[17],d[18]=d[13].get("preview_url_mime_type"),d[13],d[19]=d[13].get("playable_url"),d[13],d[20]=d[13].get("playable_url_mime_type"),d[13],d[21]=d[13].get("preview_url_mime_type"),d[13],d[22]=d[13].get("offline_attachment_id"),d[13],d[22]!==f?c.seq([function(b){return d[27]="",d[28]=c.i64.from_string(d[22]),d[29]=c.i64.from_string(a[1]),d[26]=c.i64.of_float(Date.now()),c.fe(c.ftr(c.db.table(280).fetch([[[d[29],d[28],a[0],d[27]]]]),function(b){return c.i64.eq(b.sharedAlbumId,d[29])&&c.i64.eq(b.sharedAlbumContributionId,d[28])&&c.i64.eq(b.threadKey,a[0])&&b.messageId===d[27]&&c.i64.lt(b.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(b){return c.db.table(280).add({messageId:d[27],sharedAlbumContributionId:d[28],sharedAlbumId:d[29],threadKey:a[0],mediaUrl:d[19]==null?d[23]:d[19],mediaHeight:d[24],mediaWidth:d[25],mediaUrlFallback:"",urlExpiryMs:c.i64.cast([0,0]),creationTimestampMs:d[26],authorityLevel:c.i64.cast([0,20]),previewMediaUrl:d[23],previewMediaHeight:d[24],previewMediaWidth:d[25],previewMediaMimeType:d[18]==null?"":d[18]})}]):c.resolve(function(a){c.logger(a).mustfix(a)}("[LSMailboxLocalApplyOptimisticSharedAlbumContributionStoredProcedure] param $attachment_otid is missing"))}])}):c.resolve()},function(e){return d[11]=c.createArray(),d[12]=(d[11].push(c.i64.cast([0,0])),d[11]),c.fe(c.islc(c.sb(c.db.table(280).fetch([[[c.i64.from_string(a[1])]]]),[["creationTimestampMs","DESC"]]),0,c.i64.to_float(c.i64.cast([0,4]))),function(e){var g=e.item;return c.seq([function(a){return d[15]=g.previewMediaUrl,c.ntop("Array",b("LSArrayGetObjectAt"),d[11],c.i64.cast([0,0])).then(function(a){return a=a,d[12]=a[0],d[13]=a[1],a})},function(e){return c.i64.eq(c.i64.cast([0,0]),d[12])?d[14]=d[6]:d[14]=f,c.sp(b("LSInsertAttachmentItem"),d[5],d[12],a[0],c.i64.cast([0,0]),a[3],f,c.i64.cast([0,0]),f,d[14],f,f,f,f,f,f,f,f,d[15],d[15],c.i64.cast([0,0]),g.previewMediaMimeType,g.mediaWidth,g.mediaHeight,f,d[1],f,"xma_shared_album_viewer",f,f,f,!1,"full",f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f)},function(a){return c.ntop("Array",b("LSArrayRemoveObjectAt"),d[11],c.i64.cast([0,0])).then(function(a){return a=a,d[16]=a[0],a})},function(a){return d[16]=(d[11].push(c.i64.add(d[12],c.i64.cast([0,1]))),d[11])}])})}]):c.resolve(function(a){c.logger(a).mustfix(a)}("[LSMailboxLocalApplyOptimisticSharedAlbumContributionStoredProcedure] param product_fbid is missing"))}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSLocalApplyOptimisticMessageWithAttachmentsV2",["LSArrayGetObjectAt","LSLocalApplyOptimisticMessageV2","LSLocalApplyOptimisticRollCallContribution","LSLocalApplyOptimisticSharedAlbumContribution","LSSetMessageDisplayedContentTypes"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(e){return c.sp(b("LSLocalApplyOptimisticMessageV2"),a[0],a[1],a[2],a[3],a[4],a[5]).then(function(a){return a=a,d[0]=a[0],d[1]=a[1],a})},function(e){return d[2]=a[5].get("attachments"),a[5],d[3]=a[5].get("product_type"),a[5],d[3]==="roll_call"?(d[4]=a[5].get("product_fbid"),a[5],d[5]=a[5].get("product_attribution"),a[5],d[6]=a[5].get("contribution_type"),a[5],c.sp(b("LSLocalApplyOptimisticRollCallContribution"),a[1],d[4],d[2],d[0],d[1],d[5],d[6],a[3])):d[3]==="shared_albums"?(d[4]=a[5].get("product_fbid"),a[5],d[5]=a[5].get("product_attribution"),a[5],c.sp(b("LSLocalApplyOptimisticSharedAlbumContribution"),a[1],d[4],d[2],d[0],d[1],d[5])):(d[4]=c.i64.of_int32(d[2].length),c.i64.gt(d[4],c.i64.cast([0,0]))?c.loopAsync(d[4],function(e){return d[5]=e,c.seq([function(a){return c.ntop("Array",b("LSArrayGetObjectAt"),d[2],d[5]).then(function(a){return a=a,d[6]=a[0],d[7]=a[1],a})},function(b){return d[8]=d[6].get("attachment_fbid"),d[6],d[9]=d[6].get("offline_attachment_id"),d[6],d[10]=d[6].get("attachment_type"),d[6],d[11]=d[6].get("filename"),d[6],d[12]=d[6].get("filesize"),d[6],d[13]=d[6].get("attachment_index"),d[6],d[14]=d[6].get("has_media"),d[6],d[15]=d[6].get("has_xma"),d[6],d[16]=d[6].get("playable_url"),d[6],d[17]=d[6].get("playable_url_mime_type"),d[6],d[18]=d[6].get("playable_duration_ms"),d[6],d[19]=d[6].get("preview_url"),d[6],d[20]=d[6].get("preview_url_mime_type"),d[6],d[21]=d[6].get("mini_preview"),d[6],d[22]=d[6].get("preview_width"),d[6],d[23]=d[6].get("preview_height"),d[6],d[24]=d[6].get("xma_layout_type"),d[6],d[25]=d[6].get("xmas_template_type"),d[6],d[26]=d[6].get("cta1_title"),d[6],d[27]=d[6].get("cta2_title"),d[6],d[28]=d[6].get("cta3_title"),d[6],d[29]=d[6].get("image_url"),d[6],d[30]=d[6].get("action_url"),d[6],d[31]=d[6].get("title_text"),d[6],d[32]=d[6].get("subtitle_text"),d[6],d[33]=d[6].get("description_text"),d[6],d[34]=d[6].get("source_text"),d[6],d[35]=d[6].get("original_file_hash"),d[6],d[36]=d[6].get("sound_bite_client_sound_key"),d[6],d[37]=d[6].get("sound_bite_visual"),d[6],d[38]=d[6].get("ephemeral_media_state"),d[6],d[39]=d[6].get("waveform_data"),d[6],d[40]=d[6].get("avatar_audio_message_animated_url"),d[6],d[41]=d[6].get("avatar_audio_message_idle_url"),d[6],d[42]=d[6].get("avatar_audio_message_animated_b_url"),d[6],d[43]=d[6].get("avatar_audio_message_idle_b_url"),d[6],d[44]=d[6].get("avatar_audio_message_background_graphics_image_url"),d[6],d[45]=d[6].get("avatar_audio_message_pose_id"),d[6],d[46]=d[6].get("sampling_frequency_hz"),d[6],c.ftr(c.db.table(16).fetch([[[a[1],d[0],d[8]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&b.messageId===d[0]&&b.attachmentFbid===d[8]&&c.i64.gt(b.authorityLevel,c.i64.cast([0,20]))}).next().then(function(b){var e=b.done;b.value;return e?c.db.table(16).put({threadKey:a[1],messageId:d[0],attachmentFbid:d[8],timestampMs:d[1],offlineAttachmentId:d[9],attachmentType:d[10],filename:d[11],filesize:d[12],attachmentIndex:d[13],hasMedia:d[14],hasXma:d[15],isSharable:!1,playableUrl:d[16],playableUrlMimeType:d[17],playableDurationMs:d[18],previewUrl:d[19],previewUrlMimeType:d[20],miniPreview:d[21],previewWidth:d[22],previewHeight:d[23],xmaLayoutType:d[24],xmasTemplateType:d[25],cta1Title:d[26],cta2Title:d[27],cta3Title:d[28],imageUrl:d[29],actionUrl:d[30],titleText:d[31],subtitleText:d[32],descriptionText:d[33],sourceText:d[34],ephemeralMediaState:d[38],waveformData:d[39],samplingFrequencyHz:d[46],originalFileHash:d[35],authorityLevel:c.i64.cast([0,20])}):0})}])}):c.resolve())},function(e){return d[4]=c.i64.of_int32(d[2].length),c.i64.gt(d[4],c.i64.cast([0,0]))?(d[5]=a[5].get("sticker_id"),a[5],c.sp(b("LSSetMessageDisplayedContentTypes"),a[1],d[0],d[1],a[3],!1,c.i64.neq(d[5],f))):c.resolve()},function(a){return a=[d[0],d[1]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSLocalApplyOptimisticMessageWithAttachmentsV2StoredProcedure",["LSLocalApplyOptimisticMessageWithAttachmentsV2"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.senderId;d[1]=b.threadKey;d[2]=b.threadType;d[3]=b.text;d[4]=b.snippet;d[5]=b.extraSendMessageParams;return c("LSLocalApplyOptimisticMessageWithAttachmentsV2").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSOptimisticCreateRollCall",["LSCreateOfflineThreadingID","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(a){return d[0]=c.i64.of_float(Date.now()),c.sp(b("LSCreateOfflineThreadingID"),d[0]).then(function(a){return a=a,d[1]=a[0],a})},function(b){return c.fe(c.ftr(c.db.table(250).fetch([[[d[1],a[0]]]]),function(b){return c.i64.eq(b.rollCallId,d[1])&&c.i64.eq(b.threadKey,a[0])&&c.i64.lt(b.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(b){return c.db.table(250).add({rollCallId:d[1],threadKey:a[0],rollCallPrompt:a[1],expiryTimestampSec:c.i64.cast([0,0]),isBlurred:!1,authorityLevel:c.i64.cast([0,20]),offlineThreadingId:d[1],canViewWithoutContributing:!1})},function(e){return d[2]=new c.Map(),d[2].set("thread_key",a[0]),d[2].set("prompt",a[1]),d[2].set("offline_threading_id",d[1]),d[2].set("prompt_type",a[2]),d[3]=d[2].get("thread_key"),d[2],d[4]=c.toJSON(d[2]),c.sp(b("LSIssueNewTask"),c.i64.to_string(d[3]),c.i64.cast([0,607]),d[4],f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),f,f,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return a=[d[1],d[0]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSOptimisticCreateRollCallStoredProcedure",["LSOptimisticCreateRollCall"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.threadKey;d[1]=b.prompt;d[2]=b.promptType;return c("LSOptimisticCreateRollCall").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("MWChatComposerP2PPaymentEligibilityQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5099562526770637"}),null);
__d("MWChatComposerP2PPaymentEligibilityQuery.graphql",["MWChatComposerP2PPaymentEligibilityQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"fbids"}],c=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"PeerToPeerPaymentAccount",kind:"LinkedField",name:"peer_to_peer_payments",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"fbids",variableName:"fbids"}],concreteType:"PeerToPeerPaymentUserEligibility",kind:"LinkedField",name:"can_send_to",plural:!0,selections:[{alias:null,args:null,concreteType:"P2PPaymentUserFacingError",kind:"LinkedField",name:"exception",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fbid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_eligible",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWChatComposerP2PPaymentEligibilityQuery",selections:c,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWChatComposerP2PPaymentEligibilityQuery",selections:c},params:{id:b("MWChatComposerP2PPaymentEligibilityQuery_facebookRelayOperation"),metadata:{},name:"MWChatComposerP2PPaymentEligibilityQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWChatComposerP2PPopoverQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4759589620830704"}),null);
__d("MWChatComposerP2PPopoverQuery$Parameters",["MWChatComposerP2PPopoverQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("MWChatComposerP2PPopoverQuery_facebookRelayOperation"),metadata:{},name:"MWChatComposerP2PPopoverQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("MWV2ComposerPromptButtonQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6768559856594435"}),null);
__d("MWV2ComposerPromptButtonQuery.graphql",["MWV2ComposerPromptButtonQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"Literal",name:"surface_nux_id",value:10706},{kind:"Literal",name:"trigger",value:"COMMUNITY_MESSAGING_PROMPT"}],c=[{kind:"Literal",name:"supported",value:"TDHjT"}],d={kind:"InlineFragment",selections:[{args:null,documentName:"MWV2ComposerPromptButtonQuery",fragmentName:"CometQuickPromotionMessengerWebPromptsNuxDialogRendererStrategy_quickPromotionRef",fragmentPropName:"quickPromotionRef",kind:"ModuleImport"}],type:"CometQuickPromotionMessengerWebPromptsRendererStrategy",abstractKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWV2ComposerPromptButtonQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:a,concreteType:"ViewerEligibleQuickPromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"CometQuickPromotionSections",kind:"LinkedField",name:"comet_qp_sections",plural:!1,selections:[{alias:null,args:c,concreteType:null,kind:"LinkedField",name:"renderer_strategy",plural:!1,selections:[d],storageKey:'renderer_strategy(supported:"TDHjT")'}],storageKey:null}],storageKey:null}],storageKey:'eligible_promotions(surface_nux_id:10706,trigger:"COMMUNITY_MESSAGING_PROMPT")'}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MWV2ComposerPromptButtonQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:a,concreteType:"ViewerEligibleQuickPromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"CometQuickPromotionSections",kind:"LinkedField",name:"comet_qp_sections",plural:!1,selections:[{alias:null,args:c,concreteType:null,kind:"LinkedField",name:"renderer_strategy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},d],storageKey:'renderer_strategy(supported:"TDHjT")'}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:'eligible_promotions(surface_nux_id:10706,trigger:"COMMUNITY_MESSAGING_PROMPT")'}],storageKey:null}]},params:{id:b("MWV2ComposerPromptButtonQuery_facebookRelayOperation"),metadata:{},name:"MWV2ComposerPromptButtonQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("MWChatAnimatedImageFlyout.react",["fbt","CometAnimatedImagePickerCard.react","CometColumn.react","CometColumnItem.react","CometErrorBoundary.react","CometHeroInteractionWithDiv.react","CometPickerBasicStackingLayout.react","CometPickerSearchBox.react","CometPlaceholder.react","CometProgressRingIndeterminate.react","MWXLink.react","MessengerWebUXLogger","cr:6916","gkx","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));e=i;var k=e.useCallback,l=e.useState,m=c("gkx")("1299319"),n=274,o={container:{height:"x1hie0zf",width:"xlro9se",$$css:!0},scrollableAreaForIE11:{maxHeight:"xuyqlj2",$$css:!0}};function a(a){var d=a.interactionUUID,e=a.isSecureThread;e=e===void 0?!1:e;var f=a.onClose,g=a.onSelect;a=a.testid;var i=c("MessengerWebUXLogger")==null?void 0:c("MessengerWebUXLogger").useInteractionLogger();a=k(function(a){f(),g(a),i==null?void 0:i({eventName:"composer_send_gif"})},[i,f,g]);var p=l(""),q=p[0];p=p[1];var r=j.jsx(c("MWXLink.react"),{href:"https://facebook.com/settings/cookie",target:"_blank",children:h._("__JHASH__NW6k2q37lIW__JHASH__")});return j.jsx(c("CometErrorBoundary.react"),{children:j.jsx(c("CometHeroInteractionWithDiv.react"),{interactionDesc:"Comet initial load for Gifs",interactionUUID:d,children:j.jsx(c("CometPickerBasicStackingLayout.react"),{testid:void 0,xstyle:o.container,children:{content:j.jsx(c("CometPlaceholder.react"),{fallback:j.jsx(c("CometColumn.react"),{align:"center",expanding:!0,verticalAlign:"center",children:j.jsx(c("CometColumnItem.react"),{children:j.jsx(c("CometProgressRingIndeterminate.react"),{color:"disabled",size:24})})}),children:e?b("cr:6916")&&j.jsx(b("cr:6916"),{cookieContentForm:r,mediaHeight:n,mediaWidth:n,onSelect:a,searchQuery:q,xstyle:m&&o.scrollableAreaForIE11}):j.jsx(c("CometAnimatedImagePickerCard.react"),{mediaHeight:n,mediaWidth:n,onSelect:a,searchQuery:q,xstyle:m&&o.scrollableAreaForIE11})},1),header:j.jsx(c("CometPickerSearchBox.react"),{searchQuery:q,setSearchQuery:p},0)}})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatComposerOverflowIcons",["cr:3237"],(function(a,b,c,d,e,f,g){"use strict";g.MWChatComposerOverflowIconsPollsSVG=b("cr:3237").PollsSVG,g.MWChatComposerOverflowIconsDollarSignSVG=b("cr:3237").DollarSignSVG,g.MWChatComposerOverflowIconsMicrophoneSVG=b("cr:3237").MicrophoneSVG}),98);
__d("MWChatComposerRollCallIcon.react",["MWChatChatButtonColorConstants","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={icon:{display:"x1lliihq",$$css:!0}};function a(a){var b=a.fill;a=a.size;a=a+"px";return j.jsxs("svg",{className:(h||(h=c("stylex")))(k.icon,d("MWChatChatButtonColorConstants").styles.fillGrey),height:a,viewBox:"4.48 5.48 26.98 24.98",width:a,children:[j.jsx("path",{d:"M5 9a3 3 0 0 1 3-3h10a3 3 0 0 1 3 3v.5a.5.5 0 0 1-.5.5H18a4 4 0 0 0-4 4v4.23a.5.5 0 0 1-.5.52 5.96 5.96 0 0 1-3.86-1.4 1 1 0 1 0-1.28 1.52 7.96 7.96 0 0 0 5.14 1.88c.27 0 .5.21.5.48v3.27a.5.5 0 0 1-.5.5H8a3 3 0 0 1-3-3V9Zm5.25 2c-.93 0-1.5.75-1.5 2s.57 2 1.5 2c.94 0 1.5-.75 1.5-2s-.56-2-1.5-2Z",fill:b}),j.jsx("path",{d:"M16 15a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3h-9a3 3 0 0 1-3-3V15Zm7.5 2a1 1 0 0 0-1 1v1.75c0 .14-.11.25-.25.25H20.5a1 1 0 1 0 0 2h1.75c.14 0 .25.11.25.25V24a1 1 0 1 0 2 0v-1.75c0-.14.11-.25.25-.25h1.75a1 1 0 1 0 0-2h-1.75a.25.25 0 0 1-.25-.25V18a1 1 0 0 0-1-1Z",fill:b})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LSGroupPollEventType",[],(function(a,b,c,d,e,f){a=Object.freeze({QUESTION_CREATION:1,ADD_OPTION:2,ADD_UNVOTED_OPTION:3,UPDATE_VOTE:4,MULTIPLE_UPDATES:5,QUESTION_CLOSED:6,QUESTION_BUMPED:7});f["default"]=a}),66);
__d("MWChatPollStrings",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";a={addPollOptionLabel:h._("__JHASH__TTumxStOaLR__JHASH__"),createPollLabel:h._("__JHASH__Tf8o14f91uW__JHASH__"),pollTitleLabel:h._("__JHASH__CotUus5yWVx__JHASH__")};b=a;g["default"]=b}),98);
__d("MWGroupPollThreadSubTypeCategory",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({COMMUNITY_CHATS:1,BROADCAST_CHANNELS:2,SOCIAL_CHANNELS:3,OTHERS:4});c=a;f["default"]=c}),66);
__d("MWGroupPollQPL",["LSMessagingThreadTypeUtil","MWCMIsAnyCMThread","MWLSThread","QuickPerformanceLogger","qpl","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useCallback;function k(a){if(c("MWCMIsAnyCMThread")(a.threadType))return 1;if(d("LSMessagingThreadTypeUtil").isSocialChannel(a.threadType))return 3;return d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(a.threadType)?2:4}function l(a){return(a=d("MWLSThread").useThread(a,function(a){return k(a)}))!=null?a:4}function a(a){var b=l(a);return j(function(){var a={string:{poll_thread_type:String(b)}};(h||(h=c("QuickPerformanceLogger"))).markerAnnotate(c("qpl")._(25301969,"2041"),a);h.markerStart(c("qpl")._(25301969,"2041"))},[b])}function b(a){var b=l(a);return j(function(){var a={string:{poll_thread_type:String(b)}};(h||(h=c("QuickPerformanceLogger"))).markerAnnotate(c("qpl")._(25301969,"2041"),a);h.markerEnd(c("qpl")._(25301969,"2041"),4)},[b])}function e(a){var b=l(a);return j(function(){var a={string:{poll_thread_type:String(b)}};(h||(h=c("QuickPerformanceLogger"))).markerAnnotate(c("qpl")._(25301969,"2041"),a);h.markerPoint(c("qpl")._(25301969,"2041"),"on_click_create_poll")},[b])}function f(a){var b=l(a);return j(function(){var a={string:{poll_thread_type:String(b)}};(h||(h=c("QuickPerformanceLogger"))).markerAnnotate(c("qpl")._(25301969,"2041"),a);h.markerEnd(c("qpl")._(25301969,"2041"),2)},[b])}function m(a){var b=l(a);return j(function(){var a={string:{poll_thread_type:String(b)}};(h||(h=c("QuickPerformanceLogger"))).markerAnnotate(c("qpl")._(25301969,"2041"),a);h.markerEnd(c("qpl")._(25301969,"2041"),3)},[b])}function n(a){var b=l(a);return j(function(){var a={string:{poll_thread_type:String(b)}};(h||(h=c("QuickPerformanceLogger"))).markerAnnotate(c("qpl")._(25301816,"2042"),a);h.markerStart(c("qpl")._(25301816,"2042"))},[b])}function o(a){var b=l(a);return j(function(){var a={string:{poll_thread_type:String(b)}};(h||(h=c("QuickPerformanceLogger"))).markerAnnotate(c("qpl")._(25301816,"2042"),a);h.markerEnd(c("qpl")._(25301816,"2042"),4)},[b])}function p(a){var b=l(a);return j(function(a,d){a={bool:{is_new_poll_option_added:a,is_vote_casted:d},string:{poll_thread_type:String(b)}};(h||(h=c("QuickPerformanceLogger"))).markerAnnotate(c("qpl")._(25301816,"2042"),a);h.markerPoint(c("qpl")._(25301816,"2042"),"on_click_update_poll")},[b])}function q(a){var b=l(a);return j(function(){var a={string:{poll_thread_type:String(b)}};(h||(h=c("QuickPerformanceLogger"))).markerAnnotate(c("qpl")._(25301816,"2042"),a);h.markerEnd(c("qpl")._(25301816,"2042"),3)},[b])}function r(a){var b=l(a);return j(function(){var a={string:{poll_thread_type:String(b)}};(h||(h=c("QuickPerformanceLogger"))).markerAnnotate(c("qpl")._(25301816,"2042"),a);h.markerEnd(c("qpl")._(25301816,"2042"),2)},[b])}g.getPollThreadType=k;g.useGetPollThreadTypeWithThreadKey=l;g.useLogCreatePollStart=a;g.useLogCreatePollCancel=b;g.useLogOnCreatePollConfirmClick=e;g.useLogCreatePollSuccess=f;g.useLogCreatePollFail=m;g.useLogUpdatePollStart=n;g.useLogUpdatePollCancel=o;g.useLogOnUpdatePollConfirmClick=p;g.useLogUpdatePollFail=q;g.useLogUpdatePollSuccess=r}),98);
__d("MWGroupPollLoggerDeferred",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("MWGroupPollLogger").__setRef("MWGroupPollLoggerDeferred");function a(a,b){h.onReady(function(c){return c.log(a,b)})}g.log=a}),98);
__d("useMWGroupNewPollSubmitErrorLogger",["I64","Int64Hooks","MWGroupPollLoggerDeferred","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return d("Int64Hooks").useCallbackInt64(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,c){yield d("MWGroupPollLoggerDeferred").log("new_poll_submit_error",{poll:{entry_point:b,exception_message:c,poll_type:void 0,question_id:void 0,thread_id:(h||(h=d("I64"))).to_string(a)}})});return function(a,b){return c.apply(this,arguments)}}(),[a])}g["default"]=a}),98);
__d("useMWGroupNewPollSubmitSuccessLogger",["I64","Int64Hooks","MWGroupPollLoggerDeferred","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return d("Int64Hooks").useCallbackInt64(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){yield d("MWGroupPollLoggerDeferred").log("existing_poll_submit_success",{poll:{entry_point:b,poll_type:void 0,question_id:void 0,thread_id:(h||(h=d("I64"))).to_string(a)}})});return function(a){return c.apply(this,arguments)}}(),[a])}g["default"]=a}),98);
__d("MWChatPollFlyout.react",["BaseTextInput.react","CometScrollableArea.react","I64","LSGroupPollEventType","MWChatPollStrings","MWGroupPollQPL","MWXButton.react","MWXPopover.react","MWXRow.react","MWXRowItem.react","MessengerWebPollConstants","ReQL","ReQLSuspense","clearTimeout","emptyFunction","justknobx","promiseDone","react","setTimeout","stylex","useLayoutEffect_SAFE_FOR_SSR","useMWGroupNewPollSubmitErrorLogger","useMWGroupNewPollSubmitSuccessLogger","useReStore","useSinglePartialViewImpression"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=k||(k=d("react"));b=k;var m=b.useCallback,n=b.useEffect,o=b.useRef,p=b.useState,q={button:{paddingTop:"xyamay9",paddingEnd:"x1pi30zi",paddingBottom:"x1l90r2v",paddingStart:"x1swvt13",zIndex:"x1vjfegm",$$css:!0},buttonOverflow:{boxShadow:"x8t3t8w",$$css:!0},container:{display:"x78zum5",flexDirection:"xdt5ytf",maxHeight:"x1phlbz0",width:"x168biu4",$$css:!0},optionText:{backgroundColor:"x1jx94hy",borderTopStyle:"x1ejq31n",borderEndStyle:"xd10rxx",borderBottomStyle:"x1sy0etr",borderStartStyle:"x17r0tee",color:"xzsf02u",fontSize:"x6prxxf",fontWeight:"x1s688f",width:"xh8yej3",$$css:!0},pollOption:{borderBottomColor:"x1nb4dca",borderBottomStyle:"x1q0q8m5",borderBottomWidth:"xso031l",marginBottom:"xod5an3",paddingBottom:"x1i2zvha",$$css:!0},pollOptions:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",marginStart:"x1d52u69",marginLeft:null,marginRight:null,marginEnd:"xktsk01",$$css:!0},title:{backgroundColor:"x1jx94hy",borderTopStyle:"x1ejq31n",borderEndStyle:"xd10rxx",borderBottomStyle:"x1sy0etr",borderStartStyle:"x17r0tee",color:"xzsf02u",display:"x1lliihq",fontSize:"x6prxxf",fontWeight:"xk50ysn",marginBottom:"x1hq5gj4",marginStart:"x1d52u69",marginLeft:null,marginRight:null,marginEnd:"xktsk01",marginTop:"xjv05ge",textAlign:"x2b8uid",$$css:!0}};function a(a){var b=a.onClose,e=a.onPollCreate,g=a.thread,k=a.withArrow;k=k===void 0?!0:k;a=a.withPopover;a=a===void 0?!0:a;var r=p(""),s=r[0],t=r[1];r=p(function(){return[""]});var u=r[0],v=r[1];r=p(!1);var w=r[0],x=r[1];r=p(!1);var y=r[0],z=r[1];r=p(!1);var A=r[0],B=r[1],C=d("MWGroupPollQPL").useLogOnCreatePollConfirmClick(g.threadKey);r=d("MWGroupPollQPL").useLogCreatePollCancel(g.threadKey);r=c("useSinglePartialViewImpression")({onImpressionEnd:A?c("emptyFunction"):r});var D=d("MWGroupPollQPL").useLogCreatePollSuccess(g.threadKey),E=d("MWGroupPollQPL").useLogCreatePollFail(g.threadKey),F=c("useMWGroupNewPollSubmitSuccessLogger")(g.threadKey),G=c("useMWGroupNewPollSubmitErrorLogger")(g.threadKey),H=o(null),I=o(c("emptyFunction")),J=(h||(h=c("useReStore")))();n(function(){return function(){I.current(),H.current!==null&&c("clearTimeout")(H.current)}},[]);var K=m(function(){H.current=c("setTimeout")(function(){E(),c("promiseDone")(G(4)),I.current(),I.current=c("emptyFunction"),H.current=null,B(!1)},c("justknobx")._("1647")),I.current=J.table("polls").subscribe(function(a){a=a[0];a=d("ReQLSuspense").first(d("ReQL").fromTableAscending(J.table("polls")).getKeyRange(a),f.id+":177");a=a!=null&&(j||(j=d("I64"))).equal(a.threadKey,g.threadKey)&&(j||(j=d("I64"))).to_int32(a.lastUpdateMessageEventType)===c("LSGroupPollEventType").QUESTION_CREATION;a&&(D(),c("promiseDone")(F(4)),I.current(),H.current!==null&&c("clearTimeout")(H.current),b())})},[J,E,D,G,F,b,g.threadKey]),L=o(null),M=m(function(){if(L.current!=null){var a=L.current.getDOMNode();a!=null&&(a.scrollTop=a.scrollHeight)}x(!1)},[]);n(function(){w&&M()},[w,u,M]);var N=new Set(u.map(function(a){return a.toUpperCase()}).filter(function(a){return a!==""}));c("useLayoutEffect_SAFE_FOR_SSR")(function(){if(L.current!=null){var a=L.current.getDOMNode();z(function(){return a!=null&&a.scrollHeight>a.clientHeight})}},[L]);r=l.jsxs("div",{className:"x78zum5 xdt5ytf x1phlbz0 x168biu4",ref:r,children:[l.jsx(c("BaseTextInput.react"),{"aria-label":c("MWChatPollStrings").pollTitleLabel,maxLength:c("MessengerWebPollConstants").POLL_MAX_QUESTION_LENGTH,onChange:function(a){var b=a.target.value;return t(function(){return b})},placeholder:c("MWChatPollStrings").pollTitleLabel,value:s,xstyle:q.title}),l.jsx(c("CometScrollableArea.react"),{ref:L,vertical:!0,xstyle:q.pollOptions,children:u.map(function(a,b){return l.jsx("div",{className:"x1nb4dca x1q0q8m5 xso031l xod5an3 x1i2zvha",children:l.jsx(c("BaseTextInput.react"),{"aria-label":c("MWChatPollStrings").addPollOptionLabel,maxLength:c("MessengerWebPollConstants").POLL_MAX_OPTION_LENGTH,onBlur:function(){N.size<c("MessengerWebPollConstants").POLL_COMPOSER_MAX_OPTIONS&&v(function(a){return a.map(function(a){return a.trim()}).filter(function(a){return a!==""}).concat([""])})},onChange:function(a){var d=a.target.value;v(function(a){return a.map(function(e,f){var g=b===a.length-1&&d!==""&&a.length<c("MessengerWebPollConstants").POLL_COMPOSER_MAX_OPTIONS;g&&x(!0);if(b===f)return d;else return e}).concat(b===a.length-1&&d!==""&&a.length<c("MessengerWebPollConstants").POLL_COMPOSER_MAX_OPTIONS?[""]:[])})},placeholder:c("MWChatPollStrings").addPollOptionLabel,value:a,xstyle:q.optionText})},String(b))})}),l.jsx("div",{className:(i||(i=c("stylex")))(q.button,y?q.buttonOverflow:!1),children:l.jsx(c("MWXRow.react"),{paddingHorizontal:0,paddingTop:0,spacing:12,children:l.jsx(c("MWXRowItem.react"),{expanding:!0,children:l.jsx(c("MWXButton.react"),{disabled:N.size<c("MessengerWebPollConstants").POLL_MIN_OPTIONS||s.trim()===""||A,label:c("MWChatPollStrings").createPollLabel,loading:A,onPress:function(){C(),B(!0),K(),e(s,u.map(function(a){return a.trim()}).filter(function(a){return a!==""}))},reduceEmphasis:!0,type:"primary"})})})})]});if(a)return l.jsx(c("MWXPopover.react"),{withArrow:k,children:r});else return r}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatPromptFlyoutBackCard.react",["BaseImage.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k=135,l=180,m={backCard:{borderTopStartRadius:"xfh8nwu",borderTopEndRadius:"xoqspk4",borderBottomEndRadius:"x12v9rci",borderBottomStartRadius:"x138vmkv",bottom:"x1ey2m1c",boxShadow:"xumrakr",height:"x1b51vyi",opacity:"xg01cxk",position:"x10l6tqk",start:"x17qophe",left:null,right:null,transform:"xv8dq09",transitionDuration:"xcuylb0",transitionProperty:"x6o7n8i",transitionTimingFunction:"x1bckuxf",width:"x6vytul",zIndex:"x1ja2u2z",$$css:!0},backCardVisible:{opacity:"x1hc1fzr",transform:"xwot3bk",$$css:!0},media:{backgroundColor:"xwcfey6",backgroundPosition:"x1xsqp64",backgroundSize:"x18d0r48",borderTopStartRadius:"xfh8nwu",borderTopEndRadius:"xoqspk4",borderBottomEndRadius:"x12v9rci",borderBottomStartRadius:"x138vmkv",objectFit:"xl1xv1r",$$css:!0}};function a(a){var b=a.isVideo;a=a.previewUrl;return j.jsx("div",{className:(h||(h=c("stylex")))(m.backCard,a!==null?m.backCardVisible:null),children:a!==null?b?j.jsx("video",{className:"xwcfey6 x1xsqp64 x18d0r48 xfh8nwu xoqspk4 x12v9rci x138vmkv xl1xv1r",height:l,muted:!0,src:a,width:k}):j.jsx(c("BaseImage.react"),{height:l,src:a,width:k,xstyle:m.media}):null})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatPromptFlyoutFrontCard.react",["fbt","BaseTextArea.react","CometPlaceholder.react","MWChatPollFacepile.react","MWPActor.react","ReQL","ReQLSuspense","react","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||d("react"),l={facepile:{marginStart:"x1gryazu",marginLeft:null,marginRight:null,marginEnd:"xkrivgy",paddingBottom:"x1l90r2v",$$css:!0},frontCard:{backgroundColor:"x9bbmet",borderTopStartRadius:"xfh8nwu",borderTopEndRadius:"xoqspk4",borderBottomEndRadius:"x12v9rci",borderBottomStartRadius:"x138vmkv",boxShadow:"xi1c1fh",display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"x2lah0s",marginTop:"x1gslohp",marginBottom:"x12nagc",minHeight:"x1shn012",position:"x1n2onr6",width:"x6vytul",zIndex:"x1vjfegm",$$css:!0},textarea:{backgroundColor:"x9bbmet",borderTopStyle:"x1ejq31n",borderEndStyle:"xd10rxx",borderBottomStyle:"x1sy0etr",borderStartStyle:"x17r0tee",color:"xzsf02u",display:"x1lliihq",flexGrow:"x1iyjqo2",fontSize:"x6prxxf",fontWeight:"x1xlr1w8",marginTop:"x1xmf6yo",marginEnd:"x1emribx",marginBottom:"x1e56ztr",marginStart:"x1i64zmx",paddingTop:"x1y1aw1k",textAlign:"x2b8uid",$$css:!0}};function m(){var a=(i||(i=c("useReStore")))(),b=d("MWPActor.react").useActor(),e=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(a.table("contacts")).getKeyRange(b).map(function(a){return a.profilePictureUrl})},[a,b],f.id+":69");e=e!=null?[{profile_picture_url:e}]:[];return k.jsx(c("MWChatPollFacepile.react"),{contacts:e,direction:"reversed",gap:"negative",size:"mediumLarge"})}m.displayName=m.name+" [from "+f.id+"]";function a(a){var b=a.onChange;a=a.value;return k.jsxs("div",{className:"x9bbmet xfh8nwu xoqspk4 x12v9rci x138vmkv xi1c1fh x78zum5 xdt5ytf x1iyjqo2 x2lah0s x1gslohp x12nagc x1shn012 x1n2onr6 x6vytul x1vjfegm",children:[k.jsx(c("BaseTextArea.react"),{"aria-label":h._("__JHASH__M7osj0aoSaL__JHASH__"),maxLength:50,onChange:b,placeholder:h._("__JHASH__Ao4BEMABb3X__JHASH__"),suppressFocusRing:!0,unresizable:!0,value:a,xstyle:l.textarea}),k.jsx(c("CometPlaceholder.react"),{fallback:null,children:k.jsx("div",{className:"x1gryazu xkrivgy x1l90r2v",children:k.jsx(m,{})})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("RollCallPromptType",[],(function(a,b,c,d,e,f){a=Object.freeze({MEDIA:0,TEXT:1,LINK:2});f["default"]=a}),66);
__d("MWChatPromptFlyout.react",["fbt","CometFileSelector.react","LsFalcoEventEntryPoint","MWChatPromptFlyoutBackCard.react","MWChatPromptFlyoutFrontCard.react","MWXButton.react","MWXText.react","MessageSendClickFalcoEvent","RollCallPromptType","fileInputAcceptValues","react","recoverableViolation"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useRef,l=b.useState,m=26214400;function a(a){var b,e=a.initialFile,f=a.onSubmit;a=l("");var g=a[0],i=a[1];a=l(e!=null?URL.createObjectURL(e):null);var n=a[0],o=a[1],p=k((a=e)!=null?a:void 0);e=l(!1);a=e[0];var q=e[1];e=function(a){a=a[0];if(!a)return;a.size>=m?q(!0):(o(URL.createObjectURL(a)),q(!1),p.current=a)};var r=function(){c("MessageSendClickFalcoEvent").log(function(){return{message_send_source:{entry_point:d("LsFalcoEventEntryPoint").composer}}}),p.current&&n!==null?f(g,c("RollCallPromptType").MEDIA,p.current,n):c("recoverableViolation")("Missing File","messenger_web_product")};return j.jsxs("div",{className:"x6s0dn4 x9f619 x78zum5 xdt5ytf x13hwc6b xyamay9 x1pi30zi x1l90r2v x1swvt13 x1m258z3",children:[j.jsx("div",{className:"xbaz6xv",children:j.jsx(c("MWXText.react"),{type:"headlineEmphasized4",children:h._("__JHASH__ALK-qDDamkT__JHASH__")})}),j.jsxs("div",{className:"x1n2onr6",children:[j.jsx(c("MWChatPromptFlyoutBackCard.react"),{isVideo:(b=(b=p.current)==null?void 0:(b=b.type)==null?void 0:b.startsWith("video/"))!=null?b:!1,previewUrl:n}),j.jsx(c("MWChatPromptFlyoutFrontCard.react"),{onChange:function(a){i(a.target.value)},value:g})]}),j.jsx("div",{className:"xyamay9 x1l90r2v x2b8uid",children:j.jsx(c("MWXText.react"),{type:"meta4",children:h._("__JHASH__oEdtqK8h88D__JHASH__")})}),a?j.jsx("div",{className:"x1l90r2v x2b8uid",children:j.jsx(c("MWXText.react"),{color:"negative",type:"meta4",children:h._("__JHASH__BNDx1mX2nlz__JHASH__")})}):null,n===null?j.jsx(c("CometFileSelector.react"),{accept:d("fileInputAcceptValues").PHOTO_AND_VIDEO,onFilesSelected:e,children:function(a){return j.jsx(c("MWXButton.react"),{label:h._("__JHASH__YLEewsPX1Ff__JHASH__"),onPress:a})}}):j.jsx(c("MWXButton.react"),{disabled:g.trim()==="",label:h._("__JHASH__racSmevYoYZ__JHASH__"),onPress:r})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPAnimatedImageFlyoutRoot.react",["fbt","CometAnimatedImagePickerSearchResult.react","CometErrorBoundary.react","CometPickerNullState.react","CometPickerScrollableArea.react","CookieConsent","NullStateMedia","NullStatePermissions","Promise","promiseDone","react","useDebouncedValue"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=k||(k=d("react"));e=k;var m=e.useEffect,n=e.useRef,o=e.useState,p=40,q="GXAMGSNCXJGN",r="374882289330575",s="US",t="moderate",u="true",v="en_US";function w(a,b){var c=Boolean(a)?"search":"trending";a={fbcountry:s,key:q,limit:p.toString(),locale:v,searchsearch:t,ssl:u,tag:(a=a)!=null?a:""};a=Object.entries(a).map(function(a){var b=a[0];a=a[1];return encodeURIComponent(b)+"="+encodeURIComponent(a)}).join("&");c="https://api1.tenor.co/v1/"+c+"?"+a;return window.fetch(c,{signal:b==null?void 0:b.signal}).then(function(a){return a.json()})}function x(a,b){var c,d,e,f,g;b===void 0&&(b="");c=(c=a.id)!=null?c:"";d=(d=(d=a.media)==null?void 0:d[0])!=null?d:{};var h="image/gif";d=(d=d.gif)!=null?d:{};e=(e=d.size)!=null?e:0;var i=a.content_description;f=(f=d.dims)!=null?f:[0,0];var j=f[0];f=f[1];g=(g=d.duration)!=null?g:0;return!Boolean(d)||!Boolean(d.url)||!Boolean(j)||!Boolean(f)?null:{cursor:b,media:{preview:{durationMs:g,height:f,label:i,sizeBytes:e,url:(b=d.preview)!=null?b:"",width:j}},platformFBID:r,resultID:c,source:{durationMs:g,gifSource:"TENOR",height:f,mimeType:h,sizeBytes:e,tags:a.tags,title:(i=a.title)!=null?i:"",url:(b=d.url)!=null?b:"",width:j},type:1}}function y(a){a=a.searchQuery;var d=c("useDebouncedValue")((a=a)!=null?a:"",200);a=o([]);var e=a[0],f=a[1];a=o(!1);var g=a[0],h=a[1],i=n((j||(j=b("Promise"))).resolve());m(function(){var a=!1,b=new AbortController(),e=w(d,b);i.current=e;h(!0);c("promiseDone")(e,function(c){if(a)return;b=null;c=c.results.map(function(a){return x(a,d)}).filter(function(a){return Boolean(a)});h(!1);f(c)},function(c){if(a)return;h(!1);b=null});return function(){var c;a=!0;(c=b)==null?void 0:c.abort()}},[d]);return{isLoading:g,promise:i.current,results:e}}function a(a){var b=a.cookieContentForm;a.mediaHeight;var d=a.mediaWidth,e=a.onSelect;a.searchInterface;var f=a.searchQuery;a=a.xstyle;var g=y({searchQuery:f}),j=g.isLoading,k=g.promise;g=g.results;if(j)throw k;if(!Boolean(g)||g.length===0)if(!(i||(i=c("CookieConsent"))).hasConsent(2))return l.jsx(c("CometPickerNullState.react"),{body:h._("__JHASH__ufn5hj5_DrN__JHASH__",[h._param("3rd party cookies",b)]),icon:c("NullStatePermissions")});else return l.jsx(c("CometPickerNullState.react"),{body:h._("__JHASH__bYIInJEnbol__JHASH__"),icon:c("NullStateMedia")});j=g.map(function(a){return l.jsx(c("CometAnimatedImagePickerSearchResult.react"),{desiredWidth:d,image:a,onSelect:e},a.resultID)});return l.jsx(c("CometErrorBoundary.react"),{children:l.jsx(c("CometPickerScrollableArea.react"),{horizontal:!1,scrollKey:f,xstyle:a,children:j})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("TetraMWChatComposerOverflowIcons.react",["MWChatChatButtonColorConstants","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={icon:{display:"x1lliihq",$$css:!0}};a=function(a){var b=a.fill,e=a.size,f=a.title;a=a.xstyle;a=a===void 0?!1:a;return j.jsxs("svg",{className:(h||(h=c("stylex")))(k.icon,d("MWChatChatButtonColorConstants").styles.fillGrey,a),height:e.toString()+"px",viewBox:"0 0 40 42",width:e.toString()+"px",children:[j.jsx("title",{children:f}),j.jsx("rect",{fill:b,height:"7",rx:"2",transform:"rotate(-90 4.5 30.5)",width:"29",x:"-6.5",y:"26.5"}),j.jsx("rect",{fill:b,height:"7",rx:"2",transform:"rotate(-90 20.5 24.5)",width:"41",x:"3.5",y:"20.5"}),j.jsx("rect",{fill:b,height:"7",rx:"2",transform:"rotate(-90 36.5 35.5)",width:"19",x:"30.5",y:"31.5"})]})};b=function(a){var b=a.fill,e=a.size,f=a.title;a=a.xstyle;a=a===void 0?!1:a;return j.jsxs("svg",{className:(h||(h=c("stylex")))(k.icon,d("MWChatChatButtonColorConstants").styles.fillGrey,a),height:String(e)+"px",viewBox:"0 0 46 46",width:String(e)+"px",children:[j.jsx("title",{children:f}),j.jsx("path",{d:"M18 17.54v.92c0 1.79 1.75 3.26 4 3.49v-7.9c-2.25.23-4 1.7-4 3.49zM26 26.2v7.6c2.13-.5 4-1.94 4-3.34v-.92c0-1.4-1.87-2.84-4-3.34z",fill:b,transform:"translate(-1 -1)"}),j.jsx("path",{d:"M24 1a23 23 0 1023 23A23 23 0 0024 1zm10 29.46c0 3.95-4 6.83-8 7.42V40a2 2 0 01-4 0v-2.06c-4.43-.3-7.94-3.52-7.94-7.48a2 2 0 014 0c0 1.78 1.72 3.24 3.94 3.49V26c-4.46-.28-8-3.51-8-7.49v-.92c0-4 3.54-7.21 8-7.49V8a2 2 0 014 0v2.13c4 .63 7.09 3.71 7.09 7.41a2 2 0 01-4 0A3.74 3.74 0 0026 14.21v7.91c4 .59 8 3.47 8 7.42z",fill:b,transform:"translate(-1 -1)"})]})};e=function(a){var b=a.fill,e=a.size;a=a.title;return j.jsxs("svg",{className:(h||(h=c("stylex")))(k.icon,d("MWChatChatButtonColorConstants").styles.fillGrey,d("MWChatChatButtonColorConstants").styles.strokeGrey),height:e.toString()+"px",viewBox:"0 0 34 48",width:e.toString()+"px",children:[j.jsx("title",{children:a}),j.jsx("path",{d:"M17 37v9",fill:"none",stroke:b,strokeLinejoin:"round",strokeWidth:"4"}),j.jsx("path",{d:"M10 46h14",fill:"none",stroke:b,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4px"}),j.jsx("path",{d:"M39 20v3.5A14.5 14.5 0 0124.5 38h-1A14.5 14.5 0 019 23.5V20",fill:"none",stroke:b,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4px",transform:"translate(-7)"}),j.jsx("rect",{fill:b,height:"28",rx:"6.5",stroke:b,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4",width:"14",x:"10",y:"2"})]})};g.PollsSVG=a;g.DollarSignSVG=b;g.MicrophoneSVG=e}),98);
__d("useMWCreatePoll",["LSFactory","LSIssuePollCreationForThreadTaskStoredProcedure","LSVec","emptyFunction","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useCallback;function a(){var a=(h||(h=c("useReStore")))();return j(function(b,d,e,f,g){c("promiseDone")(a.runInTransaction(function(a){return c("LSIssuePollCreationForThreadTaskStoredProcedure")(c("LSFactory")(a),{options:c("LSVec").ofArray(e),questionText:d,threadKey:b})},"readwrite"),(f=f)!=null?f:c("emptyFunction"),(f=g)!=null?f:c("emptyFunction"))},[a])}g["default"]=a}),98);
__d("useMWGroupStartNewPollLogger",["I64","Int64Hooks","MWGroupPollLoggerDeferred","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return d("Int64Hooks").useCallbackInt64(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){yield d("MWGroupPollLoggerDeferred").log("start_new_poll",{poll:{entry_point:b,poll_type:void 0,question_id:void 0,thread_id:(h||(h=d("I64"))).to_string(a)}})});return function(a){return c.apply(this,arguments)}}(),[a])}g["default"]=a}),98);
__d("useMWGroupSubmitNewPollLogger",["I64","Int64Hooks","MWGroupPollLoggerDeferred","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return d("Int64Hooks").useCallbackInt64(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,c){yield d("MWGroupPollLoggerDeferred").log("submit_new_poll",{poll:{entry_point:b,options_added:c.toString(),poll_type:void 0,question_id:void 0,thread_id:(h||(h=d("I64"))).to_string(a)}})});return function(a,b){return c.apply(this,arguments)}}(),[a])}g["default"]=a}),98);
__d("MWChatComposerP2PPaymentEligibility",["CometRelay","MWChatComposerP2PPaymentEligibilityQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return d("CometRelay").useLazyLoadQuery(h!==void 0?h:h=b("MWChatComposerP2PPaymentEligibilityQuery.graphql"),a)}g.useQuery=a}),98);
__d("MWPromptCreationUtils",["I64","LSAuthorityLevel","LSFactory","LSIntEnum","LSLocalApplyOptimisticMessageWithAttachmentsV2StoredProcedure","LSMessagingThreadAttributionType","LSOptimisticCreateRollCallStoredProcedure","LSShape","LSVec","MWXMAAttachmentSharedStackConstants","MessagingAttachmentType","OfflineThreadingId","Promise","ReQL","XComposerPhotoUploader"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,e,f,g){return new(j||(j=b("Promise")))(function(b,j){a.runInTransaction(function(a){return c("LSOptimisticCreateRollCallStoredProcedure")(c("LSFactory")(a),{prompt:f,promptType:(h||(h=d("LSIntEnum"))).ofNumber(g),threadKey:e})},"readwrite").then(function(e){var f=e[0],g=d("ReQL").fromTableAscending(a.table("roll_calls")).subscribe(function(a,e){if(e.operation==="add"||e.operation==="put"){a=e.value.offlineThreadingId;var h=(i||(i=d("I64"))).to_int32(e.value.authorityLevel)>=c("LSAuthorityLevel").AUTHORITATIVE;h&&a!=null&&(i||(i=d("I64"))).equal(a,f)&&(g(),b(e.value.rollCallId))}})})["catch"](function(a){j(a)})})}function e(a,b,e,f,g,j,k){var l=d("OfflineThreadingId").createOfflineThreadingID(),m=k.startsWith("video/");return a.runInTransaction(function(a){return c("LSLocalApplyOptimisticMessageWithAttachmentsV2StoredProcedure")(c("LSFactory")(a),{extraSendMessageParams:d("LSShape").ofRecord({attachments:c("LSVec").ofArray([d("LSShape").ofRecord({attachment_fbid:l,attachment_index:(i||(i=d("I64"))).zero,attachment_type:(h||(h=d("LSIntEnum"))).ofNumber(m?c("MessagingAttachmentType").VIDEO:c("MessagingAttachmentType").IMAGE),has_media:!0,has_xma:!0,offline_attachment_id:l,playable_url:m?j:void 0,preview_height:i.of_float(d("MWXMAAttachmentSharedStackConstants").STACK_ITEM_HEIGHT),preview_url:m?void 0:j,preview_url_mime_type:m?void 0:k,preview_width:i.of_float(d("MWXMAAttachmentSharedStackConstants").STACK_ITEM_WIDTH)})]),product_fbid:i.to_string(f),product_type:"roll_call",source:h.ofNumber(c("LSMessagingThreadAttributionType").ROLLCALL)}),senderId:b,text:g,threadKey:e.threadKey,threadType:e.threadType})},"readwrite").then(function(a){a=a[0];return a})}function f(a,b,e,f){var g=d("OfflineThreadingId").createOfflineThreadingID();a=a;a.uploadID=g;var h=new(c("XComposerPhotoUploader"))({onUploadFailure:function(a,b){},onUploadSuccess:function(a,b){},uploadEndpoint:"/messenger/upload_roll_call/"});h.getAsyncFileUploadRequest([a],[g],{data:{message_otid:e,roll_call_id:(i||(i=d("I64"))).to_string(b),thread_id:f}}).send()}g.createAuthoritiativeRollCall=a;g.createOptimisticRollCallMessage=e;g.startRollCallMediaUpload=f}),98);
__d("MWV2ComposerFileMenuItem.react",["fbt","CometFileSelector.react","MWChatComposerIcons","MWXIcon.react","MWXListCellPressable.react","MWXTextPairing.react","react","useMWV2ComposerOnFilesSelected"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useCallback,l=h._("__JHASH__irWVZkNfl97__JHASH__");function a(a){var b=a.color,e=a.onAttachmentsAdded,f=a.onClose;a=a.supportedFileTypes;var g=c("useMWV2ComposerOnFilesSelected")(e);e=function(a){f();return g(a)};var h=k(function(){return j.jsx(d("MWChatComposerIcons").MWChatComposerIconsPhoto,{fill:b,size:20})},[b]);return j.jsx(c("CometFileSelector.react"),{accept:a,multiple:!0,onFilesSelected:e,children:function(a){return j.jsx(c("MWXListCellPressable.react"),{addOnStart:j.jsx(c("MWXIcon.react"),{icon:h}),addOnStartVerticalAlign:"center",content:j.jsx(c("MWXTextPairing.react"),{headline:l,level:4}),onPress:function(){return a()},role:"menuitem"})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ComposerGifMenuItem.react",["fbt","MWChatAnimatedImageFlyout.react","MWChatComposerIcons","MWXIcon.react","MWXListCellPressable.react","MWXTextPairing.react","react","useMWV2ComposerOnGifSelect"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useCallback,l=h._("__JHASH__J6q-Bfr0oTE__JHASH__");function a(a){var b=a.color,e=a.onClose,f=a.onSendMessage,g=a.pushPage,h=c("useMWV2ComposerOnGifSelect")(f);a=function(){return g(function(){return j.jsx(c("MWChatAnimatedImageFlyout.react"),{onClose:e,onSelect:h})})};f=k(function(){return j.jsx(d("MWChatComposerIcons").MWChatComposerIconsGif,{fill:b,size:20})},[b]);return j.jsx(c("MWXListCellPressable.react"),{addOnStart:j.jsx(c("MWXIcon.react"),{icon:f}),addOnStartVerticalAlign:"center",content:j.jsx(c("MWXTextPairing.react"),{headline:l,level:4}),onPress:a,role:"menuitem"})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ComposerP2P.entrypoint",["JSResourceForInteraction","MWChatComposerP2PPopoverQuery$Parameters"],(function(a,b,c,d,e,f,g){a={getPreloadProps:function(a){return{queries:{rootQuery:{parameters:c("MWChatComposerP2PPopoverQuery$Parameters"),variables:{}}}}},root:c("JSResourceForInteraction")("MWChatComposerP2PPopover.react").__setRef("MWV2ComposerP2P.entrypoint")};b=a;g["default"]=b}),98);
__d("MWV2ComposerPaymentMenuItem.react",["fbt","I64","LSIntEnum","MWChatComposerOverflowIcons","MWChatComposerP2PPaymentEligibility","MWPActor.react","MWV2ComposerP2P.entrypoint","MWXIcon.react","MWXListCellPressable.react","MWXTextPairing.react","MWXTooltip.react","ReQL","ReQLSuspense","SVGIcon","react","react-relay/relay-hooks/LazyLoadEntryPointContainer_DEPRECATED.react","useCometRelayEntrypointContextualEnvironmentProvider","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=l||d("react"),n=h._("__JHASH__ZfTcnFD1LsY__JHASH__"),o=h._("__JHASH__wXK5vs8tfga__JHASH__");function a(a){var b=a.color,e=a.onClose,g=a.pushPage,l=a.thread,p=(i||(i=c("useReStore")))();a=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(p.table("participants"),["contactId"]).getKeyRange(l.threadKey)},[p,l.threadKey],f.id+":50");var q=d("MWPActor.react").useActor(),r=a.filter(function(a){return!(j||(j=d("I64"))).equal(a.contactId,q)}).map(function(a){return(j||(j=d("I64"))).to_string(a.contactId)});a=d("MWChatComposerP2PPaymentEligibility").useQuery({fbids:r});a=a.viewer;var s=a==null?void 0:(a=a.peer_to_peer_payments)==null?void 0:a.can_send_to;a=s!=null?s[0]:void 0;var t=c("useCometRelayEntrypointContextualEnvironmentProvider")(),u=(j||(j=d("I64"))).equal(l.threadType,(k||(k=d("LSIntEnum"))).ofNumber(2)),v=j.equal(l.threadType,k.ofNumber(5)),w=r.length===1?r[0]:void 0,x=function(){var a={closeActionTray:e,eligibility:s,isGroupThread:u,isMarketPlaceThread:v,onClose:e,otherUserFbid:w,threadFbid:(j||(j=d("I64"))).to_string(l.threadKey),threadOtherUsers:r,withPopover:!1};return g(function(){return m.jsx(c("react-relay/relay-hooks/LazyLoadEntryPointContainer_DEPRECATED.react"),{entryPoint:c("MWV2ComposerP2P.entrypoint"),entryPointParams:{},environmentProvider:t,props:a})})};if(a==null)return null;var y,z=n;if(u)v&&(z=o);else if(Boolean(a.is_eligible)===!1){y=(a=a.exception)==null?void 0:a.description}var A=y!=null;a=function(){return m.jsx(d("MWChatComposerOverflowIcons").MWChatComposerOverflowIconsDollarSignSVG,{fill:A?void 0:b,size:20})};a=m.jsx(c("MWXListCellPressable.react"),{addOnStart:m.jsx(c("MWXIcon.react"),{icon:d("SVGIcon").legacySVGIcon(a)}),addOnStartVerticalAlign:"center",content:m.jsx(c("MWXTextPairing.react"),{headline:z,headlineColor:A?"disabled":"primary",level:4}),disabled:A,onPress:x,role:"menuitem"});if(A){return m.jsx(c("MWXTooltip.react"),{label:(z=y)!=null?z:h._("__JHASH__Vxc5UE20Yrh__JHASH__"),position:"above",tooltip:y,children:a})}else return a}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ComposerPollButton.react",["fbt","LsFalcoEventEntryPoint","MWChatComposerOverflowIcons","MWChatPollFlyout.react","MWGroupPollQPL","MWXIcon.react","MWXListCellPressable.react","MWXTextPairing.react","MessageSendClickFalcoEvent","MessengerWebUXLogger","SVGIcon","emptyFunction","promiseDone","react","useMWCreatePoll","useMWGroupNewPollSubmitErrorLogger","useMWGroupStartNewPollLogger","useMWGroupSubmitNewPollLogger"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=h._("__JHASH__YANDQDfyQrm__JHASH__");function a(a){var b=a.color,e=a.onClose,f=a.pushPage,g=a.thread,h=c("MessengerWebUXLogger")==null?void 0:c("MessengerWebUXLogger").useInteractionLogger(),i=c("useMWGroupStartNewPollLogger")(g.threadKey),l=c("useMWGroupSubmitNewPollLogger")(g.threadKey),m=d("MWGroupPollQPL").useLogCreatePollFail(g.threadKey),n=c("useMWGroupNewPollSubmitErrorLogger")(g.threadKey),o=d("MWGroupPollQPL").useLogCreatePollStart(g.threadKey),p=c("useMWCreatePoll")();a=function(){h==null?void 0:h({eventName:"composer_open_create_poll_flyout"}),o(),c("promiseDone")(i(4)),f(function(){return j.jsx(c("MWChatPollFlyout.react"),{onClose:e,onPollCreate:function(a,b){p(g.threadKey,a,b,c("emptyFunction"),function(a){m(),c("promiseDone")(n(4,a))}),c("promiseDone")(l(4,b.length)),c("MessageSendClickFalcoEvent").log(function(){return{message_send_source:{entry_point:d("LsFalcoEventEntryPoint").composer}}})},thread:g,withPopover:!1})})};var q=function(){return j.jsx(d("MWChatComposerOverflowIcons").MWChatComposerOverflowIconsPollsSVG,{fill:b,size:20})};return j.jsx(c("MWXListCellPressable.react"),{addOnStart:j.jsx(c("MWXIcon.react"),{icon:d("SVGIcon").legacySVGIcon(q)}),addOnStartVerticalAlign:"center",content:j.jsx(c("MWXTextPairing.react"),{headline:k,level:4}),onPress:a,role:"menuitem"})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ComposerPromptButton.react",["fbt","CometRelay","I64","JSResourceForInteraction","MWChatComposerRollCallIcon.react","MWChatPromptFlyout.react","MWDidQueryPromptsNux","MWPActor.react","MWPromptCreationUtils","MWV2ComposerPromptButtonQuery.graphql","MWXIcon.react","MWXListCellPressable.react","MWXTextPairing.react","MessengerWebUXLogger","SVGIcon","cometPushToast","promiseDone","react","useMWXLazyDialog","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=l||d("react"),n=c("JSResourceForInteraction")("MWCommunityMessagingPromptsNUXQuickPromotion.react").__setRef("MWV2ComposerPromptButton.react");function o(){var a=d("CometRelay").useRelayEnvironment();return function(){return d("CometRelay").fetchQuery(a,i!==void 0?i:i=b("MWV2ComposerPromptButtonQuery.graphql"),{}).toPromise()}}function a(a){var b=a.color,e=a.onClose,f=a.pushPage,g=a.thread,i=c("MessengerWebUXLogger")==null?void 0:c("MessengerWebUXLogger").useInteractionLogger(),l=(j||(j=c("useReStore")))(),p=d("MWPActor.react").useActor(),q=function(a,b,c,f){d("MWPromptCreationUtils").createAuthoritiativeRollCall(l,g.threadKey,a,b).then(function(b){return d("MWPromptCreationUtils").createOptimisticRollCallMessage(l,p,g,b,a,f,c.type).then(function(a){d("MWPromptCreationUtils").startRollCallMediaUpload(c,b,a,(k||(k=d("I64"))).to_string(g.threadKey))})})["catch"](function(){return d("cometPushToast").cometPushErrorToast({message:h._("__JHASH___58Ig9CWslh__JHASH__")})}),e()},r=o();a=c("useMWXLazyDialog")(n);var s=a[0];a=function(){i==null?void 0:i({eventName:"composer_open_create_prompt_flyout"}),f(function(){return m.jsx(c("MWChatPromptFlyout.react"),{onSubmit:q})}),d("MWDidQueryPromptsNux").getDidQueryPromptsNux()||(d("MWDidQueryPromptsNux").markDidQueryPromptsNux(),c("promiseDone")(r(),function(a){a=a==null?void 0:(a=a.viewer)==null?void 0:(a=a.eligible_promotions)==null?void 0:(a=a.nodes)==null?void 0:(a=a.find(function(a){return((a=a.comet_qp_sections)==null?void 0:a.renderer_strategy)!=null}))==null?void 0:(a=a.comet_qp_sections)==null?void 0:a.renderer_strategy;a&&s({asCreator:!0,rendererStrategy:a})}))};var t=function(){return m.jsx(c("MWChatComposerRollCallIcon.react"),{fill:b,size:20})};return m.jsx(c("MWXListCellPressable.react"),{addOnStart:m.jsx(c("MWXIcon.react"),{icon:d("SVGIcon").legacySVGIcon(t)}),addOnStartVerticalAlign:"center",content:m.jsx(c("MWXTextPairing.react"),{headline:h._("__JHASH__HlC08Cr4XB6__JHASH__"),level:4}),onPress:a,role:"menuitem"})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ComposerStickerMenuItem.react",["cr:1385","react"],(function(a,b,c,d,e,f,g){"use strict";var h;h||d("react");g["default"]=b("cr:1385")}),98);
__d("MWV2ComposerVoiceClipButton.react",["fbt","MWChatComposerOverflowIcons","MWXIcon.react","MWXListCellPressable.react","MWXTextPairing.react","MessengerWebUXLogger","SVGIcon","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=h._("__JHASH__Cn3aSQ9nsyA__JHASH__");function a(a){var b=a.color,e=a.onPress;a=function(){return j.jsx(d("MWChatComposerOverflowIcons").MWChatComposerOverflowIconsMicrophoneSVG,{fill:b,size:20})};var f=c("MessengerWebUXLogger")==null?void 0:c("MessengerWebUXLogger").useInteractionLogger();return j.jsx(c("MWXListCellPressable.react"),{addOnStart:j.jsx(c("MWXIcon.react"),{icon:d("SVGIcon").legacySVGIcon(a)}),addOnStartVerticalAlign:"center",content:j.jsx(c("MWXTextPairing.react"),{headline:k,level:4}),onPress:function(){e(),f==null?void 0:f({eventName:"composer_record_voice_clip"})},role:"menuitem"})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ComposerOverflowMenu.react",["fbt","BaseMultiStepContainer.react","CometErrorBoundary.react","FocusGroup.react","LSMessagingThreadTypeUtil","MWV2ComposerFileMenuItem.react","MWV2ComposerGifMenuItem.react","MWV2ComposerPaymentMenuItem.react","MWV2ComposerPollButton.react","MWV2ComposerPromptButton.react","MWV2ComposerStickerMenuItem.react","MWV2ComposerVoiceClipButton.react","MWXPopover.react","MessengerWebUXLogger","ReQL","ReQLSuspense","WebUXLoggingSurfaceContextProvider","cr:4194","cr:6140","focusScopeQueries","isStickerEnabled","react","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||d("react");e=d("FocusGroup.react").createFocusGroup(d("focusScopeQueries").tabbableScopeQuery);var l=e[0],m=e[1];function n(a){var e=a.pushPage,f=a.thread;a=babelHelpers.objectWithoutPropertiesLoose(a,["pushPage","thread"]);var g=a.color,h=a.editor,i=a.extraItems,j=a.onAttachmentsAdded,n=a.onClose,o=a.onPressVoiceClip,p=a.onSendMessage,q=a.showCreatePoll,r=a.showCreatePrompt,s=a.showFile,t=a.showGenAICreate,u=a.showGenAICreateVideo,v=a.showGif,w=a.showPayment,x=a.showSendVoiceClip,y=a.showSticker;a=a.supportedFileTypes;var z=c("isStickerEnabled")()&&d("LSMessagingThreadTypeUtil").isSecure(f.threadType),A=c("MessengerWebUXLogger")==null?void 0:c("MessengerWebUXLogger").useImpressionLoggerRef({eventName:"composer_show_overflow_menu"});return k.jsx("div",{className:"x1jzhcrs x1iorvi4 x150jy0e xjkvuk6 x1e558r4 xuxw1ft",ref:A,role:"menu",children:k.jsxs(l,{orientation:"vertical",tabScopeQuery:d("focusScopeQueries").tabbableScopeQuery,wrap:!0,children:[i.map(function(a,b){return k.jsx(m,{children:a},String(b))}),w?k.jsx(m,{children:k.jsx(c("MWV2ComposerPaymentMenuItem.react"),{color:g,onClose:n,pushPage:e,thread:f})}):null,r?k.jsx(m,{children:k.jsx(c("MWV2ComposerPromptButton.react"),{color:g,onClose:n,pushPage:e,thread:f})}):null,q?k.jsx(m,{children:k.jsx(c("MWV2ComposerPollButton.react"),{color:g,onClose:n,pushPage:e,thread:f})}):null,x?k.jsx(m,{children:k.jsx(c("MWV2ComposerVoiceClipButton.react"),{color:g,onPress:o})}):null,t&&b("cr:6140")!=null?k.jsx(m,{children:k.jsx(b("cr:6140"),{color:g,editor:h,onAttachmentsAdded:function(a){n();return j(a)}})}):null,u&&b("cr:4194")!=null?k.jsx(m,{children:k.jsx(b("cr:4194"),{color:g,editor:h,onAttachmentsAdded:function(a){n();return j(a)}})}):null,y?k.jsx(m,{children:k.jsx(c("MWV2ComposerStickerMenuItem.react"),{color:g,onClose:n,onSendMessage:p,pushPage:e,useSecureSend:z})}):null,v?k.jsx(m,{children:k.jsx(c("MWV2ComposerGifMenuItem.react"),{color:g,onClose:n,onSendMessage:p,pushPage:e})}):null,s?k.jsx(m,{children:k.jsx(c("MWV2ComposerFileMenuItem.react"),{color:g,onAttachmentsAdded:j,onClose:n,supportedFileTypes:a})}):null]})})}n.displayName=n.name+" [from "+f.id+"]";function a(a){var b=a.threadKey;a=babelHelpers.objectWithoutPropertiesLoose(a,["threadKey"]);var e=a.color,g=a.editor,j=a.extraItems,l=a.onAttachmentsAdded,m=a.onClose,o=a.onPressVoiceClip,p=a.onSendMessage,q=a.showCreatePoll,r=a.showCreatePrompt,s=a.showFile,t=a.showGenAICreate,u=a.showGenAICreateVideo,v=a.showGif,w=a.showPayment,x=a.showSendVoiceClip,y=a.showSticker,z=a.supportedFileTypes,A=(i||(i=c("useReStore")))(),B=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(A.table("threads")).getKeyRange(b)},[A,b],f.id+":249");return k.jsx(c("CometErrorBoundary.react"),{children:k.jsx(d("WebUXLoggingSurfaceContextProvider").WebUXLoggingSurfaceContextProvider,{value:"composer_overflow_menu",children:k.jsx(c("MWXPopover.react"),{label:h._("__JHASH__76y6Ps_E8h7__JHASH__"),withArrow:!0,children:B!=null?k.jsx(c("BaseMultiStepContainer.react"),{fitContentWidth:!0,children:function(a){return k.jsx(n,{color:e,editor:g,extraItems:j,onAttachmentsAdded:l,onClose:m,onPressVoiceClip:function(){m();return o()},onSendMessage:p,pushPage:a,showCreatePoll:q,showCreatePrompt:r,showFile:s,showGenAICreate:t,showGenAICreateVideo:u,showGif:v,showPayment:w,showSendVoiceClip:x,showSticker:y,supportedFileTypes:z,thread:B})}}):null})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ComposerStickerMenuItemLegacy.react",["MWChatComposerIcons","MWChatStickersFlyout.react","MWV2ComposerStickerCommon","MWXIcon.react","MWXListCellPressable.react","MWXTextPairing.react","react","useMWV2ComposerOnStickerSelect"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useCallback;function a(a){var b=a.color,e=a.onClose,f=a.onSendMessage,g=a.pushPage,h=a.useSecureSend,k=c("useMWV2ComposerOnStickerSelect")(f,h);a=function(){return g(function(){return i.jsx(c("MWChatStickersFlyout.react"),{className:"x1fepime",onClose:e,onStickerSelect:k,shouldAlwaysShowAvatarPack:h,shouldHideDefaultPacks:h,withArrow:!1,withPopover:!0})})};f=j(function(){return i.jsx(d("MWChatComposerIcons").MWChatComposerIconsSticker,{fill:b,size:20})},[b]);return i.jsx(c("MWXListCellPressable.react"),{addOnStart:i.jsx(c("MWXIcon.react"),{icon:f}),addOnStartVerticalAlign:"center",content:i.jsx(c("MWXTextPairing.react"),{headline:d("MWV2ComposerStickerCommon").LABEL,level:4}),onPress:a,role:"menuitem"})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("LSFetchPollDetails",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return d[0]=new c.Map(),d[0].set("poll_id",a[0]),d[1]=c.toJSON(d[0]),c.sp(b("LSIssueNewTask"),"fetch_community_chat_poll_detail",c.i64.cast([0,545]),d[1],f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),f,f,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSFetchPollDetailsStoredProcedure",["LSFetchPollDetails"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.pollId;return c("LSFetchPollDetails").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSIssueCommunityChatPollVotersFetch",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(b){return c.db.table(244).fetch([[[a[0],a[1]]]]).next().then(function(b,d){var e=b.done;b=b.value;return e?c.db.table(244).add({minTimestampMs:c.i64.cast([2147483647,4294967295]),optionId:a[1],pollId:a[0],hasMoreAfter:!1,hasMoreBefore:!1,isLoadingAfter:!1,isLoadingBefore:!0,maxTimestampMs:c.i64.cast([2147483647,4294967295]),nextPageCursor:""}):(d=b.item,c.fe(c.db.table(244).fetch([[[d.pollId,d.optionId,d.minTimestampMs]]]),function(a){var b=a.update;a.item;return b({isLoadingBefore:!0})}))})},function(e){return d[1]=new c.Map(),d[1].set("poll_id",a[0]),d[1].set("option_id",a[1]),d[1].set("next_page_cursor",a[2]),d[2]=c.toJSON(d[1]),c.sp(b("LSIssueNewTask"),"fetch_community_chat_poll votes",c.i64.cast([0,546]),d[2],f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),f,f,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSIssueCommunityChatPollVotersFetchStoredProcedure",["LSIssueCommunityChatPollVotersFetch"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.pollId;d[1]=b.optionId;d[2]=b.nextPageCursor;return c("LSIssueCommunityChatPollVotersFetch").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSIssuePollUpdateForThread",["LSIssueNewTaskWithExtraOperations"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[5]=b.syncGroup,c.i64.neq(d[5],f)?d[4]=d[5]:d[4]=c.i64.cast([0,1]),d[0]=d[4])})},function(e){return d[2]=new c.Map(),d[2].set("thread_key",a[0]),d[2].set("poll_id",a[1]),d[2].set("added_options",a[2]),d[2].set("selected_options",a[3]),d[2].set("sync_group",d[0]),d[3]=c.toJSON(d[2]),c.sp(b("LSIssueNewTaskWithExtraOperations"),"poll_update",c.i64.cast([0,164]),d[3],f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),f,f,c.i64.cast([0,0]),f,c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSIssuePollUpdateForThreadStoredProcedure",["LSIssuePollUpdateForThread"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.threadKey;d[1]=b.pollId;d[2]=b.addedOptions;d[3]=b.selectedOptions;return c("LSIssuePollUpdateForThread").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("MWCommunityMessagingProfilePictureUtil",["I64","ServerTime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){if(a==null)return!1;var b=(h||(h=d("I64"))).of_float(d("ServerTime").getMillis()/1e3);return a!=null&&(h||(h=d("I64"))).gt(a,(h||(h=d("I64"))).zero)&&(h||(h=d("I64"))).lt(a,b)}function a(a,b,c){if(i(b)||a==null)return c;else return a}function b(){return"/images/chat/webrtc/no_profile_pic.png"}g.getProfilePictureUrl=a;g.getFallbackProfilePictureUrl=b}),98);
__d("useMWGetPollVoters",["I64","MWCommunityMessagingProfilePictureUtil","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b,e){var g=(i||(i=c("useReStore")))(),j=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableDescending(g.table("community_chat_poll_votes")).getKeyRange(a,b).filter(function(a){return(e==null?void 0:e.minTimestampMs)==null||(h||(h=d("I64"))).equal(a.timestampMs,(h||(h=d("I64"))).zero)||(h||(h=d("I64"))).ge(a.timestampMs,e==null?void 0:e.minTimestampMs)}).map(function(a){var b=a.contactId,c=a.fullName,e=a.profilePictureFallbackUrl,f=a.profilePictureUrl,g=a.profilePictureUrlExpirationTimestampMs,h=a.secondaryName;a=a.timestampMs;f=d("MWCommunityMessagingProfilePictureUtil").getProfilePictureUrl(f,g,e);return{contactId:b,fullName:(g=c)!=null?g:"",profilePictureUrl:(e=f)!=null?e:d("MWCommunityMessagingProfilePictureUtil").getFallbackProfilePictureUrl(),secondaryName:h,timestampMs:a}})},[g,b,a,e==null?void 0:e.minTimestampMs],f.id+":42").sort(function(a,b){return(h||(h=d("I64"))).to_int32(b.timestampMs)-h.to_int32(a.timestampMs)});return j}g["default"]=a}),98);
__d("useMWGetPollVotesRanges",["ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){var e=(h||(h=c("useReStore")))(),g=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.table("community_chat_poll_votes_ranges_v2__generated")).getKeyRange(a,b)},[e,a,b],f.id+":24");return g}g["default"]=a}),98);
__d("MWChatPaginatedPollVoteContactsList.react",["CometInfiniteScrollTrigger.react","CometListCellGlimmer.react","CometScrollableArea.react","LSFactory","LSIssueCommunityChatPollVotersFetchStoredProcedure","MWXListCell.react","MWXProfilePhoto.react","MWXText.react","asyncToGeneratorRuntime","emptyFunction","promiseDone","react","useMWGetPollVoters","useMWGetPollVotesRanges","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react")),k=i.useEffect,l={scroll:{maxHeight:"x1y3ekvz",$$css:!0}};function a(a){var d=a.optionId,e=a.pollId,f=(h||(h=c("useReStore")))();a=c("useMWGetPollVotesRanges")(e,d);var g=c("useMWGetPollVoters")(e,d,a);k(function(){c("promiseDone")(f.runInTransaction(function(a){return c("LSIssueCommunityChatPollVotersFetchStoredProcedure")(c("LSFactory")(a),{optionId:d,pollId:e})},"readwrite"),c("emptyFunction"))},[f,d,e]);if(!a)return null;var i=a.hasMoreBefore,m=a.isLoadingBefore,n=a.nextPageCursor;function o(){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield f.runInTransaction(function(a){return c("LSIssueCommunityChatPollVotersFetchStoredProcedure")(c("LSFactory")(a),{nextPageCursor:n,optionId:d,pollId:e})},"readwrite")});return p.apply(this,arguments)}a=g.map(function(a,b){return j.jsx(c("MWXListCell.react"),{addOnStart:j.jsx(c("MWXProfilePhoto.react"),{size:32,source:{uri:a.profilePictureUrl}}),content:j.jsx(c("MWXText.react"),{type:"headline4",children:a.fullName})},b)});return j.jsxs(c("CometScrollableArea.react"),{horizontal:!1,xstyle:l.scroll,children:[a,j.jsx(c("CometInfiniteScrollTrigger.react"),{hasMore:i,isLoading:m,onLoadMore:function(){c("promiseDone")(o())},children:j.jsx(c("CometListCellGlimmer.react"),{imageSize:36,imageStyle:"circle",paddingHorizontal:8})},"infiniteScrollTrigger")]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MDSCheckbox.react",["CometCheckbox.react"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("CometCheckbox.react")}),98);
__d("MWChatPollVoteContactsListDialogPage.react",["MWChatPaginatedPollVoteContactsList.react","MWXDialogPageLegacy.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.optionId;a=a.pollId;return i.jsx(c("MWXDialogPageLegacy.react"),{children:i.jsx(c("MWChatPaginatedPollVoteContactsList.react"),{optionId:b,pollId:a})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWLSPollsHooks",["I64","Int64Hooks","LSDict","LSFactory","LSFetchPollDetailsStoredProcedure","LSIssuePollUpdateForThreadStoredProcedure","LSPlatformWaitForTaskCompletion","LSVec","MWCommunityMessagingProfilePictureUtil","MWPActor.react","ReQL","ReQLSuspense","asyncToGeneratorRuntime","getLSMediaContactProfilePictureUrl","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(i||d("react")).useMemo;function l(a){var b=a[0];return[(j||(j=d("I64"))).neg(j.of_float(a[1].size)),j.neg(b.sortKeyVotingTimestamp),b.sortKeyCreationTimestamp]}function m(a){a=a[0];return[(j||(j=d("I64"))).neg(a.voteCount),j.neg(a.sortKeyVotingTimestamp),a.sortKeyCreationTimestamp]}function n(a,b){for(var c=0;c<a.length;c++){var e=a[c],f=b[c];e=(j||(j=d("I64"))).compare(e,f);if(e!==0)return e}return 0}function o(a,b){var c=a[0],e=a[1];a=a[2];var f=b[0],g=b[1];b=b[2];f=(j||(j=d("I64"))).compare(c,f);if(f!==0)return f;f=j.compare(a,b);a=j.compare(e,g);return(j||(j=d("I64"))).equal(c,(j||(j=d("I64"))).zero)?f:a}function p(a){var b=(h||(h=c("useReStore")))(),e=(j||(j=d("I64"))).to_string(d("MWPActor.react").useActor());return d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(b.table("community_chat_poll_options")).getKeyRange(a).map(function(a){var e=new Map(d("ReQLSuspense").toArray(d("ReQL").leftJoin(d("ReQL").fromTableAscending(b.table("community_chat_poll_votes")).getKeyRange(a.pollId,a.optionId),d("ReQL").fromTableAscending(b.table("contacts"))).map(function(a){var b=a[0];a=a[1];var e=b.fullName;e==null&&a!=null&&(e=a.name);var f=d("MWCommunityMessagingProfilePictureUtil").getProfilePictureUrl(b.profilePictureUrl,b.profilePictureUrlExpirationTimestampMs,b.profilePictureFallbackUrl);f==null&&a!=null&&(f=c("getLSMediaContactProfilePictureUrl")(a));return f==null?null:[(j||(j=d("I64"))).to_string(b.contactId),{name:e,profile_picture_url:f}]}),f.id+":131").filter(Boolean));return[a,e]})},[b,a],f.id+":125").sort(function(a,b){return o(m(a),m(b))}).map(function(a){var b=a[1];a=a[0];return{option_id:a.optionId,option_text:a.optionText,voteCount:(j||(j=d("I64"))).to_int32(a.voteCount),voted:b.has(e),votes:Array.from(b.values())}})}function q(a){var b=(h||(h=c("useReStore")))(),e=(j||(j=d("I64"))).to_string(d("MWPActor.react").useActor());return k(function(){return d("ReQLSuspense").toArray(d("ReQL").fromTableAscending(b.table("poll_options_v2")).getKeyRange(a).map(function(a){var e=new Map(d("ReQLSuspense").toArray(d("ReQL").mergeJoin(d("ReQL").fromTableAscending(b.table("poll_votes_v2")).getKeyRange(a.pollId,a.optionId),d("ReQL").fromTableAscending(b.table("contacts"))).map(function(a){a=a[1];return[(j||(j=d("I64"))).to_string(a.id),{name:a.name,profile_picture_url:c("getLSMediaContactProfilePictureUrl")(a)}]}),f.id+":208"));return[a,e]}),f.id+":203").sort(function(a,b){return n(l(a),l(b))}).map(function(a){var b=a[1];a=a[0];return{option_id:a.optionId,option_text:a.optionText,voteCount:(j||(j=d("I64"))).to_int32(a.voteCount),voted:b.has(e),votes:Array.from(b.values())}})},[b,a,e])}function a(a,b){var c=p(a);a=q(a);if(b)return c;else return a}function e(a,b){var e=(h||(h=c("useReStore")))();return d("Int64Hooks").useCallbackInt64(function(d,f){c("promiseDone")(e.runInTransaction(function(e){return c("LSIssuePollUpdateForThreadStoredProcedure")(c("LSFactory")(e),{addedOptions:c("LSVec").ofArray(d.map(function(a){return new(c("LSDict"))([a])})),pollId:b,selectedOptions:c("LSVec").ofArray(f),threadKey:a})},"readwrite"))},[e,a,b])}function r(a,e){var f=(h||(h=c("useReStore")))();return d("Int64Hooks").useCallbackInt64(function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,d){yield c("LSPlatformWaitForTaskCompletion")(f,function(f){return c("LSIssuePollUpdateForThreadStoredProcedure")(c("LSFactory")(f),{addedOptions:c("LSVec").ofArray(b.map(function(a){return new(c("LSDict"))([a])})),pollId:e,selectedOptions:c("LSVec").ofArray(d),threadKey:a})},"issuePollUpdateForThread").then(function(){c("promiseDone")(f.runInTransaction(function(a){return c("LSFetchPollDetailsStoredProcedure")(c("LSFactory")(a),{pollId:e})},"readwrite"))})});return function(a,b){return d.apply(this,arguments)}}(),[f,a,e])}g.usePollOptions=a;g.useUpdatePoll=e;g.useUpdatePollV2=r}),98);
__d("useMWGroupPollLogger",["I64","Int64Hooks","MWGroupPollLoggerDeferred","ReQL","asyncToGeneratorRuntime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var e=(i||(i=c("useReStore")))(),f=d("Int64Hooks").useCallbackInt64(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,c){var f=(yield d("ReQL").firstAsync(d("ReQL").fromTableDescending(e.table("community_chat_polls")).getKeyRange(a)));if(f==null)return;yield d("MWGroupPollLoggerDeferred").log(b,{poll:babelHelpers["extends"]({poll_type:(h||(h=d("I64"))).to_int32(f.pollType),question_id:h.to_string(a),thread_id:h.to_string(f.threadKey)},c)})});return function(a,b){return c.apply(this,arguments)}}(),[e,a]);return f}g["default"]=a}),98);
__d("useMWGroupChangeVotePollLogger",["promiseDone","react","useMWGroupPollLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(a){var b=c("useMWGroupPollLogger")(a);return i(function(a){c("promiseDone")(b("change_vote",{entry_point:a}))},[b])}g["default"]=a}),98);
__d("useMWGroupExistingPollSubmitErrorLogger",["promiseDone","react","useMWGroupPollLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(a){var b=c("useMWGroupPollLogger")(a);return i(function(a,d){c("promiseDone")(b("existing_poll_submit_error",{entry_point:d,exception_message:a}))},[b])}g["default"]=a}),98);
__d("useMWGroupExistingPollSubmitSuccessLogger",["promiseDone","react","useMWGroupPollLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(a){var b=c("useMWGroupPollLogger")(a);return i(function(a){c("promiseDone")(b("existing_poll_submit_success",{entry_point:a}))},[b])}g["default"]=a}),98);
__d("useMWGroupOpenExistingPollLogger",["promiseDone","react","useMWGroupPollLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(a){var b=c("useMWGroupPollLogger")(a);return i(function(a){c("promiseDone")(b("open_existing_poll",{entry_point:a}))},[b])}g["default"]=a}),98);
__d("useMWGroupShowVotersPollLogger",["promiseDone","react","useMWGroupPollLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(a){var b=c("useMWGroupPollLogger")(a);return i(function(a){c("promiseDone")(b("show_voters",{entry_point:a}))},[b])}g["default"]=a}),98);
__d("useMWGroupSubmitExistingPollLogger",["promiseDone","react","useMWGroupPollLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(a){var b=c("useMWGroupPollLogger")(a);return i(function(a,d,e,f){c("promiseDone")(b("submit_existing_poll",{entry_point:a,options_added:d.toString(),options_selected:e.toString(),options_unselected:f.toString()}))},[b])}g["default"]=a}),98);
__d("MWChatPollDetailsDialog.react",["fbt","BaseTextInput.react","CometInlinePressableText.react","CometScrollableArea.react","LSFactory","LSFetchPollDetailsStoredProcedure","LSMessagingThreadTypeUtil","LSThreadBitOffset","MDSCheckbox.react","MWChatPollFacepile.react","MWChatPollStrings","MWChatPollVoteContactsListDialogPage.react","MWDialogText.react","MWGroupPollQPL","MWLSPollsHooks","MWLSThread","MWXCardedDialogLoadingState.react","MWXCircleButton.react","MWXDialogPageLegacy.react","MWXIconPlusCircle","MWXMultiStepDialog.react","MWXText.react","MessengerWebPollConstants","Promise","asyncToGeneratorRuntime","emptyFunction","promiseDone","react","stylex","useMWCMPollsV2Enabled","useMWGroupChangeVotePollLogger","useMWGroupExistingPollSubmitErrorLogger","useMWGroupExistingPollSubmitSuccessLogger","useMWGroupOpenExistingPollLogger","useMWGroupShowVotersPollLogger","useMWGroupSubmitExistingPollLogger","useReStore","useSetAttributeRef"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=l||(l=d("react"));e=l;var n=e.useCallback,o=e.useEffect,p=e.useId,q=e.useState,r={addOptionLabel:{alignItems:"x6s0dn4",display:"x78zum5",justifyContent:"xl56j7k",$$css:!0},checkboxContainer:{alignItems:"x6s0dn4",display:"x78zum5",flexDirection:"x1q0g3np",flexGrow:"x1iyjqo2",justifyContent:"x1qughib",$$css:!0},container:{display:"x78zum5",flexDirection:"xdt5ytf",maxHeight:"x12f24lm",$$css:!0},facepilesContainer:{paddingStart:"xurb0ha",paddingLeft:null,paddingRight:null,$$css:!0},footer:{display:"x78zum5",flexDirection:"x1q0g3np",marginEnd:"x1emribx",marginLeft:null,marginRight:null,paddingTop:"x1y1aw1k",paddingBottom:"xwib8y2",$$css:!0},hidden:{display:"x1s85apg",$$css:!0},newOptionText:{backgroundColor:"xjbqb8w",borderTopStyle:"x1ejq31n",borderEndStyle:"xd10rxx",borderBottomStyle:"x1sy0etr",borderStartStyle:"x17r0tee",color:"xzsf02u",flexGrow:"x1iyjqo2",fontSize:"x6prxxf",fontWeight:"x1s688f",$$css:!0},pollOption:{alignItems:"x6s0dn4",display:"x78zum5",marginTop:"xdj266r",marginEnd:"x1emribx",marginBottom:"xat24cr",marginStart:"x1i64zmx",paddingTop:"x1y1aw1k",paddingEnd:"x4uap5",paddingBottom:"xwib8y2",paddingStart:"xkhd6sd",$$css:!0},pollOptions:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",$$css:!0},title:{paddingTop:"xyamay9",paddingEnd:"x1sxyh0",paddingBottom:"x1l90r2v",paddingStart:"xurb0ha",$$css:!0},underlinedOption:{borderBottomColor:"x1nb4dca",borderBottomStyle:"x1q0q8m5",borderBottomWidth:"xso031l",$$css:!0}};function s(a){var e,f=a.enablePollsV2,g=a.onClose,j=a.originalPollOptions,l=a.pollId,s=a.threadKey,t=a.title;a=q(!1);var u=a[0],v=a[1],w=d("MWLSPollsHooks").useUpdatePoll(s,l),x=d("MWLSPollsHooks").useUpdatePollV2(s,l);a=d("MWLSThread").useThread(s,function(a){return d("LSMessagingThreadTypeUtil").isDiscoverableChannel(a.threadType)});e=(e=d("MWLSThread").useThread(s,function(a){return d("LSThreadBitOffset").has(36,a)}))!=null?e:!1;var y=p(),z=c("useSetAttributeRef")("id",y),A=c("useSetAttributeRef")("aria-labelledby",y);y=q(j);var B=y[0],C=y[1];y=B.map(function(a){a=a.option_text;return a.trim().toUpperCase()}).filter(function(a){return a!==""});var D=new Set(y),E=y.length===D.size,F=j.length!==B.length,G=!j.every(function(a,b){return a.voted===B[b].voted}),H=F||G;y=d("MWLSThread").useThread(s,function(a){return a.cannotReplyReason==="broadcast_chat_read_only"});var I=a===!0?y===!1&&e:!0,J=d("MWGroupPollQPL").useLogUpdatePollStart(s),K=d("MWGroupPollQPL").useLogOnUpdatePollConfirmClick(s),L=d("MWGroupPollQPL").useLogUpdatePollCancel(s),M=n(function(){g(),L()},[L,g]),N=d("MWGroupPollQPL").useLogUpdatePollFail(s),O=d("MWGroupPollQPL").useLogUpdatePollSuccess(s),P=c("useMWGroupOpenExistingPollLogger")(l);o(function(){J(),P(5)},[J,P]);var Q=c("useMWGroupChangeVotePollLogger")(l),R=c("useMWGroupShowVotersPollLogger")(l),S=c("useMWGroupSubmitExistingPollLogger")(l),T=c("useMWGroupExistingPollSubmitSuccessLogger")(l),U=c("useMWGroupExistingPollSubmitErrorLogger")(l),V=function(){var a=[];return C([].concat(B,[{option_id:void 0,option_text:"",voteCount:0,voted:!1,votes:a}]))};function W(){return X.apply(this,arguments)}function X(){X=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield x(B.slice(j.length).filter(function(a){a=a.option_text;return a.trim().toUpperCase()!==""}).map(function(a){var b=a.option_text;a=a.voted;return[b,a]}),B.slice(0,j.length).reduce(function(a,b){b.option_id!=null&&b.voted&&a.push(b.option_id);return a},[]))});return X.apply(this,arguments)}function Y(){K(F,G);S(5,B.filter(function(a){return a.option_id===void 0}).length,j.filter(function(a,b){return a.voted===!1&&B[b].voted===!0}).length,j.filter(function(a,b){return a.voted===!0&&B[b].voted===!1}).length);if(f===!0){v(!0);var a=(k||(k=b("Promise"))).resolve(W()).then(function(){O(),v(!1),g(),T(5)},function(a){U(a,5)});c("promiseDone")(a,c("emptyFunction"),N)}else w(B.slice(j.length).filter(function(a){a=a.option_text;return a.trim().toUpperCase()!==""}).map(function(a){var b=a.option_text;a=a.voted;return[b,a]}),B.slice(0,j.length).reduce(function(a,b){b.option_id!=null&&b.voted&&a.push(b.option_id);return a},[])),g()}var Z=function(a){return B.map(function(b,d){var e=d>=j.length,f=!I&&d===B.length-1,g=h._("__JHASH__v4LG3KjCwwg__JHASH__",[h._plural(b.voteCount,"number"),h._param("name",b.option_text)]),k=function(){R(5);return a(function(){return b.option_id!=null?m.jsx(c("MWChatPollVoteContactsListDialogPage.react"),{optionId:b.option_id,pollId:l}):void 0},{title:g})};return m.jsx("li",{className:(i||(i=c("stylex")))([r.pollOption,!f&&r.underlinedOption]),children:m.jsxs("div",{className:"x6s0dn4 x78zum5 x1q0g3np x1iyjqo2 x1qughib",children:[m.jsx(c("MDSCheckbox.react"),{checked:b.voted,label:e?"":b.option_text,name:"polloption_"+String(d),onChange:function(){var a=B.map(function(a,b){return d!==b?a:babelHelpers["extends"]({},a,{voted:!a.voted})});Q(5);C(a)},value:String(d)}),e?m.jsx(c("BaseTextInput.react"),{"aria-label":c("MWChatPollStrings").addPollOptionLabel,autoFocus:!0,maxLength:c("MessengerWebPollConstants").POLL_MAX_OPTION_LENGTH,onBlur:function(a){a=B.map(function(a){return babelHelpers["extends"]({},a,{option_text:a.option_text.trim()})}).filter(function(a){a=a.option_text;return a!==""});C(a)},onChange:function(a){var b=a.target.value;a=B.map(function(a,c){return d!==c?a:babelHelpers["extends"]({},a,{option_text:b})});C(a)},value:b.option_text,xstyle:r.newOptionText}):m.jsx("div",{className:"xurb0ha",children:m.jsx(c("MWChatPollFacepile.react"),{contacts:b.votes,countOverride:b.voteCount,direction:"reversed",gap:"negative",onPress:k,size:"medium"})})]})},String(d))})};return m.jsx(c("MWXMultiStepDialog.react"),{onClose:M,title:h._("__JHASH__ELlJ8FE6WvJ__JHASH__"),withCloseButton:!0,children:function(a){return m.jsx(c("MWXDialogPageLegacy.react"),{primaryCallToAction:{disabled:!E||!H,label:h._("__JHASH__KjtbxLO6fsX__JHASH__"),loading:u,onPress:Y},secondaryCallToAction:{label:h._("__JHASH__ddF1YsNwDg4__JHASH__"),onPress:M},children:m.jsx("div",{className:"x78zum5 xdt5ytf x12f24lm",children:m.jsxs(c("CometScrollableArea.react"),{vertical:!0,xstyle:r.pollOptions,children:[m.jsx("div",{className:"xyamay9 x1sxyh0 x1l90r2v xurb0ha",children:m.jsx(c("MWDialogText.react"),{type:"headlineEmphasized",children:t})}),m.jsx("ul",{children:Z(a)}),I&&m.jsxs("div",{className:(i||(i=c("stylex")))(r.footer,B.length>=c("MessengerWebPollConstants").POLL_MAX_OPTIONS?r.hidden:!1),children:[m.jsx(c("MWXCircleButton.react"),{color:"tertiary",icon:c("MWXIconPlusCircle"),label:h._("__JHASH__IkHVNThPWxa__JHASH__"),onPress:V,ref:A,size:36,type:"deemphasized"}),m.jsx("div",{className:"x6s0dn4 x78zum5 xl56j7k",children:m.jsx(c("MWXText.react"),{color:"secondary",type:"body3",children:m.jsx(c("CometInlinePressableText.react"),{hoverUnderlineDisabled:!0,onPress:V,ref:z,weight:"semibold",children:c("MWChatPollStrings").addPollOptionLabel})})})]})]})})})}})}s.displayName=s.name+" [from "+f.id+"]";function a(a){var b=a.onClose,e=a.pollId,f=a.threadKey;a=a.title;var g=c("useMWCMPollsV2Enabled")(f),h=(j||(j=c("useReStore")))();o(function(){g&&c("promiseDone")(h.runInTransaction(function(a){return c("LSFetchPollDetailsStoredProcedure")(c("LSFactory")(a),{pollId:e})},"readwrite"))},[h,e,g]);var i=d("MWLSPollsHooks").usePollOptions(e,g);if(i!=null&&i.length>0)return m.jsx(s,{enablePollsV2:g,onClose:b,originalPollOptions:i,pollId:e,threadKey:f,title:a});else return m.jsx(c("MWXCardedDialogLoadingState.react"),{onClose:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("CometDefaultPrivacySelectorPickerFooter_footer$normalization.graphql",["CometTextWithEntitiesRelay_textWithEntities$normalization.graphql"],(function(a,b,c,d,e,f){"use strict";a={kind:"SplitOperation",metadata:{},name:"CometDefaultPrivacySelectorPickerFooter_footer$normalization",selections:[{alias:null,args:null,kind:"ScalarField",name:"should_show_tooltip",storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"tooltip",plural:!1,selections:[{args:null,fragment:b("CometTextWithEntitiesRelay_textWithEntities$normalization.graphql"),kind:"FragmentSpread"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null}]};e.exports=a}),null);
__d("CometDefaultPrivacySelectorPickerFooter_footer.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometDefaultPrivacySelectorPickerFooter_footer",selections:[{alias:null,args:null,kind:"ScalarField",name:"should_show_tooltip",storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"tooltip",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometTextWithEntitiesRelay_textWithEntities"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null}],type:"PrivacySelectorDefaultPrivacyFooterRenderer",abstractKey:null};e.exports=a}),null);
__d("CometPrivacySelectorPickerHeader_header$normalization.graphql",["CometTextWithEntitiesRelay_textWithEntities$normalization.graphql"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{args:null,fragment:b("CometTextWithEntitiesRelay_textWithEntities$normalization.graphql"),kind:"FragmentSpread"}];return{kind:"SplitOperation",metadata:{},name:"CometPrivacySelectorPickerHeader_header$normalization",selections:[{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"headline",plural:!1,selections:a,storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"paragraphs",plural:!0,selections:a,storageKey:null}]}}();e.exports=a}),null);
__d("CometPrivacySelectorPickerHeader_header.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{args:null,kind:"FragmentSpread",name:"CometTextWithEntitiesRelay_textWithEntities"}];return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometPrivacySelectorPickerHeader_header",selections:[{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"headline",plural:!1,selections:a,storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"paragraphs",plural:!0,selections:a,storageKey:null}],type:"PrivacySelectorSimpleHeaderRenderer",abstractKey:null}}();e.exports=a}),null);
__d("BaseStyledCheckbox.react",["BaseCheckbox.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useCallback,k={checkbox:{display:"x78zum5",$$css:!0}};function a(a,b){var d=a["aria-label"],e=a["aria-labelledby"],f=a.checked,g=a.checkedIcon,h=a.children,l=a.disabled;l=l===void 0?!1:l;var m=a.id,n=a.name,o=a.onChange,p=a.suppressFocusRing,q=a.tabIndex,r=a.testid;r=a.uncheckedIcon;var s=a.value;a=j(function(a,b){o(s)},[o,s]);return i.jsxs(c("BaseCheckbox.react"),{"aria-label":d,"aria-labelledby":e,checked:f,disabled:l,id:m,name:n,onValueChange:a,ref:b,suppressFocusRing:p,tabIndex:q,testid:void 0,xstyle:k.checkbox,children:[f?g:r,h]})}a.displayName=a.name+" [from "+f.id+"]";b=i.forwardRef(a);g["default"]=b}),98);
__d("CometCheckbox.react",["ix","BaseStyledCheckbox.react","CometIcon.react","CometPressableOverlay.react","TetraText.react","fbicon","react","useCometPressableEventHandlers"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a,b){var e=a.checked,f=a.disabled;f=f===void 0?!1:f;var g=a.iconSize;g=g===void 0?24:g;var i=a.id,k=a.label,l=a.labelIsHidden;l=l===void 0?!1:l;var m=a.name,n=a.onChange,o=a.reduceEmphasis;o=o===void 0?!1:o;var p=a.smallerLabel;p=p===void 0?!1:p;var q=a.tabIndex,r=a.testid;r=a.value;a=c("useCometPressableEventHandlers")({disabled:f});var s=a[0];a[1];var t=a[2],u=t.focusVisible,v=t.hovered;t=t.pressed;a=a[3];return j.jsxs("label",babelHelpers["extends"]({className:"x1i10hfl x6s0dn4 x78zum5 xwib8y2 x1y1aw1k x1n2onr6 xggy1nq"},a,{ref:s,children:[j.jsx(c("BaseStyledCheckbox.react"),{"aria-label":l?k:void 0,checked:e,checkedIcon:j.jsx(c("CometIcon.react"),{color:f?"disabled":"highlight",icon:g===16?d("fbicon")._(h("492790"),16):d("fbicon")._(h("531032"),24)}),disabled:f,id:i,name:m,onChange:n,ref:b,tabIndex:q,testid:void 0,uncheckedIcon:j.jsx(c("CometIcon.react"),{color:f?"disabled":"secondary",icon:g===16?d("fbicon")._(h("659287"),16):d("fbicon")._(h("659289"),24)}),value:r,children:j.jsx(c("CometPressableOverlay.react"),{focusVisible:u,hovered:v,offset:8,pressed:t,radius:"50%"})}),l?null:j.jsx("div",{className:"x1r8uery x1iyjqo2 x1i64zmx xeuugli",children:j.jsx(c("TetraText.react"),{color:f?"disabled":"primary",type:o?p===!0?"body4":"body3":"button2",children:k})})]}))}a.displayName=a.name+" [from "+f.id+"]";b=j.forwardRef(a);g["default"]=b}),98);
__d("CometDefaultPrivacySelectorPickerFooter.react",["fbt","CometCheckbox.react","CometDefaultPrivacySelectorPickerFooter_footer.graphql","CometRelay","CometTextWithEntitiesRelay.react","react","useCometCallout"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));e=j;var l=e.useCallback,m=e.useEffect,n=e.useMemo,o=e.useState,p={checkbox:{marginStart:"x1i64zmx",marginLeft:null,marginRight:null,$$css:!0},tooltip:{maxWidth:"xw5ewwj",$$css:!0}};function a(a){var e=a.footer,f=a.onDefaultPrivacyCheckboxChecked,g=a.shouldDisableCheckbox;a=d("CometRelay").useFragment(i!==void 0?i:i=b("CometDefaultPrivacySelectorPickerFooter_footer.graphql"),e);e=a.label;var j=a.should_show_tooltip,q=a.tooltip;e=(a=e)!=null?a:h._("__JHASH__x5S7LU-a7uu__JHASH__");a=o(!1);var r=a[0],s=a[1];a=n(function(){return{align:"start",arrowStyle:"edge",label:q!=null?h._("__JHASH__ummTC_8zkGX__JHASH__",[h._param("tooltip text",k.jsx(c("CometTextWithEntitiesRelay.react"),{textWithEntities:q}))]):h._("__JHASH__5FN0852TJpI__JHASH__"),onHide:function(){r&&s(!1)},position:"above",type:"accent",xstyle:p.tooltip}},[r,q]);j=c("useCometCallout")(a,((a=j)!=null?a:!1)||r);a=o(!g);var t=a[0],u=a[1];a=function(){u(!t),f&&f(!t)};m(function(){u(g),f&&f(g)},[f,g]);var v=l(function(){g&&s(!0)},[g]),w=l(function(){g&&s(!1)},[g]);return k.jsx("div",{className:"x1i64zmx",onMouseEnter:v,onMouseLeave:w,children:k.jsx(c("CometCheckbox.react"),{checked:t,disabled:g,label:e,name:"checkbox",onChange:a,ref:j,testid:void 0,value:"default_privacy_checkbox"})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometPrivacySelectorPickerHeader.react",["CometBoldedEntityRenderer","CometPrivacySelectorPickerHeader_header.graphql","CometRelay","CometTextWithEntitiesRelay.react","CometUnitHeader.react","TetraList.react","TetraListCell.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={"*":[c("CometBoldedEntityRenderer")]};function a(a){a=a.header;a=d("CometRelay").useFragment(h!==void 0?h:h=b("CometPrivacySelectorPickerHeader_header.graphql"),a);var e=a.headline;a=a.paragraphs;if(e==null&&a.length===0)return null;a=a.map(function(a,b){return j.jsx(c("TetraListCell.react"),{body:j.jsx(c("CometTextWithEntitiesRelay.react"),{renderers:k,textWithEntities:a}),level:3},"paragraph-"+b)});return j.jsxs("div",{className:"x1yztbdb xwya9rg",children:[j.jsx(c("CometUnitHeader.react"),{headline:e==null?null:j.jsx(c("CometTextWithEntitiesRelay.react"),{textWithEntities:e}),level:3}),j.jsx(c("TetraList.react"),{children:a})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);